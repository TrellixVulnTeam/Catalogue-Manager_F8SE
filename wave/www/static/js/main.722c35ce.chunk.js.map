{"version":3,"sources":["login.tsx","qd.ts","card_menu.tsx","intl.ts","theme.ts","layout.tsx","notification.ts","meta.tsx","page.tsx","markup.tsx","markdown.tsx","tooltip.tsx","button.tsx","checkbox.tsx","checklist.tsx","choice_group.tsx","color_picker.tsx","combobox.tsx","date_picker.tsx","dropdown.tsx","expander.tsx","file_upload.tsx","frame.tsx","label.tsx","plot.tsx","link.tsx","message_bar.tsx","picker.tsx","progress.tsx","range_slider.tsx","separator.tsx","slider.tsx","spinbox.tsx","stepper.tsx","parts/progress_arc.tsx","progress_table_cell_type.tsx","icon_table_cell_type.tsx","table.tsx","tabs.tsx","template.tsx","text.tsx","textbox.tsx","toggle.tsx","vega.tsx","form.tsx","dialog.tsx","app.tsx","router.tsx","breadcrumbs.tsx","flex.tsx","graphics.tsx","grid.tsx","nav.tsx","header.tsx","image.tsx","parts/progress_bar.tsx","large_bar_stat.tsx","large_stat.tsx","list.tsx","list_item1.tsx","none.tsx","pixel_art.tsx","repeat.tsx","parts/microbars.tsx","parts/microline.tsx","small_series_stat.tsx","small_stat.tsx","tab.tsx","tall_gauge_stat.tsx","tall_series_stat.tsx","toolbar.tsx","wide_bar_stat.tsx","wide_gauge_stat.tsx","wide_series_stat.tsx","serviceWorker.ts","index.tsx"],"names":["css","stylesheet","login","width","minHeight","display","alignItems","justifyContent","flexDirection","Login","queryString","window","location","search","action","className","method","CompoundButton","type","secondaryText","different","_a","_b","box","x","length","undefined","equal","arrows","on","f","a","dispose","remove","push","broadcast","t","touch","y","__boxed__","boxed","args","react","slice","immediate","boxen","xs","emit","map","forEach","i","indexOf","splice","bond","ctor","props","model","self","Object","keys","k","v","_","setState","state","this","init","update","render","React","SockEventType","SockMessageType","guid","xid","parseI","s","test","parseInt","NaN","parseU","isNaN","unpack","data","decodeString","isData","list","d","substring","decodeType","JSON","parse","e","console","error","fields","rows","Array","isArray","w","recs","r","rec","j","columns","n","isMap","isBuf","__buf__","isCur","__cur__","newType","m","reverseIndex","match","make","tup","newCur","get","set","newFixBuf","tups","seti","geti","put","newCycBuf","b","_k","newTups","loadCycBuf","loadFixBuf","loadMapBuf","ts","keysOf","sort","newMapBuf","loadBuf","c","loadCard","key","changedB","ks","p","gget","gset","buf","substr","id","name","changed","newPage","dirty","dirties","cards","add","card","split","valuesOf","drop","sync","load","page","exec","ops","op","keyseq","join","clearRec","qd","path","pathname","events","refreshRateB","busyB","socket","dialogB","changes","ref","value","del","sock","opsd","send","stringify","close","backoff","currentPage","connect","handle","reconnect","address","retry","WebSocket","onopen","Message","Info","message","hash","charAt","onclose","Warn","setTimeout","onmessage","line","msg","Data","Err","Reset","err","onerror","l","protocol","host","toSocketAddress","menu","position","top","right","$nest","height","padding","icon","userSelect","target","boxSizing","cursor","opacity","toContextMenuItem","text","label","iconProps","iconName","title","caption","subMenuProps","items","onClick","startsWith","CardMenu","commands","hiddenB","show","hide","hidden","data-test","Icon","ContextualMenu","onItemClick","onDismiss","intlCache","createIntlCache","intl","createIntl","locale","navigator","language","messages","onError","isBareExpr","Handlebars","registerHelper","opts","replace","toUpperCase","kvToOpts","formatDate","formatTime","formatNumber","isFormatExpr","parseFormat","invocation","compile","bare","format","px","pc","rem","clas","names","border","thickness","color","margin","rgba","g","toFixed","displayMixin","visible","black","toPalette","palette","hex","rgb","tones","text0","text1","text2","text3","text4","text5","text6","text7","text8","text9","defaultColors","red","pink","purple","violet","indigo","blue","azure","cyan","teal","mint","green","lime","yellow","amber","orange","tangerine","brown","gray","palettes","light","dark","neon","fontStyles","size","tracking","fontSize","letterSpacing","lineHeight","Math","round","fontStyleFor","CardEffect","font","s6","s7","s8","s9","s10","s11","s12","s13","s14","s15","s16","s17","s18","s20","s24","s30","s40","s80","w1","fontWeight","w2","w3","w4","w5","w6","w7","w8","w9","theme","getTheme","colors","merge","defs","endsWith","loadTheme","themePrimary","themeLighterAlt","themeLighter","themeLight","themeTertiary","themeSecondary","themeDarkAlt","themeDark","themeDarker","neutralLighterAlt","neutralLighter","neutralLight","neutralQuaternaryAlt","neutralQuaternary","neutralTertiaryAlt","neutralTertiary","neutralSecondary","neutralPrimaryAlt","neutralPrimary","neutralDark","white","register","effect","Normal","lookup","newCardRegistry","substitute","formatString","defaultValue","Format","CardView","Tag","view","Repeat","badPlacement","left","grid","uw","uh","cols","gap","scale","innerWidth","innerHeight","unitWidth","unitHeight","unitInnerWidth","unitInnerHeight","place","trim","normalize","h","slot","bottom","placeOnGrid","rescale","document","documentElement","clientWidth","body","clientHeight","min","inset","overflow","newGrid","backgroundColor","transition","normal","boxShadow","raised","flat","flush","getCardEffectClass","Raised","Flat","GridLayout","children","placement","zIndex","style","showNotification","notificationText","Notification","permission","requestPermission","layoutsB","preload","refresh","notification","redirect","layouts","dialog","iconLink","querySelector","touchIconLink","href","URL","View","presetBreakpoints","xl","breakpointsB","layoutB","parseBreakpoint","spec","badSlot","order","parseBoxes","index","specs","zone","grow","size1","size2","parseBox","bps","layout","nextLayout","breakpoint","max","mq","matchMedia","listener","matches","bp","addEventListener","removeEventListener","flex","column","marginBottom","row","marginRight","justifications","start","end","center","between","around","alignments","baseline","stretch","wrappings","toSectionStyle","direction","justify","align","alignContent","wrap","flexWrap","flexGrow","toSlotStyle","findSection","section","sections","FlexSection","cardslots","cardslot","FlexLayout","layoutIndex","toSection","zones","min_width","max_width","min_height","max_height","sortCardsInSection","minWidth","maxWidth","maxHeight","PageLayout","metaCard","onMetaCardChanged","segregate","metas","titledCard","untitledCard","XMarkup","content","dangerouslySetInnerHTML","__html","MarkupCard","markdown","markdownit","html","linkify","typographer","Markdown","source","container","element","textAlign","marginLeft","XToolTip","showIcon","expand","tooltipProps","onRenderContent","buttons","XButton","link","disabled","primary","XButtons","button","filter","Boolean","tooltip","horizontal","horizontalAlign","tokens","childrenGap","XStandAloneButton","XCheckbox","onChange","_e","checked","trigger","inputProps","defaultIndeterminate","indeterminate","defaultChecked","toolbar","XChecklistItem","selectedB","styles","root","XChecklist","values","_pause","defaultSelection","Set","choices","choice","has","capture","vs","select","selectAll","deselectAll","variant","XChoiceGroup","options","option","required","defaultSelectedKey","XColorPicker","onColorChanged","_id","str","cs","columnCount","selectedId","colorCells","XCombobox","textB","_index","placeholder","autoComplete","allowFreeform","errorMessage","pad2","parseDate","ss","ymd","Date","XDatePicker","onSelectDate","getFullYear","getMonth","getDate","XDropdown","isMultivalued","selection","selectedOptionsB","from","selected","delete","selectedOpts","clear","o","selectionArr","multiSelect","selectedKeys","expanderOpen","expanderClosed","XExpander","isOpenB","expanded","isOpen","actionTitle","expanderIcon","paddingLeft","uploadInput","upload","uploadDragging","uploadLabel","background","uploadMessageBar","uploadRemove","convertMegabytesToBytes","bytes","XFileUpload","isDraggingB","filesB","percentCompleteB","errorB","successMsgB","maxFileSizeBytes","max_file_size","maxSizeBytes","max_size","fileExtensions","file_extensions","formData","FormData","append","makeRequest","Promise","resolve","reject","xhr","XMLHttpRequest","open","onprogress","loaded","total","onreadystatechange","readyState","DONE","status","responseText","files","validateFiles","fileArr","multiple","notAllowedFiles","fileName","allowedExtension","toLowerCase","isFileTypeAllowed","maxSizePerFileExceededFiles","reduce","errMsg","onIsDragging","preventDefault","stopPropagation","onIsNotDragging","onDrop","dataTransfer","onDragOver","onDismissError","onDismissSuccess","uploadClasses","onDragStart","onDragEnter","onDragEnd","onDragLeave","messageBarType","Fluent","isMultiline","success","pointerEvents","description","percentComplete","verticalAlign","overflowX","nowrap","accept","htmlFor","marginTop","fixrefs","inline","createObjectURL","Blob","InlineFrame","src","frameBorder","XFrame","SpaceT","XLabel","XLink","download","toMessageBarType","warning","severeWarning","blocked","info","XMessageBar","pickerSuggestionsProps","suggestionsHeaderText","noResultsFoundText","XPicker","tags","selectedTagsB","includes","filterSuggestedTags","filterText","selectedTags","isAlreadySelected","removeButtonAriaLabel","onResolveSuggestions","itemLimit","max_choices","selectedItems","hues","cat10","registerInteraction","processing","throttle","wait","leading","trailing","isF","isS","parseInts","convertToDates","ds","convertToPairs","f0","f1","xyVariants","xyExtra","makeXYProps","makeXYExtraProps","makeFormattables","xProps","yProps","xExtraProps","yExtraProps","otherProps","formattables","scaleTypeOf","marks","attr","field","spaceTypes","cc","CC","dd","DD","tt","TT","dc","DC","cd","CD","tc","TC","ct","CT","td","TD","dt","DT","dummyDatum","makeFormatFunc","datum","transposeMark","mark","tmp","refactorMark","plainAttr","fieldAttr","formatAttr","expr","fmts","fmt","refactorData","x_scale","x_field","x0_field","x0","y_scale","y_field","y0_field","y0","x1_field","x2_field","y1_field","y2_field","makeNote","fill_color","fill_opacity","stroke_color","stroke_opacity","stroke_size","stroke_dash","ref_stroke_color","ref_stroke_opacity","ref_stroke_dash","ref_stroke_size","label_fill_color","label_fill_opacity","label_stroke_color","label_stroke_opacity","label_stroke_size","label_font_size","label_font_weight","label_line_height","label_align","labelStyle","makeTextStyle","shapeStyle","makeShapeStyle","lineStyle","point","makeGeom","color_field","color_range","color_domain","shape_field","shape_range","shape","size_field","size_range","stack","dodge","dodge_field","curve","label_field","label_format","label_offset","label_offset_x","label_offset_y","label_rotation","label_position","label_overlap","adjust","marginRatio","dodgeBy","domain_colors","acc","callback","offset","offsetX","offsetY","i_label_rotation","autoRotate","rotate","PI","cfg","fill","fillOpacity","stroke","strokeOpacity","lineWidth","lineDash","font_size","font_weight","line_height","u_font_weight","makeScale","typ","nice","axis","autoHide","fixScaleType","formatter","alias","makeCoord","space","coord","getCoordType","transpose","actions","makeChart","el","coordinate","scales","axes","x_format","x_title","x_min","x_max","x_nice","x_axis","y_format","y_title","y_min","y_max","y_nice","y_axis","makeScales","geometries","annotations","makeMarks","autoFit","animate","interactions","showCrosshairs","crosshairs","plot","XVisualization","currentChart","currentPlot","createRef","current","raw_data","spaceTypeOf","chart","Chart","interaction","ev","gEvent","originalEvent","stateStatus","select_marks","changeData","XProgress","wrapper","borderWidth","borderRadius","borderColor","transform","fontFamily","XRangeSlider","step","min_value","max_value","valueB","val","maxValue","minValue","allowSameValues","separator","XSeparator","XSlider","onChanged","_event","_value","buttonProps","showValue","originFromZero","XSpinbox","parseValue","parseFloat","isFinite","onBlur","onIncrement","newValue","String","onDecrement","stepNumber","iconStyles","XStepper","steps","createStep","Fragment","done","stepIdx","paddingRight","block","ProgressArc","outerRadius","innerRadius","d3","startAngle","endAngle","bar","percentContainer","percent","XProgressTableCellType","progress","XIconTableCellType","sortableHeader","sortingIcon","hideCellGroupCollapse","sortingF","sortAsc","rowA","rowB","dataType","formatNum","num","toString","XTable","item","cells","isMultiple","filteredItemsB","searchableKeys","searchable","searchStrB","selectedFiltersB","colContextMenuListB","groupsB","groupByKeyB","groupByOptions","groupable","col","onSearchChange","searchStr","initGroups","some","selectedFilters","filteredItems","every","filterKey","filterVal","reset","toCSV","createElement","blob","url","click","revokeObjectURL","onRenderMenuList","paddingTop","paddingBottom","filters","onDismissContextMenu","onColumnContextMenu","fieldName","directionalHint","bottomLeftEdge","gapSpace","isBeakVisible","arr","prevSum","groupedBy","rv","groupedByKeys","groups","prevKey","startIndex","count","isCollapsed","makeGroups","flatMap","onGroupByChange","onRenderDetailsHeader","stickyPosition","Header","isScrollSynced","onRenderDetailsFooter","searchOrFilter","filterable","downloadable","resettable","footerItems","Footer","onRenderRow","cell","alignSelf","onColumnClick","getAttribute","isSortable","group","columnsB","headerClassName","sortable","iconClassName","columnActionsMode","hasDropdown","clickable","cellType","cell_type","data_type","isResizable","primaryColumnKey","find","onSelectionChanged","getSelection","onItemInvoked","onRenderItemColumn","toLocaleString","computeHeight","topToolbarHeight","rowHeight","footerHeight","DataTable","constrainMode","unconstrained","layoutMode","fixedColumns","selectionMode","none","selectionPreservedOnEmptyClick","setKeySelected","selectedKey","scrollbarVisibility","auto","XTabs","onLinkClick","itemKey","tabs","itemIcon","headerText","XTemplate","template","textDecoration","table","borderCollapse","tr","borderBottom","th","textVariants","XText","visibility","menuName","XTextbox","mask","readOnly","readonly","debounce","multiline","fieldGroup","prefix","suffix","password","XToggle","onText","offText","inlineLabel","XVegaVisualization","specification","vegaEmbed","mode","defaultStyle","renderer","config","autosize","resize","discreteWidth","discreteHeight","continuousWidth","continuousHeight","defaults","form","XComponents","components","XComponent","text_xl","text_l","text_m","text_s","text_xs","message_bar","textbox","checkbox","toggle","choice_group","dropdown","checklist","combobox","slider","spinbox","date_picker","color_picker","file_upload","expander","frame","markup","picker","range_slider","stepper","visualization","vega_visualization","closable","blocking","dialogContentProps","largeHeader","lastComponent","pop","modalProps","isBlocking","app","centerFullHeight","freeOverlay","busyOverlay","BusyOverlay","spinTimeout","spinB","busy","clearTimeout","Spinner","SpinnerSize","large","App","contentB","onSocket","reload","onHashChanged","Router","routes","exact","Breadcrumb","directions","vertical","toFlexStyle","item_view","item_props","extract","extra","nums","zip","zip3","curves","basis","cardinal","smooth","linear","natural","ret0","get0","get1","get2","renderEl","toAttributes","r1","r2","a1","a2","radial","angle","radius","y1","x1","view_box","stage","scene","stageEls","sceneEls","viewBox","ths","trs","tds","XNav","collapseByDefault","collapsed","links","Nav","lhs","iconSize","burger","rhs","subtitle","Navigation","hideNav","Panel","isLightDismiss","PanelType","smallFixedNear","hasCloseButton","navB","showNav","icon_color","nav","FontIcon","img","objectFit","alt","image","rail","ProgressBar","aux_value","captions","value_caption","aux_value_caption","plot_color","canvas","pixelSize","swatches","borderTop","pixel","brush","pixels","odd","floor","defaultColorAt","paint","MicroBars","_category","category","zeroValue","minY","maxY","scaleX","domain","range","paddingInner","scaleY","rects","Component","MicroArea","fcurve","ln","defined","ar","strokeLinejoin","strokeLinecap","strokeWidth","plotHeight","titleBar","plotWidth","plot_type","plot_data","plot_category","plot_value","plot_zero_value","plot_curve","linkFormat","PivotLinkFormat","PivotItem","Pivot","value_overlay","overflowProps","ariaLabel","toCommands","toCommand","iconOnly","overflow_items","secondary_items","overflowCommands","farCommands","CommandBar","overflowItems","overflowButtonProps","farItems","hostname","defaultFontStyle","initializeIcons","ReactDOM","getElementById","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"oPAKEA,EAAMC,YAAW,CACfC,MAAO,CACLC,MAAO,OACPC,UAAW,QACXC,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChBC,cAAe,YAoBNC,EAfL,WACN,IACEC,EAAcC,OAAOC,SAASC,OAC9BC,EAAM,qBAAiBJ,GACzB,OACE,yBAAKK,UAAWf,EAAIE,OAClB,0BAAMY,OAAQA,EAAQE,OAAO,QAC3B,kBAACC,EAAA,EAAD,CAAgBC,KAAK,UAAUC,cAAc,yBAA7C,a,yGCOV,SAASC,EAAaC,EAAOC,GAAS,OAAO,EAEtC,SAASC,IACd,IACEC,EAAQ,UAAKC,OAAS,EAAd,6CAA4BC,EAEpCC,EAAQ,UAAKF,OAAS,EAAK,UAAKA,OAAS,EAAd,wCAA4B,KAAQL,EAC/DQ,EAAqB,GACrBC,EAAK,SAACC,GACJ,IAAMC,EAAc,CAAED,IAAGE,QAAS,kBAAMC,EAAOL,EAAQG,KAEvD,OADAH,EAAOM,KAAKH,GACLA,GAETC,EAAU,WAAcJ,EAAOH,OAAS,GACxCU,EAAY,SAACC,GAAgB,IAAD,gBAAkBR,GAAlB,IAAE,oCAA0BE,EAAEM,IAA9B,gCAC5BC,EAAQ,kBAAYF,EAAUX,IAC9BM,EAAI,WACF,GAAI,UAAGL,OAAQ,CACb,IAAMa,EAAC,yCACDX,EAAQA,EAAMH,EAAGc,GAAMd,IAAMc,IAAKH,EAAUX,EAAIc,GAExD,OAAOd,GAQX,OALAM,EAAED,GAAKA,EACPC,EAAEO,MAAQA,EACVP,EAAEE,QAAUA,EACZF,EAAES,WAAY,EAEPT,EAGF,SAASU,EAAShB,GAAuB,OAAOA,IAAqB,IAAhBA,EAAEe,UAQvD,SAASV,IAAgC,IAAD,uBAAzBY,EAAyB,yBAAzBA,EAAyB,gBAAE,OAAOC,GAAM,EAAOD,EAAKE,MAAM,EAAGF,EAAKhB,OAAS,GAAIgB,EAAKA,EAAKhB,OAAS,IASjH,SAASiB,EAAME,EAAoBC,EAAmBf,GAC3D,IACEgB,EAAKD,EACLE,EAAO,kBAAMjB,EAAC,WAAD,cAAKgB,EAAGE,KAAI,SAAAxB,GAAC,OAAIA,UAC9BI,EAASkB,EAAGE,KAAI,SAAAxB,GAAC,OAAIA,EAAEK,GAAGkB,MAI5B,OADIH,GAAWG,IACR,CAAEf,QAHG,kBAAMJ,EAAOqB,SAAQ,SAAAlB,GAAC,OAAIA,EAAEC,eA0B1C,SAASC,EAAUa,EAAStB,GAAc,IAAM0B,EAAIJ,EAAGK,QAAQ3B,GAAQ0B,GAAK,GAAGJ,EAAGM,OAAOF,EAAG,GAarF,SAASG,EAAwCC,GACtD,yDAGE,WAAYC,GAAgB,IAAD,uBACzB,cAAMA,IAHSC,WAEU,IADV5B,YACU,EAGzB,IAEE6B,EAAI,eACJD,EAAQF,EAAKC,GACb3B,EAAuB,GAPA,OASzB8B,OAAOC,KAAKH,GAAOP,SAAQ,SAAAW,GACzB,GAAU,WAANA,GAAwB,YAANA,GAAyB,SAANA,GAAsB,WAANA,EAAzD,CACA,IAAMC,EAAKL,EAAcI,GACrBpB,EAAMqB,IAAIjC,EAAOM,KAAKL,EAAGgC,GAAG,SAAAC,GAAC,OAAIL,EAAKM,SAAS,YAGrD,EAAKP,MAAQA,EACb,EAAK5B,OAASA,EACd,EAAKoC,MAAQ,GAjBY,EAH7B,gEAuBQC,KAAKT,MAAMU,MAAMD,KAAKT,MAAMU,SAvBpC,2CA0BQD,KAAKT,MAAMW,QAAQF,KAAKT,MAAMW,WA1BtC,6CA6BQF,KAAKT,MAAMxB,SAASiC,KAAKT,MAAMxB,UADd,oBAELiC,KAAKrC,QAFA,IAErB,oCAA+BI,WAFV,iCA5BzB,+BAiCI,OAAOiC,KAAKT,MAAMY,aAjCtB,GAAqBC,aA4JvB,IAufYC,EAGAC,EA1fRC,EAAO,EAETC,EAAM,8BAAYD,IAClBE,EAAS,SAACC,GACR,MAAK,cAAcC,KAAKD,GACjBE,SAASF,EAAG,IADgBG,KAGrCC,EAAS,SAACJ,GACR,IAAMzB,EAAIwB,EAAOC,GACjB,OAAOK,MAAM9B,IAAMA,EAAI,EAAI4B,IAAM5B,GAOnC+B,EAAS,SAAeC,GAAf,MACU,kBAATA,EACJC,EAAaD,GACZE,EAAOF,GACNA,EAAKG,OACLH,GAQRC,EAAe,SAACD,GACd,GAAa,KAATA,EAAa,OAAOA,EADO,MAJpB,SAACI,GACZ,IAAMpC,EAAIoC,EAAEnC,QAAQ,KACpB,OAAQD,EAAI,EAAK,CAACoC,EAAEC,UAAU,EAAGrC,GAAIoC,EAAEC,UAAUrC,EAAI,IAAM,CAAC,GAAIoC,GAIjDE,CAAWN,GAFK,mBAExB9C,EAFwB,KAErBkD,EAFqB,KAG/B,OAAQlD,GACN,IAAK,OACH,IACE,OAAOqD,KAAKC,MAAMJ,GAClB,MAAOK,GACPC,QAAQC,MAAMF,GAEhB,MACF,IAAK,OACH,IAAK,IAAD,EACqBF,KAAKC,MAAMJ,GADhC,mBACKQ,EADL,KACaC,EADb,KAEF,IAAKC,MAAMC,QAAQH,GAAS,OAAOZ,EACnC,IAAKc,MAAMC,QAAQF,GAAO,OAAOb,EACjC,IAJE,EAIIgB,EAAIJ,EAAOrE,OACX0E,EAAc,GALlB,cAMcJ,GANd,IAMF,2BAAsB,CAAC,IAAZK,EAAW,QACpB,GAAKJ,MAAMC,QAAQG,IACfA,EAAE3E,SAAWyE,EAAjB,CAEA,IADA,IAAMG,EAAW,GACRC,EAAI,EAAGA,EAAIJ,EAAGI,IAAK,CAC1B,IAAMxE,EAAIgE,EAAOQ,GAAIzC,EAAIuC,EAAEE,GAC3BD,EAAIvE,GAAK+B,EAEXsC,EAAKjE,KAAKmE,KAdV,8BAgBF,OAAOF,EACP,MAAOR,GACPC,QAAQC,MAAMF,GAEhB,MACF,IAAK,OACH,IAAK,IAAD,EACwBF,KAAKC,MAAMJ,GADnC,mBACKQ,EADL,KACaS,EADb,KAEF,IAAKP,MAAMC,QAAQH,GAAS,OAAOZ,EACnC,IAAKc,MAAMC,QAAQM,GAAU,OAAOrB,EACpC,IAAMgB,EAAIJ,EAAOrE,OACjB,GAAI8E,EAAQ9E,SAAWyE,EAAG,OAAOhB,EACjC,GAAuB,IAAnBqB,EAAQ9E,OAAc,OAAOyD,EAGjC,IAFA,IAAMsB,EAAID,EAAQ,GAAG9E,OACf0E,EAAO,IAAIH,MAAWQ,GACnBtD,EAAI,EAAGA,EAAIsD,EAAGtD,IAAK,CAE1B,IADA,IAAMmD,EAAW,GACRC,EAAI,EAAGA,EAAIJ,EAAGI,IAAK,CAC1B,IAAMxE,EAAIgE,EAAOQ,GAAIzC,EAAI0C,EAAQD,GAAGpD,GACpCmD,EAAIvE,GAAK+B,EAEXsC,EAAKjD,GAAKmD,EAEZ,OAAOF,EACP,MAAOR,GACPC,QAAQC,MAAMF,IAIpB,OAAOT,GAeTuB,EAAQ,SAACjF,GAEP,GAAU,OAANA,QAAoBE,IAANF,EAAiB,OAAO,EAC1C,cAAeA,GACb,IAAK,SACL,IAAK,SACL,IAAK,UACH,OAAO,EACT,QACE,GAAIwE,MAAMC,QAAQzE,GAAI,OAAO,EAEjC,OAAO,GAETkF,EAAQ,SAAClF,GAAD,OAA2B,MAALA,IAA2B,IAAdA,EAAEmF,SAC7CvB,EAAS,SAAC5D,GAAD,OAAuBkF,EAAMlF,IACtCoF,EAAQ,SAACpF,GAAD,OAA2B,MAALA,IAA2B,IAAdA,EAAEqF,SAM7CC,EAAU,SAAChB,GACT,IACEU,EAAIV,EAAOrE,OACXsF,EARW,SAACjE,GAEd,IADA,IAAMiE,EAAa,GACV7D,EAAI,EAAGsD,EAAI1D,EAAGrB,OAAQyB,EAAIsD,EAAGtD,IAAK6D,EAAEjE,EAAGI,IAAMA,EACtD,OAAO6D,EAKDC,CAAalB,GAUnB,MAAO,CAAEhE,EAAGgE,EAAQiB,IAAGE,MATb,SAACzF,GACP,OAAIwE,MAAMC,QAAQzE,IAAMA,EAAEC,SAAW+E,EAAUhF,EACxC,MAOmB0F,KALrB,SAACC,GAEN,IADA,IAAMf,EAAS,GACNlD,EAAI,EAAGA,EAAIsD,EAAGtD,IAAKkD,EAAEN,EAAO5C,IAAMiE,EAAIjE,GAC/C,OAAOkD,KAIbgB,EAAS,SAAChF,EAAQ+E,GAmBhB,MAAO,CAAEN,SAAS,EAAMQ,IAjBhB,SAACvF,GACL,GAAW,MAAPqF,EAAa,CACf,IAAIjE,EAAId,EAAE2E,EAAEjF,GACZ,GAAS,MAALoB,GAAaA,GAAK,GAAKA,EAAIiE,EAAI1F,OAAQ,OAAO0F,EAAIjE,GAEtD,GADAA,EAAIwB,EAAO5C,IACNkD,MAAM9B,IAAMA,GAAK,GAAKA,EAAIiE,EAAI1F,OAAQ,OAAO0F,EAAIjE,GAExD,OAAO,MAUkBoE,IARrB,SAACxF,EAAM+B,GACX,GAAW,MAAPsD,EAAa,CACf,IAAIjE,EAAId,EAAE2E,EAAEjF,GACH,MAALoB,GAAaA,GAAK,GAAKA,EAAIiE,EAAI1F,SAAQ0F,EAAIjE,GAAKW,GACpDX,EAAIwB,EAAO5C,IACNkD,MAAM9B,IAAMA,GAAK,GAAKA,EAAIiE,EAAI1F,SAAQ0F,EAAIjE,GAAKW,OAK5D0D,EAAY,SAACnF,EAAQoF,GACnB,IACEhB,EAAIgB,EAAK/F,OAQTgG,EAAO,SAACvE,EAAMW,GACZ,GAAIX,GAAK,GAAKA,EAAIsD,EAChB,GAAU,OAAN3C,EACF2D,EAAKtE,GAAK,SACL,CACL,IAAMiE,EAAM/E,EAAE6E,MAAMpD,GAChBsD,IAAKK,EAAKtE,GAAKiE,KASzBO,EAAO,SAACxE,GACN,GAAIA,GAAK,GAAKA,EAAIsD,EAAG,CACnB,IAAMW,EAAMK,EAAKtE,GACjB,GAAIiE,EAAK,OAAOC,EAAOhF,EAAG+E,GAE5B,OAAO,MAOX,MAAO,CAAER,SAAS,EAAMH,IAAGmB,IAlCnB,SAAC7E,GACL,GAAIkD,MAAMC,QAAQnD,IAAOA,EAAGrB,SAAW+E,EAAG,IAAK,IAAItD,EAAI,EAAGA,EAAIsD,EAAGtD,IAAKuE,EAAKvE,EAAGJ,EAAGI,KAiCrDoE,IA/BxB,SAAC1D,EAAMC,GACX,IAAMX,EAAIwB,EAAOd,GACZoB,MAAM9B,IAAIuE,EAAKvE,EAAGW,IA6BU4D,OAAMJ,IAjBnC,SAACzD,GACL,IAAMV,EAAIwB,EAAOd,GACjB,OAAKoB,MAAM9B,GACJ,KADewE,EAAKxE,IAeiBwE,OAAMrC,KAL7C,WACL,IAD2B,EACrBvC,EAAqB,GADA,cAET0E,GAFS,IAE3B,gCAAWL,EAAX,QAAwBrE,EAAGZ,KAAKiF,EAAM/E,EAAE8E,KAAKC,GAAO,OAFzB,8BAG3B,OAAOrE,KAIb8E,EAAY,SAACxF,EAAQoF,EAAsBtE,GACzC,IACEsD,EAAIgB,EAAK/F,OACToG,EAAIN,EAAUnF,EAAGoF,GAKjBF,EAAM,SAACQ,EAAOjE,GACZgE,EAAEJ,KAAKvE,EAAGW,KACVX,GACSsD,IAAGtD,EAAI,IAcpB,MAAO,CAAEyD,SAAS,EAAMgB,IApBhB,SAAC7E,GACL,GAAIkD,MAAMC,QAAQnD,GAAlB,qBAAuCA,GAAvC,IAAuB,gCAAWtB,EAAX,QAAoB8F,EAFvC,GAEgD9F,IAApD,iCAmByB8F,MAAKD,IAZ1B,SAACS,GACL,OAAOD,EAAEH,KAAKxE,IAWqBmC,KAT9B,WAEL,IADA,IAAMvC,EAAY,GACTwD,EAAIpD,EAAGU,EAAI,EAAGA,EAAI4C,EAAGF,IAAK1C,IAAK,CAClC0C,GAAKE,IAAGF,EAAI,GAChB,IAAMa,EAAMK,EAAKlB,GACba,GAAKrE,EAAGZ,KAAKE,EAAE8E,KAAKC,IAE1B,OAAOrE,KAmCbiF,EAAU,SAACvB,GAET,IADA,IAAM1D,EAAK,IAAIkD,MAAkBQ,GACxBtD,EAAI,EAAGA,EAAIsD,EAAGtD,IAAKJ,EAAGI,GAAK,KACpC,OAAOJ,GAETkF,EAAa,SAACH,GACZ,IAAMzF,EAAI0E,EAAQe,EAAE/F,GACpB,OAAO+F,EAAEvC,GAAKuC,EAAEvC,EAAE7D,OACdmG,EAAUxF,EAAGyF,EAAEvC,EAAGuC,EAAE3E,GACpB0E,EAAUxF,EAAG2F,EAAQF,EAAErB,GAAK,EAAI,GAAKqB,EAAErB,GAAI,IAEjDyB,EAAa,SAACJ,GACZ,IAAMzF,EAAI0E,EAAQe,EAAE/F,GACpB,OAAOyF,EAAUnF,EAAGyF,EAAEvC,GAAKuC,EAAEvC,EAAE7D,OAASoG,EAAEvC,EAAIyC,EAAQF,EAAErB,GAAK,EAAI,GAAKqB,EAAErB,KAE1E0B,EAAa,SAACL,GAEZ,OAhDU,SAACzF,EAAQoF,GA6BnB,MAAO,CAAEb,SAAS,EAAMgB,IA3BhB,SAAC7E,GACL,IAAMqF,EAAgB,GACtB,IAAK,IAAMvE,KAAKd,EAAI,CAClB,IAAMtB,EAAIsB,EAAGc,GAAIuD,EAAM/E,EAAE6E,MAAMzF,GAC3B2F,IAAKgB,EAAGvE,GAAKuD,GAEnBK,EAAOW,GAqBkBb,IAnBrB,SAAC1D,EAAMC,GACX,GAAU,OAANA,SACK2D,EAAK5D,OACP,CACL,IAAMuD,EAAM/E,EAAE6E,MAAMpD,GAChBsD,IAAKK,EAAK5D,GAAKuD,KAcSE,IAX1B,SAACzD,GACL,IAAMuD,EAAMK,EAAK5D,GACjB,OAAOuD,EAAMC,EAAOhF,EAAG+E,GAAO,MASK9B,KAP9B,WACL,IAAM1B,EA7JH,SAAe2B,GACtB,IAAMvD,EAAS,GACf,IAAK,IAAM6B,KAAK0B,EAAGvD,EAAEG,KAAK0B,GAC1B,OAAO7B,EA0JUqG,CAAOZ,GACpB7D,EAAK0E,OACL,IAHkB,EAGZvF,EAAY,GAHA,cAIFa,GAJE,IAIlB,gCAAWC,EAAX,QAAsBd,EAAGZ,KAAKE,EAAE8E,KAAKM,EAAK5D,MAJxB,8BAKlB,OAAOd,IAqBJwF,CADGxB,EAAQe,EAAE/F,GACA+F,EAAEvC,GAAK,KAE7BiD,EAAU,SAACV,GACT,OAAIA,EAAEW,EAAUR,EAAWH,EAAEW,GACzBX,EAAE/F,EAAUmG,EAAWJ,EAAE/F,GACzB+F,EAAEd,EAAUmB,EAAWL,EAAEd,GACtB,MAET0B,GAAW,SAACC,EAAQF,GAClB,IACEtD,EAAkB,GAClByD,EAAWpH,IAeX+F,EAAM,SAACsB,EAAS/E,GACd,OAAQ+E,EAAGnH,QACT,KAAK,EACH,OACF,KAAK,EAED,IAAMoH,EAAID,EAAG,GAAIf,EAAI3C,EAAK2D,GAC1B,OAAIhB,GAAKnB,EAAMmB,QACbA,EAAEF,IAAI9D,QAGC,MAALA,SAAkBqB,EAAK2D,GAAS3D,EAAK2D,GAAKhF,GAGlD,QAEI,IADF,EACMrC,EAAS0D,EACP2D,EAAID,EAAGA,EAAGnH,OAAS,GAF3B,cAGkBmH,EAAGjG,MAAM,EAAGiG,EAAGnH,OAAS,IAH1C,IAGE,gCAAWmC,EAAX,QAA4CpC,EAAIsH,GAAKtH,EAAGoC,IAH1D,8BAKE,YADAmF,GAAKvH,EAAGqH,EAAGhF,KAMrB,OAvCS,SAAC2E,GAAc,IACZlD,EAASkD,EAATlD,EAAGuC,EAAMW,EAANX,EACX,IAAK,IAAIjE,KAAK0B,EAAG,CACf,IAAIzB,EAAIyB,EAAE1B,GACV,GAAIiE,GAAKjE,EAAEnC,OAAS,GAAc,MAATmC,EAAE,GAAY,CACrC,IAAMoF,EAAMT,EAAQV,EAAEhE,IAClBmF,IACFpF,EAAIA,EAAEqF,OAAO,GACbpF,EAAImF,GAGR1B,EAAI,CAAC1D,GAAIC,IA2BfP,CAAKkF,GACE,CAAEU,GAAIzE,IAAO0E,KAAMT,EAAK1E,MAAOkB,EAAMkE,QAAST,EAAUrB,QAEjEyB,GAAO,SAACvH,EAAQoC,EAAMC,GACpB,GAAS,MAALrC,EACJ,GAAIkF,EAAMlF,GAAIA,EAAE8F,IAAI1D,EAAGC,QAClB,GAAI+C,EAAMpF,GAAIA,EAAE8F,IAAI1D,EAAGC,QACvB,GAAI4C,EAAMjF,GACJ,MAALqC,SAAkBrC,EAAEoC,GAASpC,EAAEoC,GAAKC,OACnC,GAAImC,MAAMC,QAAQzE,GAAI,CAC3B,IAAM0B,EAAIwB,EAAOd,IACZoB,MAAM9B,IAAMA,GAAK,GAAKA,EAAI1B,EAAEC,SAAQD,EAAE0B,GAAKW,KAGpDiF,GAAO,SAACtH,EAAQoC,GACd,GAAS,MAALpC,EAAW,OAAO,KACtB,GAAIkF,EAAMlF,GAAI,OAAOA,EAAE6F,IAAIzD,GAC3B,GAAIgD,EAAMpF,GAAI,OAAOA,EAAE6F,IAAIzD,GAC3B,GAAI6C,EAAMjF,GAAI,OAAOA,EAAEoC,GACvB,GAAIoC,MAAMC,QAAQzE,GAAI,CACpB,IAAM0B,EAAIwB,EAAOd,GACjB,IAAKoB,MAAM9B,IAAMA,GAAK,GAAKA,EAAI1B,EAAEC,OAAQ,OAAOD,EAAE0B,GAEpD,OAAO,MAETmG,GAAU,WACR,IAAIC,GAAQ,EAAOC,EAAmB,GAGpCb,EAAMjE,IACN+E,EAAiB,GACjBb,EAAWpH,IAkCb,MAAO,CAAEmH,MAAKU,QAAST,EAAUc,IAjCzB,SAAC7F,EAAM8F,GACXF,EAAM5F,GAAK8F,EACXJ,GAAQ,GA+B0BjC,IA7B9B,SAACzD,GAAD,OAAyB4F,EAAM5F,IA6BI0D,IA1BnC,SAAC1D,EAAMC,GACX,IAAM+E,EAAKhF,EAAE+F,MAAM,QACnB,GAAkB,IAAdf,EAAGnH,OAGL,cAFO+H,EAAM5F,QACb0F,GAAQ,GAGV,IAAMd,EAAIgB,EAAMZ,EAAG,IACfJ,IACFA,EAAElB,IAAIsB,EAAGjG,MAAM,GAAIkB,GACnB0F,EAAQX,EAAG,KAAM,IAgByBvD,KA5BvC,kBAxQA,SAAeC,GACxB,IAAMvD,EAAS,GACf,IAAK,IAAM6B,KAAK0B,EAAGvD,EAAEG,KAAKoD,EAAE1B,IAC5B,OAAO7B,EAqQa6H,CAASJ,IA4ByBK,KA3B7C,SAACjG,GAAD,cAAiB4F,EAAM5F,IA2B4BkG,KAbnD,WACL,GAAIR,EACFX,GAAS,QAET,IAAK,IAAM/E,KAAK2F,EAAS,CACvB,IAAMf,EAAIgB,EAAM5F,GACZ4E,GAAGA,EAAEY,SAAQ,GAGrBE,GAAQ,EACRC,EAAU,MAKhBQ,GAAO,SAAC,GAAwB,IAAtBvB,EAAqB,EAArBA,EACFwB,EAAOX,KACb,IAAK,IAAMzF,KAAK4E,EAAGwB,EAAKP,IAAI7F,EAAG6E,GAAS7E,EAAG4E,EAAE5E,KAC7C,OAAOoG,GAETC,GAAO,SAACD,EAAYE,GAA6B,IAAD,gBAC7BA,GAD6B,IAC9C,2BAAsB,CAAC,IAAZC,EAAW,QAChBA,EAAGvG,GAAKuG,EAAGvG,EAAEnC,OAAS,EACpB0I,EAAG3B,EACLwB,EAAK1C,IAAI6C,EAAGvG,EAAGoE,EAAWmC,EAAG3B,IACpB2B,EAAGrI,EACZkI,EAAK1C,IAAI6C,EAAGvG,EAAGqE,EAAWkC,EAAGrI,IACpBqI,EAAGpD,EACZiD,EAAK1C,IAAI6C,EAAGvG,EAAGsE,EAAWiC,EAAGpD,IACpBoD,EAAG7E,EACZ0E,EAAKP,IAAIU,EAAGvG,EAAG6E,GAAS0B,EAAGvG,EAAG,CAAE0B,EAAG6E,EAAG7E,EAAGuC,EAAGsC,EAAGtC,GAAK,MAEpDmC,EAAK1C,IAAI6C,EAAGvG,EAAGuG,EAAGtG,GAGpBmG,EAAOX,MAfmC,8BAmB9C,OADIW,GAAMA,EAAKF,OACRE,GAiCTI,GAAS,sCAAIzG,EAAJ,yBAAIA,EAAJ,uBAAqBA,EAAK0G,KAAK,MACxCC,GAAW,SAACvI,GACV,IAAK,IAAM6B,KAAK7B,SAAUA,EAAE6B,IAGnB2G,GAAS,CACpBC,KAAM7J,OAAOC,SAAS6J,SACtBhI,KAAM,GACNiI,OAAQ,GACRC,aAAcpJ,GAAK,GACnBqJ,MAAOrJ,GAAI,GACXsJ,OAAQ,KACRC,QAASvJ,EAAI,MACbyI,KAAM,SAACQ,GACLA,EAAOA,GAAQD,GAAGC,KAClB,IACEO,EAAiB,GAiBnB,MAAO,CAAE1D,IAVD,SAACqB,GAAD,OANA,SAANsC,EAAOpH,GAIL,MAAO,CAAEyD,IAFD,SAACqB,GAAD,OAAiBsC,EAAI,GAAD,OAAIpH,EAAJ,YAAS8E,KAEvBpB,IADN,SAACoB,EAAQuC,GAAT,OAAwBF,EAAQ7I,KAAK,CAAE0B,EAAGwG,GAAOxG,EAAG8E,GAAM7E,EAAGoH,MAGrDD,CAAItC,IAUVpB,IATN,SAACoB,EAAQuC,GAAT,OAAwBF,EAAQ7I,KAAK,CAAE0B,EAAGwG,GAAO1B,GAAM7E,EAAGoH,KAS/CC,IARX,SAACxC,GAAD,OAAYqC,EAAQ7I,KAAK,CAAE0B,EAAG8E,KAQdmB,KAPf,kBAAMkB,EAAQ7I,KAAK,KAOE4H,KANrB,WACL,IAAMqB,EAAOZ,GAAGM,OAChB,GAAKM,EAAL,CACA,IAAMC,EAAa,CAAE9F,EAAGyF,GACxBI,EAAKE,KAAL,YAAeb,EAAf,YAAuB/E,KAAK6F,UAAUF,SAI5CtB,KAAM,WACJ,IAAMqB,EAAOZ,GAAGM,OAChB,GAAKM,EAAL,CACA,IAAM1I,EAAe,eAAQ8H,GAAG9H,MAChC6H,GAASC,GAAG9H,MACRiB,OAAOC,KAAK4G,GAAGG,QAAQjJ,SACzBgB,EAAK,IAAL,eAAgB8H,GAAGG,QACnBJ,GAASC,GAAGG,SAEdS,EAAKE,KAAL,YAAed,GAAGC,KAAlB,YAA0B/E,KAAK6F,UAAU7I,KACzC8H,GAAGK,OAAM,MAIb/I,EAAG0I,GAAGI,cAAc,SAAAvE,GAGlB,KAAIA,EAAI,GAAR,CACA,IAAM+E,EAAOZ,GAAGM,OACZM,GAAMA,EAAKI,Y,SAGLjH,O,qBAAAA,I,eAAAA,I,kBAAAA,M,cAGAC,O,eAAAA,I,eAAAA,I,cAAAA,M,KAKZ,IAAIiH,GAAU,EAAGC,GAA2B,KA+D/BC,GAAU,SAAClB,EAASmB,GAAV,OAvDT,SAAZC,EAAaC,EAAYF,GACvB,IAAMG,EAAQ,kBAAMF,EAAUC,EAASF,IACjCR,EAAO,IAAIY,UAAUF,GAC3BV,EAAKa,OAAS,WACZzB,GAAGM,OAASM,EACZQ,EAAO,CAAEvJ,EAAGkC,EAAc2H,QAAS/K,KAAMqD,EAAgB2H,KAAMC,QAAS,cACxEX,GAAU,EACV,IAAMY,EAAOzL,OAAOC,SAASwL,KAC7BjB,EAAKE,KAAL,YAAed,GAAGC,KAAlB,YAA6C,MAAnB4B,EAAKC,OAAO,GAAaD,EAAKnD,OAAO,GAAKmD,KAEtEjB,EAAKmB,QAAU,WAEO,IADA/B,GAAGI,iBAKvBJ,GAAGM,OAAS,MACZW,IAAW,GACG,KAAIA,GAAU,IAC5BG,EAAO,CAAEvJ,EAAGkC,EAAc2H,QAAS/K,KAAMqD,EAAgBgI,KAAMJ,QAAQ,gCAAD,OAAkCX,GAAlC,iBACtEgB,WAAWV,EAAiB,IAAVN,MAEpBL,EAAKsB,UAAY,SAAU9G,GACzB,GAAKA,EAAET,MACFS,EAAET,KAAKzD,OAAZ,CACA8I,GAAGK,OAAM,GAHmB,oBAITjF,EAAET,KAAKyE,MAAM,OAJJ,IAI5B,2BAAuC,CAAC,IAA7B+C,EAA4B,QACrC,IACE,IAAMC,EAAMlH,KAAKC,MAAMgH,GACvB,GAAIC,EAAIrH,EAAG,CACT,IAAM0E,EAAOC,GAAKwB,IAAepC,KAAWsD,EAAIrH,GAC5CmG,KAAgBzB,IAClByB,GAAczB,EACVA,GAAM2B,EAAO,CAAEvJ,EAAGkC,EAAcsI,KAAM5C,KAAMA,UAEzC2C,EAAI9D,GACb4C,GAAc1B,GAAK4C,EAAI9D,GACvB8C,EAAO,CAAEvJ,EAAGkC,EAAcsI,KAAM5C,KAAMyB,MAC7BkB,EAAIhH,EACbgG,EAAO,CAAEvJ,EAAGkC,EAAc2H,QAAS/K,KAAMqD,EAAgBsI,IAAKV,QAASQ,EAAIhH,IAClEgH,EAAIvG,GACbuF,EAAO,CAAEvJ,EAAGkC,EAAcwI,QAE5B,MAAOC,GACPnH,QAAQC,MAAMkH,GACdpB,EAAO,CAAEvJ,EAAGkC,EAAc2H,QAAS/K,KAAMqD,EAAgBsI,IAAKV,QAAQ,UAAD,OAAYY,OAvBzD,iCA2B9B5B,EAAK6B,QAAU,SAAUrH,GACvB4E,GAAGK,OAAM,GACThF,QAAQC,MAAM,qCAAsCF,IAIDiG,CA7DrC,SAACpB,GACjB,IACEyC,EAAItM,OAAOC,SAEb,OADqB,WAAfqM,EAAEC,SAAwB,MAAQ,MAC7B,MAAQD,EAAEE,KAAO3C,EAyDmC4C,CAAgB5C,GAAOmB,ICh1BxF3L,GAAMC,YAAW,CACfoN,KAAM,CACJC,SAAU,WACVC,IAAK,EAAGC,MAAO,EACfC,MAAO,CACL,mBAAoB,CAClBtN,MAAO,GAAIuN,OAAQ,GACnBC,QAAS,KAIfC,KAAM,CACJC,WAAY,QAEdC,OAAQ,CACNC,UAAW,aACXC,OAAQ,UACRC,QAAS,GACTR,MAAO,CACL,UAAW,CACTQ,QAAS,OAOjBC,GAAoB,SAApBA,EAAqB1F,GAUnB,MAAO,CACLE,IAAKF,EAAEW,KACPgF,KAAM3F,EAAE4F,OAAS5F,EAAEW,MAAQ,WAC3BkF,UAAW7F,EAAEoF,KAAO,CAAEU,SAAU9F,EAAEoF,WAASlM,EAC3C6M,MAAO/F,EAAEgG,cAAW9M,EACpB+M,aAAcjG,EAAEkG,MAAQ,CAAEA,MAAOlG,EAAEkG,MAAM1L,IAAIkL,SAAuBxM,EACpEiN,QAdU,WAAO,IAAD,IACVnG,EAAEW,KAAKyF,WAAW,KACpBjO,OAAOC,SAASwL,KAAO5D,EAAEW,KAAKF,OAAO,IAGvCsB,GAAG9H,KAAK+F,EAAEW,MAAV,oBAAkBX,EAAEyC,aAApB,QAA6BzC,EAAEtD,YAA/B,SACAqF,GAAGT,WAaT+E,GAAWxL,GAAK,YAAyF,IAAtFyL,EAAqF,EAArFA,SAAU3F,EAA2E,EAA3EA,KAAMR,EAAqE,EAArEA,SAE/BmF,EAASzJ,cACT0K,EAAUxN,GAAI,GACdyN,EAAO,kBAAMD,GAAQ,IACrBE,EAAO,kBAAMF,GAAQ,IAcvB,MAAO,CAAE3K,OAbE,WACP,IACE8K,EAASH,IACTL,EAAQI,EAAS9L,IAAIkL,IACvB,OACE,uBAAKnN,UAAWf,GAAIqN,KAAM8B,YAAWhG,GACnC,uBAAKpI,UAAWf,GAAI8N,OAAQ9C,IAAK8C,EAAQa,QAASK,GAChD,gBAACI,EAAA,EAAD,CAAMrO,UAAWf,GAAI4N,KAAMU,SAAS,kBAEtC,gBAACe,EAAA,EAAD,CAAgBvB,OAAQA,EAAQY,MAAOA,EAAOQ,OAAQA,EAAQI,YAAaL,EAAMM,UAAWN,MAInFtG,WAAUoG,c,wCCtEzBS,GAAYC,eACLC,GAAOC,aAAW,CAC7BC,OAAQC,UAAUC,SAClBC,SAAU,GAKVC,QAAS,cACRR,IAmBDS,GAAa,SAACtL,GAAD,MAAa,QAAQC,KAAKD,IAEzCuL,KAAWC,eAAe,QAAQ,SAACtM,EAAD,GAAkC,IAAjBuM,EAAgB,EAAtBhE,KAErChK,GADNgO,EAlBW,SAACrO,GACV,IAFc4C,EAERkD,EAAS,GACf,IAAK,IAAMjE,KAAK7B,EAAG,CACjB,IAAM8B,EAAI9B,EAAE6B,GACZiE,GALYlD,EAKGf,EALSe,EAAE0L,QAAQ,UAAU,SAAAtJ,GAAC,OAAIA,EAAE,GAAGuJ,mBAM7C,SAANzM,GAES,UAANA,IAEE,QAAQe,KAAKf,GACXgB,SAAShB,EAAG,IACZA,GAEZ,OAAOgE,EAKF0I,CAASH,IACDlP,KACf,MAAa,SAANkB,EACHsN,GAAKc,WAAW3M,EAAGuM,GACb,SAANhO,EACEsN,GAAKe,WAAW5M,EAAGuM,GACb,WAANhO,GAA+B,kBAANyB,EACvB6L,GAAKgB,aAAa7M,EAAGuM,GACrBvM,KAKH,IACL8M,GAAe,SAAC7O,GAAD,MAA4B,kBAANA,GAAkBA,EAAEL,OAAS,GAAqB,MAAhBK,EAAEuK,OAAO,IAA8B,MAAhBvK,EAAEuK,OAAO,IACvGuE,GAAc,SAACjM,GACb,IAAKgM,GAAahM,GAAI,OAAO,KAM7B,GAHAA,EAAIA,EAAEsE,OAAO,GAGTgH,GAAWtL,GAAI,MAAO,CAACA,OAAGjD,GAG9B,IAAMmP,EAAalM,EAAEsC,MAAM,wBAC3B,GAAI4J,EAAY,MAAO,CAACA,EAAW,GAAIC,GAAQnM,IAG/C,IAAMoM,EAAOpM,EAAEsC,MAAM,gBACrB,OAAI8J,EAAa,CAACA,EAAK,QAAIrP,GAEpB,MAEToP,GAAU,SAACnM,GAAD,OAAeuL,KAAWY,QAAQnM,IAC5CqM,GAAS,SAACrM,EAAMO,GACV+K,GAAWtL,KAAIA,EAAI,KAAOA,EAAI,MAClC,IAAMvC,EAAI0O,GAAQnM,GAClB,OAAOvC,EAAIA,EAAE8C,GAAQP,GC/BvBsM,GAAK,SAACzP,GAAD,gBAAaA,EAAb,OACL0P,GAAK,SAAC1P,GAAD,gBAAaA,EAAb,MACL2P,GAAM,SAAC3P,GAAD,gBAAaA,EAAb,QACN4P,GAAO,sCAAIC,EAAJ,yBAAIA,EAAJ,uBAAwBA,EAAMhH,KAAK,MAE1CiH,GAAS,SAACC,EAAcC,GAAf,gBAAoCD,EAApC,oBAAyDC,IAIlE7D,IADW2D,GAAO,EAAG,WACX,sCAAIlP,EAAJ,yBAAIA,EAAJ,uBAAeA,EAAEY,IAAIiO,IAAI5G,KAAK,OAExCoH,GAAS9D,GACT+D,GAAO,SAACtL,EAAMuL,EAAM9J,EAAM9F,GAAnB,qBAAoCqE,EAApC,YAAyCuL,EAAzC,YAA8C9J,EAA9C,YAAmD9F,EAAE6P,QAAQ,GAA7D,MAGPC,GAAe,WAA0C,IAAzCC,IAAwC,yDACtD,OAAIA,EAAgB,GACb,CAAEzR,QAAS,SAIpB0R,GAAa,CAAE3L,EAAG,EAAGuL,EAAG,EAAG9J,EAAG,GAK9BmK,GAAY,SAACC,EAAkBlQ,GAA2B,IAAD,EAJnD,SAACmQ,GACL,IAAM1Q,EAAI,4CAA4CyI,KAAKiI,GAC3D,OAAO1Q,EAAI,CAAE4E,EAAGvB,SAASrD,EAAE,GAAI,IAAKmQ,EAAG9M,SAASrD,EAAE,GAAI,IAAKqG,EAAGhD,SAASrD,EAAE,GAAI,KAAQuQ,GAIrEI,CAAIF,EAAQ9D,MAAxB/H,EAFmD,EAEnDA,EAAGuL,EAFgD,EAEhDA,EAAG9J,EAF6C,EAE7CA,EACRuK,EAAe,CACbC,MAAOX,GAAKtL,EAAGuL,EAAG9J,EAAG,KACrByK,MAAOZ,GAAKtL,EAAGuL,EAAG9J,EAAG9F,GAAK,IAC1BwQ,MAAOb,GAAKtL,EAAGuL,EAAG9J,EAAG9F,GAAK,IAC1ByQ,MAAOd,GAAKtL,EAAGuL,EAAG9J,EAAG9F,GAAK,IAC1B0Q,MAAOf,GAAKtL,EAAGuL,EAAG9J,EAAG9F,GAAK,IAC1B2Q,MAAOhB,GAAKtL,EAAGuL,EAAG9J,EAAG9F,GAAK,IAC1B4Q,MAAOjB,GAAKtL,EAAGuL,EAAG9J,EAAG9F,GAAK,IAC1B6Q,MAAOlB,GAAKtL,EAAGuL,EAAG9J,EAAG9F,GAAK,IAC1B8Q,MAAOnB,GAAKtL,EAAGuL,EAAG9J,EAAG9F,GAAK,IAC1B+Q,MAAOpB,GAAKtL,EAAGuL,EAAG9J,EAAG9F,GAAK,KAE9B,OAAO,2BAAKkQ,GAAYG,IAE1BW,GAAgB,CACdC,IAAK,UACLC,KAAM,UACNC,OAAQ,UACRC,OAAQ,UACRC,OAAQ,UACRC,KAAM,UACNC,MAAO,UACPC,KAAM,UACNC,KAAM,UACNC,KAAM,UACNC,MAAO,UACPC,KAAM,UACNC,OAAQ,UACRC,MAAO,UACPC,OAAQ,UACRC,UAAW,UACXC,MAAO,UACPC,KAAM,WAERC,GAAkC,CAChCC,MAAOnC,GAAU,2BACZe,IADW,IAEd5E,KAAM,UACNzE,KAAM,UACNM,KAAM,YACL,IACHoK,KAAMpC,GAAU,2BACXe,IADU,IAEb5E,KAAM,UACNzE,KAAM,UACNM,KAAM,YACL,GACHqK,KAAMrC,GAAU,2BACXe,IADU,IAEb5E,KAAM,UACNzE,KAAM,UACNM,KAAM,YACL,IA6BLsK,GAAgD,GAzBhC,CACd,CAAC,EAAG,MACJ,CAAC,EAAG,MACJ,CAAC,EAAG,MACJ,CAAC,EAAG,MACJ,CAAC,GAAI,KACL,CAAC,GAAI,MACL,CAAC,GAAI,GACL,CAAC,IAAK,OACN,CAAC,IAAK,MACN,CAAC,IAAK,MACN,CAAC,IAAK,MACN,CAAC,IAAK,MACN,CAAC,IAAK,MACN,CAAC,IAAK,MACN,CAAC,IAAK,MACN,CAAC,IAAK,MACN,CAAC,IAAK,MACN,CAAC,IAAK,OASIrR,SAAQ,mCAAEsR,EAAF,KAAQC,EAAR,YAAsBF,GAAWC,GAPtC,SAACA,EAASC,GAAV,MAA2B,CACxCC,SAAUF,EAAO,KACjBG,cAAeF,EAAW,KAC1BG,WAAYC,KAAKC,MAAM,IAAMN,GAAQ,MAIsBO,CAAaP,EAAMC,MAGlF,IC5IYO,GD6IVC,GAAkB,CAChBC,GAAIX,GAAW,GACfY,GAAIZ,GAAW,GACfa,GAAIb,GAAW,GACfc,GAAId,GAAW,GACfe,IAAKf,GAAW,IAChBgB,IAAKhB,GAAW,IAChBiB,IAAKjB,GAAW,IAChBkB,IAAKlB,GAAW,IAChBmB,IAAKnB,GAAW,IAChBoB,IAAKpB,GAAW,IAChBqB,IAAKrB,GAAW,IAChBsB,IAAKtB,GAAW,IAChBuB,IAAKvB,GAAW,IAChBwB,IAAKxB,GAAW,IAChByB,IAAKzB,GAAW,IAChB0B,IAAK1B,GAAW,IAChB2B,IAAK3B,GAAW,IAChB4B,IAAK5B,GAAW,IAChB6B,GAAI,CAAEC,WAAY,KAClBC,GAAI,CAAED,WAAY,KAClBE,GAAI,CAAEF,WAAY,KAClBG,GAAI,CAAEH,WAAY,KAClBI,GAAI,CAAEJ,WAAY,KAClBK,GAAI,CAAEL,WAAY,KAClBM,GAAI,CAAEN,WAAY,KAClBO,GAAI,CAAEP,WAAY,KAClBQ,GAAI,CAAER,WAAY,MAoDlBS,GAAsB,KAyBxBC,GAAW,kBAAaD,IAvBZ,SAAC1N,GACX,IAAM4N,EAAS7C,GAAS/K,GACtBqI,EAAQ,SAAC7M,GACP,IAAKA,EAAG,OAAOoS,EAAO9C,KACtB,GAAItP,EAAEiK,WAAW,KAAM,CACrB,IAAMpG,EAAKuO,EAAepS,EAAEsE,OAAO,IACnC,OAAOT,GAAQuO,EAAO9C,KAExB,OAAOtP,GAaX,OADAkS,GAAQ,CAAE7B,QAAM+B,SAAQC,MAVd,SAAoBC,EAAkBjT,GAC5C,IAAMW,EAAC,2BAAQsS,GAASjT,GACxB,IAAK,IAAMJ,KAAKe,EACd,GAAIf,EAAEsT,SAAS,UAAW,CACxB,IAAMrT,EAAIc,EAAEf,GACK,kBAANC,IAAgBc,EAAEf,GAAK4N,EAAM3N,IAG5C,OAAOc,GAEoB6M,SAGO2F,CAAU,UAClDlF,GAAU,CACRmF,aAAc,UACdC,gBAAiB,UACjBC,aAAc,UACdC,WAAY,UACZC,cAAe,UACfC,eAAgB,UAChBC,aAAc,UACdC,UAAW,UACXC,YAAa,UACbC,kBAAmB,UACnBC,eAAgB,UAChBC,aAAc,UACdC,qBAAsB,UACtBC,kBAAmB,UACnBC,mBAAoB,UACpBC,gBAAiB,UACjBC,iBAAkB,UAClBC,kBAAmB,UACnBC,eAAgB,UAChBC,YAAa,UACbxG,MAAO,UACPyG,MAAO,Y,SC5QCzD,O,6BAAAA,I,mBAAAA,I,mBAAAA,I,gBAAAA,Q,KAEZ,IAUEvL,GATkB,WAChB,IACEzC,EAAgE,GAGlE,MAAO,CAAE0R,SAFI,SAACtP,EAAS7F,GAAV,IAAwCoV,EAAxC,uDAA6D3D,GAAW4D,OAAxE,OAAmF5R,EAAEoC,GAAQ,CAAE7F,OAAMoV,WAE/FE,OADR,SAACzP,GAAD,OAAapC,EAAEoC,IAASpC,EAAE,MAK/B8R,GACRC,GAAa,SAACC,EAAkB7T,GAA0C,IAA9B8T,EAA6B,uDAAT,KAC9D,YAAyBtX,IAAjBqX,GAA+C,OAAjBA,EAClCpI,GAAaoI,GACX/H,GAAO+H,EAAa9P,OAAO,GAAI/D,GAC/B6T,OACgBrX,IAAjBsX,GAA+C,OAAjBA,EAC7BA,EACA,MAERC,GAAS,SAAC,GAA0F,IAAxF/T,EAAuF,EAAvFA,KAAoBrB,EAAmE,EAAjFmV,aAAyBlX,EAAwD,EAAhEkP,OAC3BxP,EAAIsX,GAAWhX,EAAGoD,EAAMrB,GAC9B,OAAa,OAANrC,EAAaA,EAAI,oCAAGA,IAE7B0X,GAAW,SAAC,GAAmC,IAAjCxP,EAAgC,EAAhCA,KACNyP,EAAM3P,GAAMoP,OAAOlP,EAAK1F,MAAMoV,MAAM9V,KAC1C,OAAO,kBAAC6V,EAAQzP,IAElB2P,GAAS,SAAC,GAAqE,IAAnED,EAAkE,EAAlEA,KAAM7V,EAA4D,EAA5DA,MAAO2B,EAAqD,EAArDA,KACjBwJ,EAAQzJ,EAAcC,GAAMlC,KAAI,SAACoD,EAAGlD,GACxC,IAAMwG,EAAkB,CACtBP,KAAM1E,IACNT,MAAM,2BAAMiB,EAAY1B,IAAnB,IAA2B6V,OAAMlU,KAAMkB,IAC5CgD,QAAS7H,KAEX,OAAO,kBAAC,GAAD,CAAUmH,IAAKxF,EAAGwG,KAAMA,OAEjC,OAAO,oCAAGgF,IAMZ4K,GAAqB,CAAEC,KAAM,EAAGhM,IAAK,EAAGpN,MAAO,EAAGuN,OAAQ,GAgE1D8L,GA/DU,SAACC,EAAOC,EAAOC,EAAS5T,EAAS6T,GACzC,IAAIC,EAAQ,EAIV1Z,EAAQsZ,EAAKE,EAAOC,GAAOD,EAAO,GAClCjM,EAASgM,EAAK3T,EAAO6T,GAAO7T,EAAO,GA+CrC,MAAO,CACL5F,QAAOuN,SACPoM,WAhDM3Z,EAAQ,EAAIyZ,EAgDDG,YA/CXrM,EAAS,EAAIkM,EAgDnBI,UAAWP,EAAIQ,WAAYP,EAC3BQ,eAtDKT,EAAK,EAAIG,EAsDMO,gBArDfT,EAAK,EAAIE,EAsDdA,MAAKQ,MArBG,SAACzV,GACP,IAAKA,EAAG,OAAO2U,GADO,MAVZ,SAAC3U,GACX,IAAMnD,EAAImD,EAAE0V,OAAO1Q,MAAM,QACzB,OAAQnI,EAAEC,QACR,KAAK,EAAG,MAAO,CAAC,IAAK,IAAKkD,EAAGA,GAC7B,KAAK,EAAG,MAAM,CAAE,IAAK,KAAb,mBAAqBnD,IAC7B,KAAK,EAAG,MAAM,GAAN,mBAAWA,GAAX,CAAcA,EAAE,KACxB,KAAK,EAAG,OAAOA,EACf,QAAS,OAAOA,EAAEmB,MAAM,EAAG,IAKR2X,CAAU3V,GAAG3B,IAAI0B,GAFhB,mBAEflD,EAFe,KAEZc,EAFY,KAET4D,EAFS,KAENqU,EAFM,KAGtB,OAAIvV,MAAMxD,IAAMwD,MAAM1C,IAAM0C,MAAMkB,IAAMlB,MAAMuV,GAAWjB,GA/B7C,SAAC9X,EAAMc,EAAM4D,EAAMqU,GAC/B,IACEC,EAAa,CACXjB,KAAM/X,GAAKiY,EAAKG,GAChBrM,IAAKjL,GAAKoX,EAAKE,IAYnB,OAVI1T,EAAI,EACNsU,EAAKra,MAAQ+F,EAAIuT,GAAMvT,EAAI,GAAK0T,EAEhCY,EAAKhN,QAAUtH,EAAI,IAAMuT,EAAKG,GAE5BW,EAAI,EACNC,EAAK9M,OAAS6M,EAAIb,GAAMa,EAAI,GAAKX,EAEjCY,EAAKC,SAAWF,EAAI,IAAMb,EAAKE,GAE1BY,EAgBAE,CAAYlZ,EAAI,EAAGc,EAAI,EAAG4D,EAAGqU,IAiB1BV,QAAOc,QAXT,WAAU,IAAD,EAJU,CAC3Bha,OAAOmZ,YAAcc,SAASC,gBAAgBC,aAAeF,SAASG,KAAKD,YAC3Ena,OAAOoZ,aAAea,SAASC,gBAAgBG,cAAgBJ,SAASG,KAAKC,cAE5D,mBACV9U,EADU,KACPqU,EADO,KAGjB,OADAV,EAAQjF,KAAKqG,IAAI/U,EAAI/F,EAAOoa,EAAI7M,IASNwN,MANE,CAAE5N,SAAU,WAAYiM,KAAMK,EAAKrM,IAAKqM,EAAKpM,MAAOoM,EAAKa,OAAQb,EAAKuB,SAAU,SAW3GC,CAAQ,IAAK,GAAI,GAAI,GAAI,IAGhCvE,GAAQC,KACR9W,GAAMC,YAAW,CACfuZ,KAAM,CACJlM,SAAU,WACVS,UAAW,aACX5N,MAAOqZ,GAAKM,WACZrI,OAAQA,GAAO+H,GAAKI,MAEtBY,KAAM,CACJa,gBAAiBxE,GAAME,OAAOrN,KAC9BqE,UAAW,aACXuN,WAAY,6CACZH,SAAU,OACV1N,MAAO,CACL,iBAAkB,CAChBH,SAAU,WACViM,KAAM,GAAIhM,IAAK,GAAIC,MAAO,GAAIiN,OAAQ,MAI5Cc,OAAQ,CACNF,gBAAiBxE,GAAME,OAAOrN,KAC9B8R,UAAU,eAAD,OAAiB3E,GAAME,OAAO1E,OACvC5E,MAAO,CACL,UAAW,CACT+N,UAAU,iBAAD,OAAmB3E,GAAME,OAAOxE,UAI/CkJ,OAAQ,CACNjK,MAAOqF,GAAME,OAAOrN,KACpB2R,gBAAiBpJ,GAAQmF,aACzBoE,UAAU,eAAD,OAAiB3E,GAAME,OAAOvE,QAEzCkJ,KAAM,CACJL,gBAAiBxE,GAAME,OAAOrN,KAC9B8R,UAAU,eAAD,OAAiB3E,GAAME,OAAO1E,QAEzCsJ,MAAO,CACLlO,MAAO,CACL,iBAAkB,CAChBH,SAAU,WACViM,KAAM,EAAGhM,IAAK,EAAGC,MAAO,EAAGiN,OAAQ,OAQ3CmB,GAAqB,SAACpT,GACpB,IAAMkQ,EAASlP,GAAMoP,OAAOpQ,EAAExE,MAAMoV,MAAMV,OAC1C,OAAOtH,GAAKpR,GAAIwa,KAAM9B,IAAW3D,GAAW4D,OACxC3Y,GAAIub,OACJ7C,IAAW3D,GAAW8G,OACpB7b,GAAIyb,OACJ/C,GAAU3D,GAAW+G,KACnB9b,GAAI0b,KAAO1b,GAAI2b,QAEzBI,GAAa,SAAC,GAAkD,IAAhD5S,EAA+C,EAA/CA,KAEZ6S,EAF2D,EAAzCxS,MAEJxG,KAAI,SAAAwF,GAAM,IAAD,EAEnByT,EAAYzC,GAAKY,MAAM5R,EAAExE,MAAMzC,KAC7BgY,EAA4C0C,EAA5C1C,KAAMhM,EAAsC0O,EAAtC1O,IAAKC,EAAiCyO,EAAjCzO,MAAOiN,EAA0BwB,EAA1BxB,OAAQta,EAAkB8b,EAAlB9b,MAAOuN,EAAWuO,EAAXvO,OACnCrN,EAAU4b,IAAc3C,GAAe,OAAS,QAChD4C,EAAoB,wBAAX1T,EAAEW,KAAiC,EAAI,UAClD,OACE,yBAAKT,IAAKF,EAAEU,GAAInI,UAAW6a,GAAmBpT,GAAI2T,MAAO,CAAE9b,UAASiN,SAAU,WAAYiM,OAAMhM,MAAKC,QAAOiN,SAAQta,QAAOuN,SAAQwO,WACjI,kBAAC,GAAD,CAAUxS,KAAMlB,OACd,UAACA,EAAExE,MAAM8K,gBAAT,aAAC,EAAkBrN,SAAU,kBAACoN,GAAD,CAAU1F,KAAMX,EAAEW,KAAM2F,SAAUtG,EAAExE,MAAM8K,SAAUnG,SAAUH,EAAEY,cAIvG,OACE,yBAAK+F,YAAWhG,EAAMpI,UAAWf,GAAIwZ,MAClCwC,I,6BC7MII,GAAgB,yCAAG,WAAOC,GAAP,UAAAta,EAAA,yDAExB,iBAAkBpB,OAFM,oDAGO,YAA5B2b,aAAaC,WAHQ,gBAGkB,IAAID,aAAaD,GAHnC,0BAIO,WAA5BC,aAAaC,WAJQ,kCAKlBD,aAAaE,oBALK,uBAKmB,YALnB,sBAK8B,IAAIF,aAAaD,GAL/C,4CAAH,sDCmF3BI,GAAWlb,EAAc,IACzBmb,GAAU,SAAC,GAA4B,IAA1B1Y,EAAyB,EAAzBA,MACHuK,EAAkEvK,EAAlEuK,MAAOX,EAA2D5J,EAA3D4J,KAAM+O,EAAqD3Y,EAArD2Y,QAASC,EAA4C5Y,EAA5C4Y,aAAcC,EAA8B7Y,EAA9B6Y,SAAUC,EAAoB9Y,EAApB8Y,QAASC,EAAW/Y,EAAX+Y,OAO/D,GALIxO,WACKvK,EAAMuK,MACb5N,OAAOia,SAASrM,MAAQA,GAGtBX,EAAM,QACD5J,EAAM4J,KACb,IACEoP,EAAWpC,SAASqC,cAAc,qBAClCC,EAAgBtC,SAASqC,cAAc,iCACrCD,IAAUA,EAASG,KAAOvP,GAC1BsP,IAAeA,EAAcC,KAAOvP,GAgB1C,GAbuB,kBAAZ+O,WACF3Y,EAAM2Y,QACbpS,GAAGI,aAAagS,IAIlBpS,GAAGO,QAAQiS,EAAM,eAAQA,GAAW,MAEhCH,WACK5Y,EAAM4Y,aACbR,GAAiBQ,IAGfC,EAAU,QACL7Y,EAAM6Y,SACb,IAEMA,IADQ,IAAIO,IAAIP,GACCzQ,KACnBzL,OAAOC,SAASwL,KAAOyQ,EAEvBlc,OAAOC,SAASyP,QAAQwM,GAE1B,MAAOlX,GACPC,QAAQC,MAAR,8BAAqCgX,EAArC,wBAIAC,WACK9Y,EAAM8Y,QACbL,GAASK,KAIFO,GAAOha,GAAK,iBAAO,CAAEe,OAAQ,kBAAM,0CAEhDoF,GAAMiP,SAAS,OAAQ4E,ICpGvB,IACEC,GAA6B,CAC3Bxa,GAAI,MACJ6B,EAAG,QACHoC,EAAG,QACHkG,EAAG,QACHsQ,GAAI,UAENC,GAAejc,EAAkB,IACjCkc,GAAUlc,EAAyC,MACnDmc,GAAkB,SAACC,GAAD,aAAgB9Y,SAAQ,UAACyY,GAAkBK,UAAnB,QAA4BA,EAAM,KAC5EC,GAAgB,CAAEC,MAAO,GAIzBC,GAAa,SAACC,EAAUJ,GACtB,IACE,GAAgB,MAAZA,EAAK,GAAY,CACnB,IAAMK,EAAevY,KAAKC,MAAMiY,GAGhC,IAFAA,EAAOK,EAAMD,MACFJ,EAAOK,EAAM,KACnBL,EAAM,OAAOC,GAEpB,MAAmB,MAAZD,EAAK,GAXL,SAAC,GAAqD,IAAnDM,EAAkD,EAAlDA,KAAMJ,EAA4C,EAA5CA,MAAOtJ,EAAqC,EAArCA,KAAMpU,EAA+B,EAA/BA,MAAOuN,EAAwB,EAAxBA,OACtC,MAAO,CAAEuQ,OAAMJ,MAAOA,GAAgB,EAAGK,KAAMnZ,EAAOwP,GAAO4J,MAAOhe,EAAOie,MAAO1Q,GAUvD2Q,CAAS5Y,KAAKC,MAAMiY,IAAS,CAAEM,KAAMN,EAAME,MAAO,GAC3E,SACA,OAAOD,KASb/b,EAAG4a,IAAU,SAAAK,GACX,IADsB,EAEpBwB,EAAMxB,EAAQ9Z,KAAI,SAACub,EAAQR,GACzB,IACES,EAAa1B,EAAQiB,EAAQ,GAC7B9C,EAAMyC,GAAgBa,EAAOE,YAC7BC,EAAMF,EAAad,GAAgBc,EAAWC,YAAc,EAAI,EAChEE,EAAKhe,OAAOie,WACVF,EAAG,qBACezD,EADf,8BACwCyD,EADxC,+BAEezD,EAFf,QAIL4D,EAAW,SAACF,GAAkCA,EAAGG,SAASrB,GAAQ,CAAEc,SAAQR,WAC5EgB,EAAiB,CAAER,SAAQtD,MAAKyD,MAAKC,KAAIE,YAK3C,OAHAF,EAAGK,iBAAiB,SAAUH,GAC1BF,EAAGG,SAASrB,GAAQ,CAAEc,SAAQR,UAE3BgB,KAlBW,cAqBSvB,MArBT,IAqBtB,0CAAamB,EAAb,EAAaA,GAAIE,EAAjB,EAAiBA,SAA8BF,EAAGM,oBAAoB,SAAUJ,IArB1D,8BAsBtBrB,GAAac,MAGf,IACEte,GAAMC,YAAW,CACfse,OAAQ,CACNle,QAAS,QAEX6e,KAAM,CACJ5R,SAAU,WACVjN,QAAS,QAEX8e,OAAQ,CACN1R,MAAO,CACL,KAAM,CAAE2R,aAAc,IACtB,gBAAiB,CAAEA,aAAc,KAGrCC,IAAK,CACH5R,MAAO,CACL,KAAM,CAAE6R,YAAa,IACrB,gBAAiB,CAAEA,YAAa,OAItCC,GAA0B,CACxBC,MAAO,aACPC,IAAK,WACLC,OAAQ,SACRC,QAAS,gBACTC,OAAQ,gBAEVC,GAAsB,CACpBL,MAAO,aACPC,IAAK,WACLC,OAAQ,SACRI,SAAU,WACVC,QAAS,WAEXC,GAAqB,CACnBR,MAAO,aACPC,IAAK,WACLC,OAAQ,SACRC,QAAS,gBACTC,OAAQ,eACRG,QAAS,WAEXE,GAAiB,SAAChC,EAAYiC,GAAwC,IAAD,MAEjElgB,EAA2B,CACzBQ,cAAkC,QAAnByd,EAAKiC,UAAsB,MAAQ,SAClD3f,eAAgBgf,GAAc,UAACtB,EAAKkC,eAAN,QAAiB,IAC/C7f,WAAYuf,GAAU,UAAC5B,EAAKmC,aAAN,QAAe,IACrCC,aAAcL,GAAS,UAAC/B,EAAKqC,YAAN,QAAc,IACrCC,SAAUtC,EAAKqC,KAAO,YAAS5e,GAanC,OAVIuc,EAAK1J,KACW,QAAd2L,EACFlgB,EAAIG,MAAQ8d,EAAK1J,KAEjBvU,EAAI0N,OAASuQ,EAAK1J,KAGpBvU,EAAIwgB,SAAW,EAGVxgB,GAETygB,GAAc,SAAC,EAA6BP,GAAwC,IAA7D1X,EAA4D,EAAlEkB,KAAS8Q,EAAyD,EAAzDA,KAEpB2D,EAAuB3D,EAAvB2D,MAAOC,EAAgB5D,EAAhB4D,MAAOF,EAAS1D,EAAT0D,KAEhB/B,EAA6B,CAAE7O,SAAU,WAAY4O,OADjC,wBAAX1T,EAAEW,KAAiC,OAAIzH,GAkBlD,OAhBIwc,EACF/B,EAAMqE,SAAWtC,EAEbC,GAASC,GACXjC,EAAMhc,MAAQge,EACdhC,EAAMzO,OAAS0Q,GACND,EACS,QAAd+B,EACF/D,EAAMhc,MAAQge,EAEdhC,EAAMzO,OAASyQ,EAGjBhC,EAAMqE,SAAW,EAGdrE,GAQTuE,GAAc,SAAdA,EAAeC,EAAkBxX,GAA6B,IACpD8U,EAAmB0C,EAAnB1C,KAAM2C,EAAaD,EAAbC,SACd,GAAI3C,EAAK9U,OAASA,EAAM,OAAOwX,EAC/B,GAAIC,EAAU,CAAC,IAAD,gBACIA,GADJ,IACZ,2BAA0B,CAAC,IACnBpY,EAAIkY,EADc,QACCvX,GACzB,GAAIX,EAAG,OAAOA,GAHJ,+BAMd,OAAO,MAWTqY,GAAc,SAAdA,EAAe,GAAiE,IAA/DF,EAA8D,EAA9DA,QAAST,EAAqD,EAArDA,UAEpBjC,EAA8B0C,EAA9B1C,KAAM6C,EAAwBH,EAAxBG,UAAWF,EAAaD,EAAbC,SACnB5E,EAAW4E,EACPA,EAAS5d,KAAI,SAAA2d,GAAO,OAAI,kBAACE,EAAD,CAAanY,IAAKiY,EAAQ1C,KAAK9U,KAAM+W,UAAWjC,EAAKiC,UAAWS,QAASA,OACjGG,EAAUrf,OACVqf,EAAU9d,KAAI,SAAA+d,GAAa,IAAD,EACVvY,EAAMuY,EAAZrX,KACR,OACE,yBAAKhB,IAAKF,EAAEU,GAAInI,UAAW6a,GAAmBpT,GAAI2T,MAAOsE,GAAYM,EAAU9C,EAAKiC,YAClF,kBAAC,GAAD,CAAUxW,KAAMlB,OACd,UAACA,EAAExE,MAAM8K,gBAAT,aAAC,EAAkBrN,SAAU,kBAACoN,GAAD,CAAU1F,KAAMX,EAAEW,KAAM2F,SAAUtG,EAAExE,MAAM8K,SAAUnG,SAAUH,EAAEY,cAInG,KAER,OACE,yBAAK+F,YAAW8O,EAAK9U,KAAMpI,UAAWqQ,GAAKpR,GAAIkf,KAAyB,QAAnBjB,EAAKiC,UAAsBlgB,GAAIqf,IAAMrf,GAAImf,QAAShD,MAAO8D,GAAehC,EAAMiC,IAChIlE,IAIPgF,GAAa3d,GAAK,YAA+C,IAA5C8F,EAA2C,EAA3CA,KAAMK,EAAqC,EAArCA,MAgCzB,MAAO,CAAEpF,OA9BE,WACP,IAAM6c,EAAcxD,KACpB,IAAKwD,EAAa,OAAO,qCAFZ,MAIT1C,EAAkB0C,EAAlB1C,OAAQR,EAAUkD,EAAVlD,MACV4C,EAvDI,SAAZO,EAAajD,GAAD,YAA0B,CACpCA,OACA2C,SAAQ,UAAE3C,EAAKkD,aAAP,aAAE,EAAYne,IAAIke,GAC1BJ,UAAW,IAoDKI,CAAU,CAAE/X,KAAM,OAAQgY,MAAO5C,EAAO4C,QAChDhhB,EAAgEoe,EAAhEpe,MAAOihB,EAAyD7C,EAAzD6C,UAAWC,EAA8C9C,EAA9C8C,UAAW3T,EAAmC6Q,EAAnC7Q,OAAQ4T,EAA2B/C,EAA3B+C,WAAYC,EAAehD,EAAfgD,WANxC,cAOM/X,GAPN,IAOb,2BAA0B,CAAC,IAAD,EAAfE,EAAe,QAEtB8Q,EAAOsD,GAAWC,EAAOrU,EAAK1F,MAAMzC,KACpCuM,EAAS4S,GAAYC,EAAD,UAAUnG,EAAKyD,YAAf,QAAuB,IACvC,OAANnQ,QAAM,IAANA,KAAQgT,UAAU5e,KAAK,CAAEwH,OAAM8Q,UAXpB,+BAlCE,SAArBgH,EAAsBb,GAAsB,IAClCC,EAAaD,EAAbC,SACR,GAAIA,EAAU,CAAC,IAAD,gBACIA,GADJ,IACZ,2BAA0B,CACxBY,EADwB,UADd,+BAKdb,EAAQG,UAAUzY,MAAK,SAACtG,EAAG8F,GAAJ,OAAU9F,EAAEyY,KAAKqD,MAAQhW,EAAE2S,KAAKqD,SAyCnD2D,CAAmBb,GAEnB,IAAMxE,EAA6B,CACjChc,MAAK,OAAEA,QAAF,IAAEA,IAAS,OAChBshB,SAAUL,EACVM,SAAUL,EACV3T,SACAtN,UAAWkhB,EACXK,UAAWJ,GAEb,OACE,yBAAKpS,YAAWhG,EAAMpI,UAAWf,GAAIue,OAAQpC,MAAOA,GAClD,kBAAC,GAAD,CAAawE,QAASA,MAIblD,eAGnBmE,GAAave,GAAK,YAA+B,IAA5B2G,EAA2B,EAA3BA,KAEjB6X,EAAqB,KACrBC,EAAuC,KAoBzC,MAAO,CAAE1d,OAhBE,WAEL,IAGgB,EAHhB,EArNI,SAAetB,EAAShB,GAClC,IADiE,EAC3DC,EAAS,GAAI8F,EAAS,GADqC,cAEjD/E,GAFiD,IAEjE,gCAAWtB,EAAX,SAAqBM,EAAEN,GAAKO,EAAI8F,GAAG3F,KAAKV,IAFyB,8BAGjE,MAAO,CAACO,EAAG8F,GAmNYka,CADX/X,EAAK3E,QACqB,SAAAmD,GAAC,MAAqB,SAAjBA,EAAExE,MAAMoV,QAD7C,mBACC4I,EADD,KACQxY,EADR,KAGEwY,EAAMvgB,SACS,QAAjB,EAAAqgB,SAAA,SAAmB9f,UACnB6f,EAAWG,EAAM,GACjBtF,GAAQmF,GACRC,EAAoBjgB,EAAGggB,EAASzY,SAAS,kBAAMsT,GAAQmF,OAEzD,OAAOpF,KAAWhb,OACd,kBAACuf,GAAD,CAAY7X,KAAMa,EAAKtB,IAAKc,MAAOA,IACnC,kBAAC,GAAD,CAAYL,KAAMa,EAAKtB,IAAKc,MAAOA,KAG1BJ,QAjBDY,EAAZZ,Y,+GC3QNyN,GAAQC,KACR9W,GAAMC,YAAW,CACfgiB,WAAY,GACZC,aAAc,CACZ7hB,QAAS,WAAYkZ,KAAM,EAAGhM,IAAK,EAAGC,MAAO,EAAGiN,OAAQ,GAE1DlM,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,MAuBlB0L,GAAU,SAAC,GAAD,QAAG3e,MAAS4e,EAAZ,EAAYA,QAAStQ,EAArB,EAAqBA,QAAS3I,EAA9B,EAA8BA,KAA9B,OACR,yBAAKgG,YAAWhG,EAAMkZ,wBAAyB,CAAEC,OAAQF,GAAWjG,MAAOtK,GAAaC,MAE1FyQ,GAAa,SAAC,GAAD,IAAGpZ,EAAH,EAAGA,KAAMoF,EAAT,EAASA,MAAO6T,EAAhB,EAAgBA,QAAhB,OACX,yBAAKjT,YAAWhG,EAAMpI,UAAWwN,EAAQvO,GAAIiiB,WAAajiB,GAAIkiB,cAC3D3T,GAAS,yBAAKxN,UAAWf,GAAIuO,OAAQA,GACtC,kBAAC,GAAD,CAAS/K,MAAO,CAAE4e,eAGtB/E,GAAOha,GAAK,YAA4C,IAAzC8F,EAAwC,EAAxCA,KAAMnF,EAAkC,EAAlCA,MAEnB,MAAO,CAAEI,OADM,kBAAM,kBAAC,GAAD,CAAY+E,KAAMA,EAAMoF,MAAOvK,EAAMuK,MAAO6T,QAASpe,EAAMoe,WAC/DhZ,QAFoC,EAA3BA,YAK9BI,GAAMiP,SAAS,SAAU4E,IC9ClB,IACLmF,GAAWC,KAAW,CAAEC,MAAM,EAAMC,SAAS,EAAMC,aAAa,IAEhEC,IADeJ,KAAW,CAAEG,aAAa,EAAMD,SAAS,IAC7C,SAAC,GAAD,IAAGG,EAAH,EAAGA,OAAH,OAAgC,yBAAKT,wBAAyB,CAAEC,OAAQE,GAASpe,OAAO0e,QAqBnGzF,GAAOha,GAAK,YAA4C,IAAzC8F,EAAwC,EAAxCA,KAAMnF,EAAkC,EAAlCA,MAYnB,MAAO,CAAEI,OAVE,WACP,IAAMc,EAAOD,EAAOjB,EAAMkB,MAC1B,OACE,kBAAC,GAAD,CACEiE,KAAMA,EACNoF,MAAOuK,GAAW9U,EAAMuK,MAAOrJ,GAC/Bkd,QAASI,GAASpe,OAAO0U,GAAW9U,EAAMoe,QAASld,OAI1CkE,QAZoC,EAA3BA,YAe9BI,GAAMiP,SAAS,WAAY4E,ICvC3B,IP2CY9L,GAAcC,GO1CxBxR,GAAMC,YAAW,CACf8iB,UAAW,CACT1iB,QAAS,OACTC,WAAY,aACZ+f,aAAc,cAEhB2C,QAAS,CACPxC,SAAU,GAEZ5S,KAAM,CACJ4D,MAAO,UACP4E,WAAY,IACZ3B,SAAU,OACV5G,WAAY,OACZoV,UAAW,OACXC,WAAY,QACZlV,OAAQ,aAKZmV,GAAW,SAAC,GAKL,IALOnH,EAKR,EALQA,SAAUoG,EAKlB,EALkBA,QAASgB,EAK3B,EAL2BA,SAAUC,EAKrC,EALqCA,OAMzC,IAAKjB,EAAS,OAAO,oCAAGpG,GAExB,IACEsH,EAAqC,CACnCC,gBAAiB,kBAAO,6BAAK,kBAAC,GAAD,CAAUT,OAAQV,OAEnD,OACE,yBAAKrhB,UAAWf,GAAI+iB,UAAW5T,YAAU,gBAExBzN,IAAb0hB,GAA0BA,EAEtB,oCACE,yBAAKriB,eAAsBW,IAAX2hB,GAAwBA,EAASrjB,GAAIgjB,QAAU,IAAKhH,GACpE,kBAAC,KAAD,CAAoBsH,aAAcA,GAChC,kBAAC,KAAD,CAAiBviB,UAAWf,GAAI4N,KAAMU,SAAS,WAInD,kBAAC,KAAD,CAAoBgV,aAAcA,GAAetH,KCS7Dhc,GAAMC,YAAW,CACfujB,QAAS,CACPzV,UAAW,gBAGfwR,GAAyC,CACvCC,MAAO,QACPC,IAAK,MACLC,OAAQ,SACRC,QAAS,gBACTC,OAAQ,gBAIV6D,GAAUpgB,GAAK,YAAsC,IAA5B0D,EAA2B,EAAlCvD,MAChB+G,GAAG9H,KAAKsE,EAAEoC,OAAQ,EAClB,IACEwF,EAAU,WACJ5H,EAAEoC,KAAKyF,WAAW,KACpBjO,OAAOC,SAASwL,KAAOrF,EAAEoC,KAAKF,OAAO,IAGvCsB,GAAG9H,KAAKsE,EAAEoC,WAAoBzH,IAAZqF,EAAEkE,OAAuBlE,EAAEkE,MAC7CV,GAAGT,SAcP,MAAO,CAAE1F,OAZE,WAAO,IAAD,EACb,OAAI2C,EAAE2c,KACG,kBAAC,KAAD,CAAavU,YAAWpI,EAAEoC,KAAMwa,SAAU5c,EAAE4c,SAAUhV,QAASA,GAAU5H,EAAEqH,QAE7E,UAAArH,EAAEyH,eAAF,eAAW/M,QACdsF,EAAE6c,QACA,kBAAC,IAAD,CAAuBzU,YAAWpI,EAAEoC,KAAMya,SAAO,EAACzV,KAAMpH,EAAEqH,MAAOjN,cAAe4F,EAAEyH,QAASmV,SAAU5c,EAAE4c,SAAUhV,QAASA,IAC1H,kBAAC,IAAD,CAAuBQ,YAAWpI,EAAEoC,KAAMgF,KAAMpH,EAAEqH,MAAOjN,cAAe4F,EAAEyH,QAASmV,SAAU5c,EAAE4c,SAAUhV,QAASA,IACpH5H,EAAE6c,QACA,kBAAC,KAAD,CAAsBzU,YAAWpI,EAAEoC,KAAMgF,KAAMpH,EAAEqH,MAAOuV,SAAU5c,EAAE4c,SAAUhV,QAASA,IACvF,kBAAC,KAAD,CAAsBQ,YAAWpI,EAAEoC,KAAMgF,KAAMpH,EAAEqH,MAAOuV,SAAU5c,EAAE4c,SAAUhV,QAASA,SAKnGkV,GAAW,SAAC,GAAsC,IAA7B9c,EAA4B,EAAnCvD,MAEVwY,EAAYjV,EAAE2H,MAAM1L,KAAI,SAAAwF,GAAC,OAAIA,EAAEsb,UAAQC,OAAOC,SAAsBhhB,KAAI,SAAA6E,GAAC,OACvE,kBAAC,GAAD,CAAUa,IAAKb,EAAEsB,KAAMiZ,QAASva,EAAEoc,QAASb,UAAU,EAAOC,QAAQ,GAClE,kBAACI,GAAD,CAASjgB,MAAOqE,GAAIA,EAAEuG,WAG5B,OACE,yBAAKe,YAAWpI,EAAEoC,KAAMpI,UAAWf,GAAIwjB,QAASrH,MAAOtK,GAAa9K,EAAE+K,UACpE,kBAAC,KAAD,CAAcoS,YAAU,EAACC,gBAAiB5E,GAAexY,EAAEoZ,SAAW,IAAKiE,OAAQ,CAAEC,YAAa,KAAOrI,KAI/GsI,GAAoB,SAAC,GAAD,IAAUvd,EAAV,EAAGvD,MAAH,OAClB,yBAAKzC,UAAWf,GAAIwjB,QAASrH,MAAOtK,GAAa9K,EAAE+K,UACjD,kBAAC2R,GAAD,CAAS/a,IAAK3B,EAAEoC,KAAM3F,MAAOuD,GAAIA,EAAEqH,S,6BC3EvCmW,GAAYlhB,GAAK,YAAwC,IAA9B0D,EAA6B,EAApCvD,MAClB+G,GAAG9H,KAAKsE,EAAEoC,QAAUpC,EAAEkE,MACtB,IACEuZ,EAAW,SAACC,EAAmCC,GAC7Cna,GAAG9H,KAAKsE,EAAEoC,MAAoB,OAAZub,EAAmB,OAASA,EAC1C3d,EAAE4d,SAASpa,GAAGT,QAetB,MAAO,CAAE1F,OAbE,kBACP,kBAAC,KAAD,CACE+K,YAAWpI,EAAEoC,KACbgT,MAAOtK,GAAa9K,EAAE+K,SACtB8S,WAAY,CAAE,YAAa7d,EAAEoC,MAC7BiF,MAAOrH,EAAEqH,MACTyW,qBAAsB9d,EAAE+d,cACxBC,eAAgBhe,EAAEkE,MAClBuZ,SAAUA,EACVb,SAAU5c,EAAE4c,gB,oBC3BpB3jB,GAAMC,YAAW,CACf+kB,QAAS,CACPvT,OAAQA,GAAO,EAAG,IAEpB/C,MAAO,CACLjB,MAAO,CACL,MAAO,CACLgE,OAAQ,cAKhBwT,GAAiB5hB,GAAK,YAAkG,IAA/F8F,EAA8F,EAA9FA,KAAMiF,EAAwF,EAAxFA,MAAOuV,EAAiF,EAAjFA,SAAUuB,EAAuE,EAAvEA,UAE5CV,EAAW,SAACC,EAAmCC,GAApC,OAA0DQ,IAAYR,IAanF,MAAO,CAAEtgB,OAZE,WACP,OACE,kBAAC,KAAD,CACE+K,YAAWhG,EACXiF,MAAOA,EACPsW,QAASQ,IACTV,SAAUA,EACVb,SAAUA,EACVwB,OAAQ,CAAEC,KAAM,CAAEhG,aAAc,OAIvB8F,gBAInBG,GAAahiB,GAAK,YAAyC,IAA/B0D,EAA8B,EAArCvD,MACnB+G,GAAG9H,KAAKsE,EAAEoC,MAAQpC,EAAEue,QAAU,GAC9B,IAAIC,GAAS,EAEXC,EAAmB,IAAIC,IAAO1e,EAAEue,QAChCI,GAAW3e,EAAE2e,SAAW,IAAI1iB,KAAI,SAAAwF,GAAC,MAAK,CACpCmd,OAAQnd,EACR0c,UAAW3jB,EAAIikB,EAAiBI,IAAIpd,EAAEW,WAExC0c,EAAU,WACR,IAAIN,EAAJ,CACA,IAFc,EAERO,EAAU,GAFF,cAGEJ,GAHF,IAGd,gCAAWld,EAAX,QAA6BA,EAAE0c,aAAaY,EAAG5jB,KAAKsG,EAAEmd,OAAOxc,OAH/C,8BAIdoB,GAAG9H,KAAKsE,EAAEoC,MAAQ2c,EACd/e,EAAE4d,SAASpa,GAAGT,SAEpBic,EAAS,SAAC9a,GACRsa,GAAS,EADY,oBAELG,GAFK,IAErB,gCAAWld,EAAX,QAA8BA,EAAEmd,OAAOhC,UAAUnb,EAAE0c,UAAUja,IAFxC,8BAGrBsa,GAAS,EACTM,KAEFG,EAAY,kBAAMD,GAAO,IACzBE,EAAc,kBAAMF,GAAO,IAmB7B,OADAL,EAAQziB,SAAQ,SAAAuF,GAAC,OAAI3G,EAAG2G,EAAE0c,UAAWW,MAC9B,CAAEzhB,OAlBE,WACP,IACEsK,EAAQgX,EAAQ1iB,KAAI,WAAwBE,GAAxB,IAAGyiB,EAAH,EAAGA,OAAQT,EAAX,EAAWA,UAAX,OAClB,kBAACD,GAAD,CAAgB9b,KAAI,mBAAcjG,EAAI,GAAKwF,IAAKxF,EAAGkL,MAAOuX,EAAOvX,OAASuX,EAAOxc,KAAMwa,WAAYgC,EAAOhC,SAAUuB,UAAWA,OAEnI,OACE,yBAAK/V,YAAWpI,EAAEoC,KAAMgT,MAAOtK,GAAa9K,EAAE+K,UAC5C,kBAAC,KAAD,KAAe/K,EAAEqH,OACjB,yBAAKrN,UAAWf,GAAIglB,SAClB,kBAAC,KAAD,CAAakB,QAAQ,SACnB,kBAAC,KAAD,CAAavX,QAASqX,GAAtB,cADF,MAC8D,kBAAC,KAAD,CAAarX,QAASsX,GAAtB,kBAGhE,yBAAKllB,UAAWf,GAAI0O,OAAQA,S,UCjDtCyX,GAAe9iB,GAAK,YAA2C,IAAjC0D,EAAgC,EAAvCvD,MACrB+G,GAAG9H,KAAKsE,EAAEoC,MAAQpC,EAAEkE,OAAS,KAC7B,IACEmb,GAAWrf,EAAE2e,SAAW,IAAI1iB,KAAI,gBAAGmG,EAAH,EAAGA,KAAH,MAA2D,CAAET,IAAKS,EAAMgF,KAAxE,EAASC,OAA8EjF,EAAMwa,SAA7F,EAAgBA,aAChDa,EAAW,SAACC,EAAmC4B,GACzCA,IAAQ9b,GAAG9H,KAAKsE,EAAEoC,MAAQkd,EAAO3d,KACjC3B,EAAE4d,SAASpa,GAAGT,QActB,MAAO,CAAE1F,OAZE,kBACP,kBAAC,KAAD,CACE+K,YAAWpI,EAAEoC,KACbgT,MAAOtK,GAAa9K,EAAE+K,SACtB1D,MAAOrH,EAAEqH,MACTkY,SAAUvf,EAAEuf,SACZC,mBAAoBxf,EAAEkE,MACtBmb,QAASA,EACT5B,SAAUA,S,oBCjClBgC,GAAenjB,GAAK,YAA2C,IAAjC0D,EAAgC,EAAvCvD,MACfyH,EAAQlE,EAAEkE,OAAS,KACzBV,GAAG9H,KAAKsE,EAAEoC,MAAQ8B,EAClB,IACEwb,EAAiB,SAACC,EAAclV,GAC9BjH,GAAG9H,KAAKsE,EAAEoC,MAAQqI,GAASvG,EAEvBlE,EAAE4d,SAASpa,GAAGT,QAEpB0a,EAAW,SAACC,EAAuCjT,GACjDjH,GAAG9H,KAAKsE,EAAEoC,OAAa,OAALqI,QAAK,IAALA,OAAA,EAAAA,EAAOmV,MAAO1b,EAC5BlE,EAAE4d,SAASpa,GAAGT,QAqBtB,MAAO,CAAE1F,OAnBE,iBAhBGwiB,EAgBH,OACP,yBAAKzX,YAAWpI,EAAEoC,KAAMgT,MAAOtK,GAAa9K,EAAE+K,UAC5C,kBAAC,KAAD,KAAe/K,EAAEqH,QAEf,UAAArH,EAAE2e,eAAF,eAAWjkB,QACP,kBAAC,KAAD,CACAolB,YAAa,GACbC,WAAY7b,GAASlE,EAAE2e,QAAQ,GAC/BqB,YAxBEH,EAwBuB7f,EAAE2e,QAxBbkB,EAAG5jB,KAAI,SAACwF,GAAD,MAAgC,CAAEU,GAAIV,EAAG4F,MAAO5F,EAAGgJ,MAAOhJ,OAyB/Eie,eAAgBA,IAEhB,kBAAC,KAAD,CACAjV,MAAOvG,GAAS,OAChBuZ,SAAUA,U,UCjBxBwC,GAAY3jB,GAAK,YAAwC,IAA9B0D,EAA6B,EAApCvD,MAClB+G,GAAG9H,KAAKsE,EAAEoC,MAAQpC,EAAEkE,OAAS,KAC7B,IACEgc,EAAQ1lB,EAAIwF,EAAEkE,OACdmb,GAAWrf,EAAE2e,SAAW,IAAI1iB,KAAI,SAACmL,EAAMjL,GAAP,MAAsC,CAAEwF,IAAI,GAAD,OAAKxF,GAAKiL,WACrFqW,EAAW,SAACC,EAAuC4B,EAAiCa,EAAiBjc,GACnG,IAAMpH,GAAU,OAANwiB,QAAM,IAANA,OAAA,EAAAA,EAAQlY,OAAQlD,GAAS,GACnCV,GAAG9H,KAAKsE,EAAEoC,MAAQtF,EAClBojB,EAAMpjB,IAiBV,MAAO,CAAEO,OAfE,kBACP,kBAAC,KAAD,CACE+K,YAAWpI,EAAEoC,KACbgT,MAAOtK,GAAa9K,EAAE+K,SACtB1D,MAAOrH,EAAEqH,MACT+Y,YAAapgB,EAAEogB,YACff,QAASA,EACTzC,SAAU5c,EAAE4c,SACZyD,aAAa,KACbC,eAAe,EACfC,aAAcvgB,EAAElB,MAChBsI,KAAM8Y,IACNzC,SAAUA,KAGCyC,Y,UCpCnBM,GAAO,SAAC/gB,GAAW,IAAM7B,EAAC,UAAM6B,GAAK,OAAoB,IAAb7B,EAAElD,OAAF,WAAqBkD,GAAMA,GAEvE6iB,GAAY,SAAC7iB,GACX,GAAIA,GAAKA,EAAElD,OAAQ,CACjB,IAAMgmB,EAAK9iB,EAAEgF,MAAM,KACnB,GAAkB,IAAd8d,EAAGhmB,OAAc,OACrB,IAAMimB,EAAMD,EAAGzkB,KAAI,SAAA2B,GAAC,OAAIE,SAASF,EAAG,OAAKof,QAAO,SAAAvd,GAAC,OAAKxB,MAAMwB,MAC5D,GAAmB,IAAfkhB,EAAIjmB,OAAc,OACtB,OAAO,IAAIkmB,KAAKD,EAAI,GAAIA,EAAI,GAAK,EAAGA,EAAI,MAM5CE,GAAcvkB,GAAK,YAA0C,IAAhC0D,EAA+B,EAAtCvD,MACdyH,EAAQlE,EAAEkE,OAAS,KACzBV,GAAG9H,KAAKsE,EAAEoC,MAAQ8B,EAClB,IACE4c,EAAe,SAACviB,GACdiF,GAAG9H,KAAKsE,EAAEoC,MAAe,OAAN7D,QAAoB5D,IAAN4D,EAAmB2F,EAlB7C,SAAC3F,GAAD,gBAAmBA,EAAEwiB,cAArB,YAAsCP,GAAKjiB,EAAEyiB,WAAa,GAA1D,YAAgER,GAAKjiB,EAAE0iB,YAkBlBxX,CAAWlL,GAEnEyB,EAAE4d,SAASpa,GAAGT,QActB,MAAO,CAAE1F,OAZE,kBACP,kBAAC,KAAD,CACE+K,YAAWpI,EAAEoC,KACbgT,MAAOtK,GAAa9K,EAAE+K,SACtB1D,MAAOrH,EAAEqH,MACTnD,MAAOuc,GAAUvc,GACjBkc,YAAapgB,EAAEogB,YACfxD,SAAU5c,EAAE4c,SACZkE,aAAcA,S,UChBtBI,GAAY5kB,GAAK,YAAwC,IAA9B0D,EAA6B,EAApCvD,MACZ0kB,IAAkBnhB,EAAEue,OAC1B/a,GAAG9H,KAAKsE,EAAEoC,MAAQ+e,EACbnhB,EAAEue,QAAU,GACZve,EAAEkE,OAAS,KAEhB,IACEkd,EAAYD,EAAgB,IAAIzC,IAAO1e,EAAEue,QAAU,KACnD8C,EAAmB7mB,EAAIyE,MAAMqiB,KAAKF,GAAa,KAC/C/B,GAAWrf,EAAE2e,SAAW,IAAI1iB,KAAI,gBAAGmG,EAAH,EAAGA,KAAH,MAAwD,CAAET,IAAKS,EAAMgF,KAArE,EAASC,OAA2EjF,EAAMwa,SAA1F,EAAgBA,aAChDa,EAAW,SAACC,EAAmC4B,GAC7C,GAAIA,EAAQ,CACV,IAAMld,EAAOkd,EAAO3d,IACpB,GAAIwf,GAA+B,OAAdC,EAAoB,CACnC9B,EAAOiC,SACTH,EAAU1e,IAAIN,GAEdgf,EAAUI,OAAOpf,GAEnB,IAAMqf,EAAexiB,MAAMqiB,KAAKF,GAChC5d,GAAG9H,KAAKsE,EAAEoC,MAAQqf,EAClBJ,EAAiBI,QAEjBje,GAAG9H,KAAKsE,EAAEoC,MAAQA,EAGlBpC,EAAE4d,SAASpa,GAAGT,QAEpBkc,EAAY,WACV,GAAKmC,EAAL,CAEAA,EAAUM,QACVrC,EAAQnjB,SAAQ,SAAAylB,GAAYA,EAAE/E,UAAUwE,EAAU1e,IAAIif,EAAEhgB,QAExD,IAAMigB,EAAe3iB,MAAMqiB,KAAKF,GAChCC,EAAiBO,GACjBpe,GAAG9H,KAAKsE,EAAEoC,MAAQwf,EAElBnE,MAEFyB,EAAc,WACPkC,IAELA,EAAUM,QACVL,EAAiB,IACjB7d,GAAG9H,KAAKsE,EAAEoC,MAAQ,GAElBqb,MA0BJ,MAAO,CAAEpgB,OAxBE,kBACP,yBAAK+X,MAAOtK,GAAa9K,EAAE+K,UACzB,kBAAC,KAAD,CACE3C,YAAWpI,EAAEoC,KACbiF,MAAOrH,EAAEqH,MACT+Y,YAAapgB,EAAEogB,YACff,QAASA,EACTE,SAAUvf,EAAEuf,SACZ3C,SAAU5c,EAAE4c,SACZiF,YAAaV,QAAiBxmB,EAC9B6kB,mBAAqB2B,OAA0BxmB,EAAVqF,EAAEkE,MACvC4d,aAAcX,EAAgBE,SAAqB1mB,EACnD8iB,SAAUA,IAGV0D,GACA,6BACE,kBAAC,KAAD,CAAahC,QAAQ,SACnB,kBAAC,KAAD,CAAavX,QAASqX,GAAtB,cADF,MAC8D,kBAAC,KAAD,CAAarX,QAASsX,GAAtB,oBAMvDmC,uB,oBC5FnBpoB,GAAMC,YAAW,CACfyJ,KAAM,CACJrJ,QAAS,OACTG,cAAe,UAEjBsoB,aAAc,CACZrb,MAAO,CACL,kBAAmB,CACjBpN,QAAS,WAIf0oB,eAAgB,CACdtb,MAAO,CACL,kBAAmB,CACjBpN,QAAS,YAOjB2oB,GAAY3lB,GAAK,YAAwC,IAA9B0D,EAA6B,EAApCvD,MAEhBylB,EAAU1nB,IAAMgJ,GAAG9H,KAAKsE,EAAEoC,OAC1BwF,EAAU,WACRpE,GAAG9H,KAAKsE,EAAEoC,MAAQpC,EAAEmiB,UAAYniB,EAAEmiB,SAClCD,EAAQliB,EAAEmiB,WAwBd,MAAO,CAAED,UAAS7kB,OAtBP,WACP,IACE+kB,EAASF,IACTG,EAAcD,EAAS,SAAW,SAClCE,EAAe,CAAE/a,SAAU6a,EAAS,iBAAmB,mBACvDpoB,EAAYkoB,IAAYjpB,GAAI8oB,aAAe9oB,GAAI+oB,eAEjD,OACE,yBAAK5Z,YAAWpI,EAAEoC,KAAMpI,UAAWA,EAAWob,MAAOtK,GAAa9K,EAAE+K,UAClE,kBAAC,KAAD,CAAkBuO,aAAa,QAAQ8E,OAAQ,CAAE/C,QAAS,CAAEkH,YAAa,KACvE,kBAAC,KAAD,CACE/a,MAAO6a,EACP/a,UAAWgb,EACX1a,QAASA,EACTwW,OAAQ,CAAEC,KAAM,CAAEkE,YAAa,GAAK1b,KAAM,CAAEsV,WAAY,KAAQnc,EAAEqH,QAEtE,6BACE,kBAAC,GAAD,CAAaM,MAAO3H,EAAE2H,OAAS,Y,oBCxCzCqI,GAAWD,KAAXC,OACF/W,GAAMC,YAAW,CACfspB,YAAa,CACXtb,QAAS,GAEXub,OAAO,2BjBmBY,CAAEnpB,QAAS,OAAQC,WAAY,SAAUC,eAAgB,WiBnBtE,IAEJC,cAAe,SACfuN,UAAW,eAEb0b,eAAgB,CACdnY,QjBMMC,GiBNS,EjBMKC,GiBNFuF,GAAO5I,KjBMpB,UAAoCoD,GAApC,qBAA0DC,MiBJjEkY,YAAY,2BjBWO,CAAErpB,QAAS,OAAQC,WAAY,SAAUC,eAAgB,WiBXjE,IAEToN,QAAS,GACTgc,WAAY5S,GAAO5I,KACnBqD,MAAOuF,GAAO/M,KACdyX,SAAU,GACVhU,MAAO,CACL,UAAW,CACTO,OAAQ,cAId4b,iBAAkB,CAChBnY,OAAQ,UAEVoY,aAAc,CACZpV,SAAU,GACVnH,SAAU,WACVC,KAAM,GACNC,MAAO,EACPQ,OAAQ,aAGR8b,GAA0B,SAACC,GAAD,OAAsB,KAARA,EAAe,MAE3DC,GAAc3mB,GAAK,YAAuC,IAApCG,EAAmC,EAAnCA,MAElBymB,EAAc1oB,GAAI,GAClB2oB,EAAS3oB,EAAY,IACrB4oB,EAAmB5oB,EAAI,GACvB6oB,EAAS7oB,EAAI,IACb8oB,EAAc9oB,EAAI,IAClB+oB,EAAmB9mB,EAAM+mB,cAAgBT,GAAwBtmB,EAAM+mB,eAAiB,EACxFC,EAAehnB,EAAMinB,SAAWX,GAAwBtmB,EAAMinB,UAAY,EAC1EC,EAAiBlnB,EAAMmnB,gBACnBnnB,EAAMmnB,gBAAgB3nB,KAAI,SAAA2C,GAAC,OAAIA,EAAEiJ,WAAW,KAAOjJ,EAApB,WAA4BA,MAC3D,KACJ6jB,EAAM,yCAAG,uCAAAznB,EAAA,6DACD6oB,EAAW,IAAIC,SACrBX,IAASjnB,SAAQ,SAAAnB,GAAC,OAAI8oB,EAASE,OAAO,QAAShpB,MAFxC,SAKCipB,EAAc,IAAIC,SAAwB,SAACC,EAASC,GACxD,IAAMC,EAAM,IAAIC,eAChBD,EAAIE,KAAK,OAAQ,OACjBF,EAAI3B,OAAO8B,WAAa,SAAA3lB,GAAC,OAAIwkB,EAAiBxkB,EAAE4lB,OAAS5lB,EAAE6lB,QAC3DL,EAAI9f,KAAKuf,GACTO,EAAIM,mBAAqB,WACnBN,EAAIO,aAAeN,eAAeO,OAClCR,EAAIS,QAAU,KAAOT,EAAIS,OAAS,IAAKX,EAAQE,GAC9CD,EAAOC,QAbX,SAgB0BJ,EAhB1B,gBAgBGc,EAhBH,EAgBGA,aAhBH,EAiBapmB,KAAKC,MAAMmmB,GAArBC,EAjBH,EAiBGA,MACRvhB,GAAG9H,KAAKe,EAAM2F,MAAQ2iB,EACtBvhB,GAAGT,OACHugB,EAAY,gCAAD,OAAiCH,IAASlnB,KAAI,qBAAGmG,QAAiBkB,KAAK,KAAvE,MApBN,kDAsBK+f,EAAO,2CAtBZ,yBAuBGF,EAAO,IAvBV,6EAAH,qDAgCN6B,EAAgB,SAACC,GACf,IAAKxoB,EAAMyoB,UAAYD,EAAQvqB,OAAS,EACtC,MAAO,mEAGT,IAAMyqB,EAAkBF,EAAQjI,QAAO,mBAZrB,SAACoI,GACnB,IAAKzB,EAAgB,OAAO,EADY,oBAETA,GAFS,IAExC,2BAA+C,CAAC,IAArC0B,EAAoC,QAC7C,GAAID,EAASE,cAAcnV,SAASkV,EAAiBC,eAAgB,OAAO,GAHtC,8BAKxC,OAAO,EAO+CC,CAAf,EAAGnjB,SAC1C,GAAI+iB,EAAgBzqB,OAClB,MAAM,oCAAN,OAA2CyqB,EAAgBlpB,KAAI,qBAAGmG,QAAiBkB,KAAK,MAAxF,wDAC2BqgB,QAD3B,IAC2BA,OAD3B,EAC2BA,EAAgBrgB,KAAK,MADhD,KAIF,GAAIigB,EAAkB,CACpB,IAAMiC,EAA8BP,EAAQjI,QAAO,qBAAGxP,KAAkB+V,KACxE,GAAIiC,EAA4B9qB,OAC9B,MAAM,qCAAN,OAA4C8qB,EAA4BvpB,KAAI,qBAAGmG,QAAiBkB,KAAK,MAArG,iDACyB7G,EAAM+mB,cAD/B,OAKJ,GAAIC,GACgBwB,EAAQQ,QAAO,SAAChB,EAAD,UAAqBA,EAArB,EAAUjX,OAAyB,GACpDiW,EACd,MAAM,+CAAN,OAAsDhnB,EAAMinB,SAA5D,QAINjG,EAAW,SAAC7e,GACV,IAAMmmB,EAAQnmB,EAAEmI,OAAOge,MACvB,GAAI,OAACA,QAAD,IAACA,OAAD,EAACA,EAAOrqB,OAAZ,CACA,IAAMuqB,EAAUhmB,MAAMqiB,KAAKyD,GAErBW,EAASV,EAAcC,GACzBS,EACFrC,EAAOqC,GAGTvC,EAAO8B,KAETU,EAAe,SAAC/mB,GACdA,EAAEgnB,iBACFhnB,EAAEinB,kBACF3C,GAAY,IAEd4C,EAAkB,SAAClnB,GACjBA,EAAEgnB,iBACFhnB,EAAEinB,kBACF3C,GAAY,IAEd6C,EAAS,SAACnnB,GACRknB,EAAgBlnB,GAChB,IAAMmmB,EAAQnmB,EAAEonB,aAAajB,MAC7B,GAAKA,EAAMrqB,SAAU2oB,MAAYC,IAAjC,CACA,IAAM2B,EAAUhmB,MAAMqiB,KAAKyD,GAErBW,EAASV,EAAcC,GACzBS,EACFrC,EAAOqC,GAITvC,EAAO8B,KAITgB,EAAa,SAACrnB,GACZA,EAAEgnB,iBACFhnB,EAAEinB,mBAEJK,EAAiB,kBAAM7C,EAAO,KAC9B8C,EAAmB,WACjB7C,EAAY,IACZF,EAAiB,IAyGrB,MAAO,CAAE/lB,OAxBE,WACP,IAAM+oB,GAAgBlD,KAAkBG,KAAaC,IAAuDrqB,GAAIwpB,OAA3CpY,GAAKpR,GAAIwpB,OAAQxpB,GAAIypB,gBAC1F,OACE,yBAAKtN,MAAOtK,GAAarO,EAAMsO,UAC7B,0BACE/Q,UAAWosB,EACXhR,MAAO,CAAEzO,OAAQlK,EAAMkK,QAAU,KACjC0f,YAAaV,EACbW,YAAaX,EACbY,UAAWT,EACXU,YAAaV,EACbC,OAAQA,EACRE,WAAYA,GAtFd5C,IACF,oCACE,kBAAC,KAAD,CAAalE,QAAQ,UAArB,oBACA,kBAAC,KAAD,CACEnlB,UAAWf,GAAI4pB,iBACf4D,eAAgBC,KAAsB5nB,MACtC6nB,aAAa,EACbne,UAAW0d,GACV7C,MAIEC,IACP,oCACE,kBAAC,KAAD,CAAanE,QAAQ,UAArB,qBACA,kBAAC,KAAD,CACEnlB,UAAWf,GAAI4pB,iBACf4D,eAAgBC,KAAsBE,QACtCD,aAAa,EACbne,UAAW2d,GACV7C,MAIEJ,IACP,kBAAC,KAAD,CAAa9E,OAAQ,CAAEC,KAAM,CAAEwI,cAAe,UAA9C,uCAEOzD,IACP,kBAAC,KAAD,CACEhF,OAAQ,CAAEC,KAAM,CAAEjlB,MAAO,QACzBgP,YAAU,WACV0e,YAAW,sBAAsC,IAArB1D,KAA0BvY,QAAQ,GAAnD,KACXkc,gBAAiB3D,MAGZD,IAASzoB,OAChB,oCACE,kBAAC,KAAD,CAAaykB,QAAQ,UAAU1iB,EAAMyoB,SAAW,eAAiB,eACjE,kBAAC,KAAD,CACE/H,YAAY,EACZ6J,cAAc,SACd5I,OAAQ,CAAEC,KAAM,CAAE1D,SAAU,OAAQsM,UAAW,OAAQrgB,QAAS,WAChEyW,OAAQ,CAAEC,YAAa,KAErB6F,IAASlnB,KAAI,WAAWE,GAAX,IAjDT6a,EAiDY5U,EAAH,EAAGA,KAAH,OACX,kBAAC,KAAD,CAAkBT,IAAKjE,IAAO0gB,OAAQ,CAAEC,KAAM,CAAEnC,UAAW,SAAU3V,SAAU,cAC7E,kBAAC,IAAD,CAAavM,UAAWf,GAAI6pB,aAAcvb,SAAS,eAAeK,SAnDlEoP,EAmDsF7a,EAnDzE,WACzBgnB,IAAS9mB,OAAO2a,EAAO,GACvBmM,EAAO,YAAIA,UAkDC,kBAAC,IAAD,CAAa5b,SAAS,WAAW6W,OAAQ,CAAEC,KAAM,CAAE3Q,SAAU,OAC7D,6BACA,kBAAC,KAAD,CAAawZ,QAAQ,EAAM9I,OAAQ,CAAEC,KAAM,CAAE/kB,QAAS,QAASoR,OAAQ,YAAetI,SAQhG,oCACE,kBAAC,IAAD,CAAamF,SAAS,cAAc6W,OAAQ,CAAEC,KAAM,CAAE3Q,SAAU,OAChE,2BACEvL,GAAG,OACHiG,YAAW3L,EAAM2F,KACjBpI,UAAWf,GAAIupB,YACf/E,SAAUA,EACVtjB,KAAK,OACLgtB,QAAsB,OAAdxD,QAAc,IAAdA,OAAA,EAAAA,EAAgBrgB,KAAK,YAAQ3I,EACrCuqB,SAAUzoB,EAAMyoB,WAClB,2BAAOkC,QAAQ,OAAOptB,UAAWf,GAAI0pB,aACnC,kBAAC,KAAD,CAAaxD,QAAS,SAAtB,cAEF,kBAAC,KAAD,CAAaf,OAAQ,CAAEC,KAAM,CAAEgJ,UAAW,MAA1C,oBAAoE5qB,EAAMyoB,SAAW,QAAU,SAA/F,YAoBA,kBAAC,KAAD,CACEtI,WAAYwG,MAAuBD,IAASzoB,OAC5C0M,KAAM3K,EAAM4K,MACZO,QAAS6a,MAKFW,mBAAkBF,cAAaC,SAAQE,SAAQC,kBC3RlExT,GAAQC,KACR9W,GAAMC,YAAW,CACfyJ,KAAM,CACJ4D,SAAU,WAAYiM,KAAM,EAAGhM,IAAK,EAAGC,MAAO,EAAGiN,OAAQ,GAE3DlM,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAEhBsE,KAAM,CACJzN,SAAU,WAAYiM,KAAM,EAAGhM,IAAK,GAAIC,MAAO,EAAGiN,OAAQ,KAsC9D4T,GAAU,SAAC1pB,GAAD,OAAaA,EAAE0L,QAAQ,yBAAV,YAAyC1P,OAAOC,SAASsM,SAAzD,aAAsEvM,OAAOC,SAASuM,KAAtF,OACvBmhB,GAAS,SAAC3pB,GAAD,OAAayY,IAAImR,gBAAgB,IAAIC,KAAK,CAACH,GAAQ1pB,IAAK,CAAEzD,KAAM,gBACzEutB,GAAc,SAAC,GAAD,IAAGjkB,EAAH,EAAGA,KAAM4X,EAAT,EAASA,QAAT,OACZ,4BAAQ7T,MAAO9J,IAAOiqB,IAAKlkB,GAAwB8jB,GAAVlM,GAAmC,sBAAuBuM,YAAY,IAAIxuB,MAAM,OAAOuN,OAAO,UAI9HkhB,GAAS,SAAC,GAAD,QAAGprB,MAAS2F,EAAZ,EAAYA,KAAMqB,EAAlB,EAAkBA,KAAM4X,EAAxB,EAAwBA,QAAxB,IAAiCjiB,aAAjC,MAAyC,OAAzC,MAAiDuN,cAAjD,MAA0D,QAA1D,EAAmEoE,EAAnE,EAAmEA,QAAnE,OACpB,yBAAK3C,YAAWhG,EAAMgT,MAAK,aAAIhc,QAAOuN,UAAWmE,GAAaC,KAC5D,kBAAC,GAAD,CAAatH,KAAMA,EAAM4X,QAASA,MAKpC/E,GAAOha,GAAK,YAA4C,IAAzC8F,EAAwC,EAAxCA,KAAMnF,EAAkC,EAAlCA,MASnB,MAAO,CAAEI,OARM,kBACb,yBAAK+K,YAAWhG,EAAMpI,UAAWf,GAAI0J,MACnC,yBAAK3I,UAAWf,GAAIuO,OAAQvK,EAAMuK,OAClC,yBAAKxN,UAAWf,GAAI+a,MAClB,kBAAC,GAAD,CAAavQ,KAAMxG,EAAMwG,KAAM4X,QAASpe,EAAMoe,aAInChZ,QAToC,EAA3BA,YAY9BI,GAAMiP,SAAS,QAAS4E,ICpDjB,ICFFwR,GDGHC,GAAS,SAAC,GAAiC,IAA/BtrB,EAA8B,EAA9BA,MACF4K,EAA6D5K,EAA7D4K,MADgC,EAC6B5K,EAAtD8iB,gBADyB,WAC6B9iB,EAApCmgB,gBADO,SACW7R,EAAkBtO,EAAlBsO,QAAS3I,EAAS3F,EAAT2F,KAC5D,OACE,kBAAC,KAAD,CACEgG,YAAWhG,EACXgT,MAAOtK,GAAaC,GACpBwU,SAAUA,EACV3C,SAAUA,GACVvV,IEJN2gB,GAAQ1rB,GAAK,YAAoC,IAA1B0D,EAAyB,EAAhCvD,MAEZ4K,EAAQrH,EAAEqH,OAASrH,EAAEyD,KACrBsD,EAAsB,KAAb/G,EAAE+G,OAAgB,SAAW/G,EAAE+G,OACxCa,EAAU,kBAAMb,EAASnN,OAAO0qB,KAAKtkB,EAAEyD,KAAMsD,GAAUnN,OAAO0qB,KAAKtkB,EAAEyD,OAiBvE,MAAO,CAAEpG,OAhBE,kBACP,yBAAK+X,MAAOtK,GAAa9K,EAAE+K,UAEvB/K,EAAE+c,OACE,kBAAC,KAAD,CAAsB3U,YAAWpI,EAAEoC,KAAMgF,KAAMC,EAAOuV,SAAU5c,EAAE4c,SAAUhV,QAASA,IACrF,kBAAC,KAAD,CACAQ,YAAWpI,EAAEoC,KACbgU,KAAMpW,EAAEyD,KACRwkB,SAAUjoB,EAAEioB,SACZrL,SAAU5c,EAAE4c,SACZ7V,OAAQA,GACPM,SC1Bf6gB,GAAmB,SAAC7sB,GAClB,OAAQA,GACN,IAAK,QAAS,OAAOqrB,KAAsB5nB,MAC3C,IAAK,UAAW,OAAO4nB,KAAsByB,QAC7C,IAAK,UAAW,OAAOzB,KAAsBE,QAC7C,IAAK,SAAU,OAAOF,KAAsB0B,cAC5C,IAAK,UAAW,OAAO1B,KAAsB2B,QAC7C,QAAS,OAAO3B,KAAsB4B,OAK1CC,GAAc,SAAC,GAAD,MAAUvoB,EAAV,EAAGvD,MAAH,OACZ,UAAAuD,EAAEoH,YAAF,eAAQ1M,QAEJ,kBAAC,KAAD,CACE0N,YAAWpI,EAAEoC,KACbgT,MAAOtK,GAAa9K,EAAE+K,SACtB0b,eAAgByB,GAAiBloB,EAAE7F,OAAS6F,EAAEoH,MAEhD,+B,UCZFohB,GAA6D,CACjEC,sBAAuB,cACvBC,mBAAoB,oBAGTC,GAAUrsB,GAAK,YAAsC,IAA5B0D,EAA2B,EAAlCvD,MAE3BmsB,EAAsB5oB,EAAE2e,QAAQ1iB,KAAI,gBAAGmG,EAAH,EAAGA,KAAH,MAAsB,CAAET,IAAKS,EAAMA,KAAnC,EAASiF,OAAyCjF,MACtFymB,EAAgBruB,EACdwF,EAAE2e,QACC3B,QAAO,kBAAG5a,EAAH,EAAGA,KAAH,iBAAcpC,EAAEue,cAAhB,aAAc,EAAUuK,SAAS1mB,MACxCnG,KAAI,gBAAGmG,EAAH,EAAGA,KAAH,MAAsB,CAAET,IAAKS,EAAMA,KAAnC,EAASiF,OAAyCjF,OAE3D2mB,EAAsB,SAACC,EAAoBC,GACzC,IAAKD,EAAY,MAAO,GAGxB,OAAOJ,EAAK5L,QAAO,SAAA3hB,GAAC,OAAkBA,EAAE+G,KADKkjB,cAAcwD,SAASE,EAAW1D,iBADrD,SAACjqB,GAAD,OAAoB4tB,GAAgBA,EAAaH,SAASztB,GAElC6tB,CAAkB7tB,OAEtEoiB,EAAW,SAAC9V,GACVkhB,EAAclhB,GAAS,IACvBnE,GAAG9H,KAAKsE,EAAEoC,MAAQuF,EAAQA,EAAM1L,KAAI,qBAAG0F,OAAiB,KACpD3B,EAAE4d,SAASpa,GAAGT,QAmBtB,MAAO,CAAE5F,KAjBA,kBAAMqG,GAAG9H,KAAKsE,EAAEoC,MAAQpC,EAAEue,QAAU,MAiB9BlhB,OAhBJ,kBACP,yBAAK+X,MAAOtK,GAAa9K,EAAE+K,UACxB/K,EAAEqH,OAAS,kBAAC,KAAD,KAAcrH,EAAEqH,OAC5B,kBAAC,KAAD,CACEwW,WAAY,CAAE,YAAa7d,EAAEoC,MAC7B+mB,sBAAsB,SACtBC,qBAAsBL,EACtBtL,SAAUA,EACV+K,uBAAwBA,GACxBa,UAAWrpB,EAAEspB,YACbC,cAAeV,IACfjM,SAAU5c,EAAE4c,aAKGiM,oB,UH9DvB/Y,GAAQC,KACRyZ,GAAO1Z,GAAME,OACbyZ,GAAQ,CACND,GAAKtc,KACLsc,GAAKld,KACLkd,GAAK7c,MACL6c,GAAK1c,MACL0c,GAAKxc,UACLwc,GAAKrd,OACLqd,GAAKhd,KACLgd,GAAK9c,KACL8c,GAAKtd,KACLsd,GAAKvc,Q,SAIJ6a,O,WAAAA,I,WAAAA,I,WAAAA,I,WAAAA,I,WAAAA,I,WAAAA,I,WAAAA,I,WAAAA,I,YAAAA,Q,KAqLL4B,aAAoB,YAAa,CAC/BjR,MAAO,CAAC,CAAEmF,QAAS,iBAAkB7jB,OAAQ,0BAC7C4vB,WAAY,CAAC,CAAE/L,QAAS,iBAAkB7jB,OAAQ,4BAA6B6vB,SAAU,CAAEC,KAAM,IAAKC,SAAS,EAAMC,UAAU,KAC/HrR,IAAK,CAAC,CAAEkF,QAAS,eAAgB7jB,OAAQ,0BAIpC,IAoBLiwB,GAAM,SAACvvB,GAAD,MAAsC,kBAANA,GAEtCwvB,GAAM,SAACxvB,GAAD,MAAsC,kBAANA,GACtCmI,GAAQ,SAAChF,GAAD,OAAUA,EAAE0V,OAAO1Q,MAAM,SACjCsnB,GAAY,SAACtsB,GAAD,OAAUgF,GAAMhF,GAAG3B,KAAI,SAAA2B,GAAC,OAAIE,SAASF,EAAG,QACpDusB,GAAiB,SAACC,EAAWrvB,GAAU,IAAD,gBACpBqvB,GADoB,IACpC,2BAAoB,CAAC,IAAV7rB,EAAS,QAClB,GAAIA,EAAG,CACL,IAAMX,EAAIW,EAAExD,GACR6C,GAAKqsB,GAAIrsB,KAAIW,EAAExD,GAAK,IAAI6lB,KAAKhjB,MAJD,gCAQtCysB,GAAiB,SAACD,EAAWE,EAAOC,EAAOxvB,GAAU,IAAD,gBAClCqvB,GADkC,IAClD,gCAAW7rB,EAAX,QAAwBA,IAAGA,EAAExD,GAAK,CAACwD,EAAE+rB,GAAK/rB,EAAEgsB,MADM,gCAGpDC,GAAa,SAAS5nB,MAAM,KAC5B6nB,GAAU7nB,GAAM,4BAChB8nB,GAAc,SAAC5oB,GAAD,OAAU0oB,GAAWvuB,KAAI,SAAA2B,GAAC,OAAIkE,EAAIlE,MAChD+sB,GAAmB,SAAC7oB,GAAD,OAAU2oB,GAAQxuB,KAAI,SAAA2B,GAAC,gBAAOkE,EAAP,YAAYlE,OACtDgtB,GAAmB,SAAC7uB,GAAD,OAAaA,EAAGE,KAAI,SAAAlB,GAAC,MAAK,CAACA,EAAGA,EAAI,SAAUA,EAAI,eACnE8vB,GAASD,GAAiBF,GAAY,MACtCI,GAASF,GAAiBF,GAAY,MACtCK,GAAcJ,GAAiB,KAC/BK,GAAcL,GAAiB,KAC/BM,GAAaL,GAAiBhoB,GAAM,iCACpCsoB,GAAY,sBAAOL,IAAP,YAAkBC,IAAlB,YAA6BG,KACzCE,GAAc,SAACf,EAAWgB,EAAeC,GACvC,IADoE,EAC9DtwB,EAAIswB,EAAO,SAAUztB,EAAIytB,EAAO,SAD8B,cAEjDD,GAFiD,IAEpE,2BAA0B,CAAC,IACnBprB,EADkB,QACDsrB,EAAQtrB,EAAEjF,GACjC,GAAc,SAD+BiF,EAAEpC,GACzB,MAAO,IAC7B,GAAIqsB,GAAIqB,GAAQ,CAAC,IAAD,gBACElB,GADF,IACd,2BAAoB,CAAC,IACbttB,EADY,QACNwuB,GACZ,GAAItB,GAAIltB,GAAI,MAAO,IACnB,GAAImtB,GAAIntB,GAAI,MAAO,KAJP,iCALkD,8BAapE,MAAO,KAETyuB,GAA2B,CACzBC,GAAI1D,GAAO2D,GAAIC,GAAI5D,GAAO6D,GAAIC,GAAI9D,GAAO+D,GACzCC,GAAIhE,GAAOiE,GAAIC,GAAIlE,GAAOmE,GAC1BC,GAAIpE,GAAOqE,GAAIC,GAAItE,GAAOuE,GAC1BC,GAAIxE,GAAOyE,GAAIC,GAAI1E,GAAO2E,IAE5BC,GAAkB,GAClBC,GAAiB,SAACrB,EAAUjuB,GAAX,OAAuD,SAACuvB,EAAY1oB,GACnF,IAAMzJ,EAAImyB,EAAQA,EAAMtB,GAASpnB,EACjC,OAAS,MAALzJ,GACFiyB,GAAWpB,GAAS7wB,EACb4C,EAAOqvB,KAET,KAETG,GAAgB,SAACC,GAEf,IADA,IAAM9sB,EAAS8sB,EACNjwB,EAAI,EAAGA,EAAIguB,GAAOnwB,OAAQmC,IAEjC,IADA,IAAMpC,EAAIowB,GAAOhuB,GAAItB,EAAIuvB,GAAOjuB,GACvBV,EAAI,EAAGA,EAAI1B,EAAEC,OAAQyB,IAAK,CACjC,IAAM4wB,EAAM/sB,EAAEvF,EAAE0B,IAChB6D,EAAEvF,EAAE0B,IAAM6D,EAAEzE,EAAEY,IACd6D,EAAEzE,EAAEY,IAAM4wB,EAGd,IAAK,IAAI5wB,EAAI,EAAGA,EAAI4uB,GAAYrwB,OAAQyB,IAAK,CAC3C,IAAM1B,EAAIswB,GAAY5uB,GAAIZ,EAAIyvB,GAAY7uB,GACpC4wB,EAAM/sB,EAAEvF,GACduF,EAAEvF,GAAKuF,EAAEzE,GACTyE,EAAEzE,GAAKwxB,IAGXC,GAAe,SAACF,GAEd,IAFsC,EAEhC9sB,EAAI8sB,EAF4B,cAGW5B,IAHX,IAGtC,2BAA+D,CAAC,IAAD,yBAAnD+B,EAAmD,KAAxCC,EAAwC,KAA7BC,EAA6B,KACvDC,EAAOptB,EAAEitB,GACf,GAAIhD,GAAImD,GAAO,CACb,IAAMC,EAAOxjB,GAAYujB,GACzB,GAAIC,EAAM,CAAC,IAAD,cACaA,EADb,GACD/B,EADC,KACMgC,EADN,KAERttB,EAAEitB,QAAatyB,EACfqF,EAAEktB,GAAa5B,EACXgC,IAAKttB,EAAEmtB,GAAcR,GAAerB,EAAOgC,OAXf,8BAetC,OAAOR,GAETS,GAAe,SAACnD,EAAWgB,GAA6B,IAAD,gBACrCA,GADqC,IACrD,2BAAuB,CAAC,IAAbprB,EAAY,QACrB,GAAkB,SAAdA,EAAEwtB,QAAoB,CAAC,IAAD,gBACYpC,GADZ,IACxB,2BAA2C,CAAC,IAAD,UAA9BqC,EAA8B,EAA9BA,QAASC,EAAqB,EAArBA,SAChBzD,GAAIwD,IAAUtD,GAAeC,EAAIqD,GACjCxD,GAAIyD,IAAWvD,GAAeC,EAAIsD,IAHhB,8BAKpBzD,GAAIjqB,EAAEvF,KAAIuF,EAAEvF,EAAI,IAAImmB,KAAK5gB,EAAEvF,IAC3BwvB,GAAIjqB,EAAE2tB,MAAK3tB,EAAE2tB,GAAK,IAAI/M,KAAK5gB,EAAE2tB,KACjC,QATiD,kDAYrCvC,GAZqC,IAYrD,2BAAuB,CAAC,IAAbprB,EAAY,QACrB,GAAkB,SAAdA,EAAE4tB,QAAoB,CAAC,IAAD,gBACYxC,GADZ,IACxB,2BAA2C,CAAC,IAAD,UAA9ByC,EAA8B,EAA9BA,QAASC,EAAqB,EAArBA,SAChB7D,GAAI4D,IAAU1D,GAAeC,EAAIyD,GACjC5D,GAAI6D,IAAW3D,GAAeC,EAAI0D,IAHhB,8BAKpB7D,GAAIjqB,EAAEzE,KAAIyE,EAAEzE,EAAI,IAAIqlB,KAAK5gB,EAAEzE,IAC3B0uB,GAAIjqB,EAAE+tB,MAAK/tB,EAAE+tB,GAAK,IAAInN,KAAK5gB,EAAE+tB,KACjC,QApBiD,kDAuBjB3C,GAvBiB,IAuBrD,2BAA2C,CAAC,IAAD,UAA9BqC,EAA8B,EAA9BA,QAASC,EAAqB,EAArBA,SAChBzD,GAAIwD,IAAYxD,GAAIyD,IACtBrD,GAAeD,EAAIsD,EAAUD,EAASA,IAzBW,kDA4BjBrC,GA5BiB,IA4BrD,2BAA2C,CAAC,IAAD,UAA9ByC,EAA8B,EAA9BA,QAASC,EAAqB,EAArBA,SAChB7D,GAAI4D,IAAY5D,GAAI6D,IACtBzD,GAAeD,EAAI0D,EAAUD,EAASA,IA9BW,kDAiClCzC,GAjCkC,IAiCrD,2BAA0B,CAAC,IAAhB0B,EAAe,QAChB3yB,EAAsC2yB,EAAtC3yB,KAAM6zB,EAAgClB,EAAhCkB,SAAUC,EAAsBnB,EAAtBmB,SAAUJ,EAAYf,EAAZe,QACrB,aAAT1zB,GAAuB8vB,GAAI+D,IAAa/D,GAAIgE,IAAahE,GAAI4D,KAC/Df,EAAKW,QAAUO,EAAW,MAAQC,EAClC5D,GAAeD,EAAI4D,EAAUC,EAAUnB,EAAKW,WArCK,kDAwClCrC,GAxCkC,IAwCrD,2BAA0B,CAAC,IAAhB0B,EAAe,QAChB3yB,EAAsC2yB,EAAtC3yB,KAAM+zB,EAAgCpB,EAAhCoB,SAAUC,EAAsBrB,EAAtBqB,SAAUV,EAAYX,EAAZW,QACrB,aAATtzB,GAAuB8vB,GAAIiE,IAAajE,GAAIkE,IAAalE,GAAIwD,KAC/DX,EAAKe,QAAUK,EAAW,MAAQC,EAClC9D,GAAeD,EAAI8D,EAAUC,EAAUrB,EAAKe,WA5CK,8BA+CrD,OAAOzD,GAETgE,GAAW,SAAC,GAMqB,IAL/B3zB,EAK8B,EAL9BA,EAAGkzB,EAK2B,EAL3BA,GAAIpyB,EAKuB,EALvBA,EAAGwyB,EAKoB,EALpBA,GAAI1mB,EAKgB,EALhBA,MACdgnB,EAI8B,EAJ9BA,WAAYC,EAIkB,EAJlBA,aAAcC,EAII,EAJJA,aAAcC,EAIV,EAJUA,eAAgBC,EAI1B,EAJ0BA,YAAaC,EAIvC,EAJuCA,YACrEC,EAG8B,EAH9BA,iBAAkBC,EAGY,EAHZA,mBAAoBC,EAGR,EAHQA,gBAAiBC,EAGzB,EAHyBA,gBACvDC,EAE8B,EAF9BA,iBAAkBC,EAEY,EAFZA,mBAAoBC,EAER,EAFQA,mBAAoBC,EAE5B,EAF4BA,qBAAsBC,EAElD,EAFkDA,kBAChFC,EAC8B,EAD9BA,gBAAiBC,EACa,EADbA,kBAAmBC,EACN,EADMA,kBAAmBC,EACzB,EADyBA,YAMrDC,EAAaC,GACXV,EAAkBC,EAAoBC,EAAoBC,EAAsBC,EAChFC,EAAiBC,EAAmBC,EAAmBC,GAEzDG,EAAaC,GAAetB,EAAYC,EAAcC,EAAcC,EAAgBC,EAAaC,GACjGkB,EAAYD,QAAeh1B,OAAWA,EAAWg0B,EAAkBC,EAAoBE,EAAiBD,GAE1G,OAAS,MAALp0B,GAAkB,MAALc,EACL,MAANoyB,GAAoB,MAANI,EAQT,CAP0B,CAC/B5zB,KAAM,SACNse,MAAO,CAACkV,EAAII,GACZrV,IAAK,CAACje,EAAGc,GACT6L,KAAM6iB,GAAI5iB,GAAS,CAAEgU,QAAShU,EAAO+N,MAAOoa,QAAe70B,EAC3Dya,MAAOsa,IAWF,CAP0B,CAC/Bv1B,KAAM,aACNoM,SAAU,CAAC9L,EAAGc,GACd6L,KAAM6iB,GAAI5iB,GAAS,CAAEgU,QAAShU,EAAO+N,MAAOoa,GAAe,KAC3DK,MAAO,CAAEza,MAAOsa,GAChB/pB,KAAM,CAAEyP,MAAOwa,KAIL,MAALn1B,EACC,MAANkzB,EAQK,CAP0B,CAC/BxzB,KAAM,SACNse,MAAO,CAACkV,EAAI,OACZjV,IAAK,CAACje,EAAG,OACT2M,KAAM6iB,GAAI5iB,GAAS,CAAEgU,QAAShU,EAAO+N,MAAOoa,GAAe,KAC3Dpa,MAAOsa,IAWF,CAPkB,CACvBv1B,KAAM,OACNse,MAAO,CAAChe,EAAG,OACXie,IAAK,CAACje,EAAG,OACT2M,KAAM6iB,GAAI5iB,GAAS,CAAEgU,QAAShU,EAAO+N,MAAOoa,EAAYjpB,SAAU,cAAY5L,EAC9Eya,MAAOwa,IAKD,MAAN7B,EAQK,CAP0B,CAC/B5zB,KAAM,SACNse,MAAO,CAAC,MAAOsV,GACfrV,IAAK,CAAC,MAAOnd,GACb6L,KAAM6iB,GAAI5iB,GAAS,CAAEgU,QAAShU,EAAO+N,MAAOoa,GAAe,KAC3Dpa,MAAOsa,IAYF,CAPkB,CACvBv1B,KAAM,OACNse,MAAO,CAAC,MAAOld,GACfmd,IAAK,CAAC,MAAOnd,GACb6L,KAAM6iB,GAAI5iB,GAAS,CAAEgU,QAAShU,EAAO+N,MAAOoa,EAAYjpB,SAAU,cAAY5L,EAC9Eya,MAAOwa,KAMfE,GAAW,SAAC,GAYoB,IAX9B31B,EAW6B,EAX7BA,KAAMszB,EAWuB,EAXvBA,QAASI,EAWc,EAXdA,QACfkC,EAU6B,EAV7BA,YAAaC,EAUgB,EAVhBA,YAAaC,EAUG,EAVHA,aAAcxlB,EAUX,EAVWA,MACxCylB,EAS6B,EAT7BA,YAAaC,EASgB,EAThBA,YAAaC,EASG,EATHA,MAC1BC,EAQ6B,EAR7BA,WAAYC,EAQiB,EARjBA,WAAY9iB,EAQK,EARLA,KACxB+iB,EAO6B,EAP7BA,MACAC,EAM6B,EAN7BA,MAAOC,EAMsB,EANtBA,YACPC,EAK6B,EAL7BA,MACArC,EAI6B,EAJ7BA,WAAYC,EAIiB,EAJjBA,aAAcC,EAIG,EAJHA,aAAcC,EAIX,EAJWA,eAAgBE,EAI3B,EAJ2BA,YAAaD,EAIxC,EAJwCA,YACrEkC,EAG6B,EAH7BA,YAAaC,EAGgB,EAHhBA,aAAcC,EAGE,EAHFA,aAAcC,EAGZ,EAHYA,eAAgBC,EAG5B,EAH4BA,eAAgBC,EAG5C,EAH4CA,eAAgBC,EAG5D,EAH4DA,eAAgBC,EAG5E,EAH4EA,cACzGnC,EAE6B,EAF7BA,iBAAkBC,EAEW,EAFXA,mBAAoBC,EAET,EAFSA,mBAAoBC,EAE7B,EAF6BA,qBAAsBC,EAEnD,EAFmDA,kBAChFC,EAC6B,EAD7BA,gBAAiBC,EACY,EADZA,kBAAmBC,EACP,EADOA,kBAAmBC,EAC1B,EAD0BA,YAEjD5N,EAAoB,GACtBsI,GAAI9vB,KAAOwnB,EAAExnB,KAAOA,GAExB,IAAMg3B,EAAyB,GAU/B,GARIlH,GAAIwG,GACNU,EAAOh2B,KAAK,CAAEhB,KAAM,QAASi3B,YAAa,EAAGC,QAASZ,IACnC,SAAVD,GACTW,EAAOh2B,KAAK,CAAEhB,KAAM,QAASi3B,YAAa,IAE9B,SAAVb,GAAkBY,EAAOh2B,KAAK,CAAEhB,KAAM,UACtCg3B,EAAOz2B,SAAQinB,EAAEwP,OAASA,GAC1BlH,GAAIwD,IAAYxD,GAAI4D,KAAUlM,EAAEpb,SAAW,CAAExH,OAAQ,CAAC0uB,EAASI,KAC/D5D,GAAI8F,GAAc,CACpB,IAAM/f,EAASia,GAAI+F,GAAeptB,GAAMotB,GAAevG,GAEvD,GADA9H,EAAElX,MAAQ,CAAE1L,OAAQ,CAACgxB,GAAcxR,OAAQvO,GACvCigB,GAAgBA,EAAav1B,QAAUsV,EAAOtV,OAAQ,CACxD,IAAM42B,EAAgBrB,EAAaxK,QAAO,SAAC8L,EAAKrtB,EAAO/H,GAErD,OADAo1B,EAAIrtB,GAAS8L,EAAO7T,GACbo1B,IACN,IACH5P,EAAElX,MAAM+mB,SAAW,SAAC/2B,GAAD,OAAU62B,EAAc72B,UAG7CknB,EAAElX,MAAQwf,GAAIxf,GAASA,EAAQqF,GAAME,OAAO9C,KAoB9C,GAlBI+c,GAAIiG,GACFjG,GAAIkG,GACNxO,EAAEyO,MAAQ,CAAErxB,OAAQ,CAACmxB,GAAc3R,OAAQ3b,GAAMutB,IAEjDxO,EAAEyO,MAAQ,CAAErxB,OAAQ,CAACmxB,IAEdjG,GAAImG,KACbzO,EAAEyO,MAAQA,GAERnG,GAAIoG,GACFpG,GAAIqG,GACN3O,EAAEnU,KAAO,CAAEzO,OAAQ,CAACsxB,GAAa9R,OAAQ2L,GAAUoG,IAEnD3O,EAAEnU,KAAO,CAAEzO,OAAQ,CAACsxB,IAEbrG,GAAIxc,KACbmU,EAAEnU,KAAOA,GAEPyc,GAAI0G,GAAc,CACpB,IAAMvS,EAASqR,GACbV,EAAkBC,EAAoBC,EAAoBC,EAAsBC,EAChFC,EAAiBC,EAAmBC,EAAmBC,GAEnD9tB,EAAe,GAErB,OADI2c,IAAQ3c,EAAE2T,MAAQgJ,GACd8S,GACN,IAAK,OAAQzvB,EAAE+V,OAAS,CAAErd,KAAM,WAAa,MAC7C,IAAK,UAAWsH,EAAE+V,OAAS,CAAErd,KAAM,gBAAkB,MACrD,IAAK,YAAasH,EAAE+V,OAAS,CAAErd,KAAM,gBAKvC,GAHI6vB,GAAI6G,KAAepvB,EAAEgwB,OAASZ,GAC9B7G,GAAI8G,KAAiBrvB,EAAEiwB,QAAUZ,GACjC9G,GAAI+G,KAAiBtvB,EAAEkwB,QAAUZ,GACjC9G,GAAI+G,GAAiB,CACvB,IAAMY,EAAmBj0B,EAAOqzB,GAC5B/yB,MAAM2zB,GACRnwB,EAAEowB,WAAgC,SAAnBb,EAEfvvB,EAAEqwB,OAASF,EAAmB/jB,KAAKkkB,GAAK,IAG5C,OAAQd,GACN,IAAK,MAAO,IAAK,SAAU,IAAK,SAAU,IAAK,OAAQ,IAAK,QAASxvB,EAAE8E,SAAW0qB,EAIlFtP,EAAEta,MADAupB,EACQ,CACR7xB,OAAQ,CAAC4xB,GACTa,SAAU,SAACnqB,GAAD,MAAY,CAAEgU,QAASuV,EAAa,KAAMvpB,MAG5C,CAAEtI,OAAQ,CAAC4xB,IAGnBh0B,OAAOC,KAAK6E,GAAG/G,SAAQinB,EAAEta,MAAM2qB,IAAMvwB,GAE3C,GAAIwoB,GAAIyG,GACN,OAAQA,GACN,IAAK,SAAU/O,EAAEyO,MAAQ,SAAU,MACnC,IAAK,cAAezO,EAAEyO,MAAQ,KAAM,MACpC,IAAK,OAAQzO,EAAEyO,MAAQ,MAAO,MAC9B,IAAK,aAAczO,EAAEyO,MAAQ,KAGjC,IAAMhb,EAAQua,GAAetB,EAAYC,EAAcC,EAAcC,EAAgBC,EAAaC,GAGlG,OAFItZ,IAAOuM,EAAEvM,MAAQA,GAEduM,GAETgO,GAAiB,SAACtB,EAAgBC,EAAkBC,EAAkBC,EAAoBC,EAAiBC,GACzG,IAAM9wB,EAAe,GAOrB,OANIqsB,GAAIoE,KAAazwB,EAAEq0B,KAAO5D,GAC1BrE,GAAIsE,KAAe1wB,EAAEs0B,YAAc5D,GACnCrE,GAAIsE,KAAe3wB,EAAEu0B,OAAS5D,GAC9BvE,GAAIwE,KAAiB5wB,EAAEw0B,cAAgB5D,GACvCxE,GAAIyE,KAAc7wB,EAAEy0B,UAAY5D,GAChCxE,GAAIyE,KAAc9wB,EAAE00B,SAAWpI,GAAUwE,IACtC/xB,OAAOC,KAAKgB,GAAGlD,OAASkD,OAAIjD,GAErC80B,GAAgB,SAACpB,EAAgBC,EAAkBC,EAAkBC,EAAoBC,EAAiB8D,EAAeC,EAAiBC,EAAiBpZ,GACzJ,IAAMzb,EAAe,GAOrB,GANIqsB,GAAIoE,KAAazwB,EAAEq0B,KAAO5D,GAC1BrE,GAAIsE,KAAe1wB,EAAEs0B,YAAc5D,GACnCrE,GAAIsE,KAAe3wB,EAAEu0B,OAAS5D,GAC9BvE,GAAIwE,KAAiB5wB,EAAEw0B,cAAgB5D,GACvCxE,GAAIyE,KAAc7wB,EAAEy0B,UAAY5D,GAChCzE,GAAIuI,KAAY30B,EAAE8P,SAAW6kB,GAC7BtI,GAAIuI,GAAc,CACpB,IAAME,EAAgB10B,EAAOw0B,GAC7B50B,EAAEyR,WAAapR,MAAMy0B,GAAiBF,EAAcE,EAItD,OAFI1I,GAAIyI,KAAc70B,EAAEgQ,WAAa6kB,GACjCxI,GAAI5Q,KAAQzb,EAAEse,UAAY7C,GACvB1c,OAAOC,KAAKgB,GAAGlD,OAASkD,OAAIjD,GAkCrCg4B,GAAY,SAACC,EAAoB3oB,EAAyBzC,EAAsB0M,EAAwByD,EAAwBkb,GAC9H,IACE/f,EAAqB,GACrBggB,EAAmB,CAAEzrB,MAAO,CAAE0rB,UAAU,IAY1C,OAXI9I,GAAI2I,KAAM9f,EAAM3Y,KAXP,SAACkB,GACd,OAAQA,GACN,IAAK,gBAAiB,MAAO,UAC7B,IAAK,QAAS,MAAO,MAEvB,OAAOA,EAMoB23B,CAAaJ,IACpC3oB,IAAQ6I,EAAMmgB,UAAY,SAACn2B,GAAD,OAAYmN,OAAOtP,EAAWmC,KACxDmtB,GAAIziB,KACNsL,EAAMogB,MAAQ1rB,EAGdsrB,EAAKtrB,MAAQ,IAEXwiB,GAAI9V,KAAMpB,EAAMoB,IAAMA,GACtB8V,GAAIrS,KAAM7E,EAAM6E,IAAMA,GAC1B7E,EAAM+f,KAhZqC,mBAgZ1BA,GAAQA,EAClB,CAAC/f,EAAOggB,IAMjBK,GAAY,SAACC,EAAehI,GAO1B,IACEjxB,EAZW,SAACixB,GAAkC,IAAD,gBACvBA,GADuB,IAC/C,gCAAaiI,EAAb,QAAaA,MAAkB,GAAIpJ,GAAIoJ,GAAQ,OAAOA,GADP,+BAYtCC,CAAalI,GACpBmI,EAAYH,IAAUtL,GAAOmE,GAC7BuH,EAA2CD,EAAY,CAAC,CAAC,mBAAgB54B,EAE3E,GAAI44B,EAAJ,qBAAkCnI,GAAlC,IAAe,gCAAW0B,EAAX,QAA0BD,GAAcC,IAAvD,+BAEA,OACE3yB,EACIq5B,EAAU,CAAEr5B,OAAMq5B,WAAY,CAAEr5B,QAChCq5B,EAAU,CAAEA,gBAAY74B,GAmBhC84B,GAAY,SAACC,EAAiBN,EAAehI,GAGzC,IAAAuI,EAAaR,GAAUC,EAAOhI,GAA9B,EA5FS,SAACA,GACZ,IADkF,EAEhFwI,EAAiC,GACjCC,EAA8B,GAHkD,cAKlEzI,GALkE,IAKlF,2BAAuB,CAAC,IAAbprB,EAAY,QACrB,GAAIA,EAAEytB,QAAS,CAAC,IAAD,EACakF,GAAU3yB,EAAEwtB,QAASxtB,EAAE8zB,SAAU9zB,EAAE+zB,QAAS/zB,EAAEg0B,MAAOh0B,EAAEi0B,MAAOj0B,EAAEk0B,QAD7E,mBACN1G,EADM,KACG2G,EADH,KAEbP,EAAO5zB,EAAEytB,SAAWD,EAChB2G,IAAQN,EAAK7zB,EAAEytB,SAAW0G,GAC9B,QAV8E,kDAclE/I,GAdkE,IAclF,2BAAuB,CAAC,IAAbprB,EAAY,QACrB,GAAIA,EAAE6tB,QAAS,CAAC,IAAD,EACa8E,GAAU3yB,EAAE4tB,QAAS5tB,EAAEo0B,SAAUp0B,EAAEq0B,QAASr0B,EAAEs0B,MAAOt0B,EAAEu0B,MAAOv0B,EAAEw0B,QAD7E,mBACN5G,EADM,KACG6G,EADH,KAEbb,EAAO5zB,EAAE6tB,SAAWD,EAChB6G,IAAQZ,EAAK7zB,EAAE6tB,SAAW4G,GAC9B,QAnB8E,8BAuBlF,MAAO,CAACb,EAAQC,GAsEGa,CAAWtJ,GAD5B,mBACCwI,EADD,KACSC,EADT,OAnBQ,SAACzI,GACX,IADqE,EAEnEuJ,EAA+B,GAC/BC,EAAkC,GAHiC,cAKrDxJ,GALqD,IAKrE,2BAAuB,CAAC,IAAbprB,EAAY,QACbvF,EAASuF,EAATvF,EAAGc,EAAMyE,EAANzE,EACF,MAALd,GAAkB,MAALc,EACfq5B,EAAYz5B,KAAZ,MAAAy5B,EAAW,YAASxG,GAASpuB,KAE7B20B,EAAWx5B,KAAK20B,GAAS9vB,KAVwC,8BAcrE,MAAO,CAAC20B,EAAYC,GAOUC,CAAUzJ,GAFtC,mBAIF,MAAO,CACLpP,UAAW0X,EACXoB,SAAS,EACTzV,QAAS,CACP0V,SAAS,EACTpB,aACAC,SACAC,OACAc,WAZF,KAaEC,YAbF,KAcEI,aAAc,CACZ,CAAE76B,KAAM,aACR,CAAEA,KAAM,cAEV+iB,QAAS,CACP+X,gBAAgB,EAChBC,WAAY,CAAE/6B,KAAM,UAQ5BlB,GAAMC,YAAW,CACfsO,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAEhBylB,KAAM,CACJ5uB,SAAU,WACViM,KAAM,EAAGhM,IAAK,GAAIC,MAAO,EAAGiN,OAAQ,KAuBxC0hB,GAAiB94B,GAAK,YAA0C,IAAvCG,EAAsC,EAAtCA,MAErB44B,EAA6B,KAC7BC,EAA2B,KAE3BtZ,EAAY1e,IAAMi4B,YAuDpB,MAAO,CAAEp4B,KAtDA,WACL,IAAMu2B,EAAK1X,EAAUwZ,QACrB,GAAK9B,EAAL,CACA,IACE+B,EAAWv3B,EAAczB,EAAM0B,MAE/BitB,EADWltB,EAAazB,EAAM04B,MACb/J,MAAMnvB,IAAI+wB,IAC3BmI,EAAa,CAAE/J,MAAOA,GACtBgI,EA1hBM,SAAChJ,EAAWgB,GAAZ,OAAsCG,GAAWJ,GAAYf,EAAIgB,EAAO,KAAOD,GAAYf,EAAIgB,EAAO,MA0hBpGsK,CAAYD,EAAUrK,GAC9BjtB,EAAOovB,GAAakI,EAAUN,EAAK/J,OACnCuK,EAAQR,EAAK/J,MAAQ,IAAIwK,KAAMnC,GAAUC,EAAIN,EAAO+B,EAAK/J,QAAU,KAErE,GADAkK,EAAcH,EACVQ,EAAO,CAGT,GAFAN,EAAeM,EACfA,EAAMx3B,KAAKA,GACP1B,EAAMkH,OAAQ,CAAC,IAAD,gBACIlH,EAAMkH,QADV,IAChB,2BAAkC,CAChC,OADgC,SAE9B,IAAK,eACHgyB,EAAME,YAAY,2BAClBF,EAAM76B,GAAG,uBAAuB,SAACg7B,GAC/B,IAEkB,EAFZl3B,EAAIk3B,EAAGC,OAAOC,cAChBp3B,EAAEq3B,cACAx5B,EAAM2F,OACRoB,GAAGG,OAAOlH,EAAM2F,MAAQ,CAAE8zB,aAAc,WAACt3B,EAAEqd,eAAH,aAAC,EAAW9d,OACpDqF,GAAGT,cAVC,+BAkBlB4yB,EAAMt4B,YAqBGD,OAlBJ,WAEP,GADW4e,EAAUwZ,SACTH,GAAiBC,EAA7B,CACA,IACEG,EAAWv3B,EAAOzB,EAAM0B,MACxBA,EAAOovB,GAAakI,EAAUH,EAAYlK,OAC5CiK,EAAac,WAAWh4B,KAYLd,OAVZ,WAAO,IAEVjE,EAAiCqD,EAAjCrD,MAAOuN,EAA0BlK,EAA1BkK,OAAQoE,EAAkBtO,EAAlBsO,QAAS3I,EAAS3F,EAAT2F,KAC1BgT,EAAwC,SAAVhc,GAA+B,SAAXuN,EAC9C,CAAEJ,SAAU,WAAYiM,KAAM,EAAGhM,IAAK,EAAGC,MAAO,EAAGiN,OAAQ,GAC3D,CAAEta,MAAOA,GAAS,OAAQuN,OAAQA,GAAU,SAClD,OACE,yBAAKyB,YAAWhG,EAAMgT,MAAK,2BAAOA,GAAUtK,GAAaC,IAAY9G,IAAK+X,SAmBlF1F,GAAOha,GAAK,YAA4C,IAAzC8F,EAAwC,EAAxCA,KAAMnF,EAAkC,EAAlCA,MAanB,MAAO,CAAEI,OAXE,WAAO,IACNmK,EAA8BvK,EAA9BuK,MAAO2tB,EAAuBl4B,EAAvBk4B,KAAMh3B,EAAiBlB,EAAjBkB,KAAMwF,EAAW1G,EAAX0G,OAC3B,OACE,6BACE,yBAAK3J,UAAWf,GAAIuO,OAAQA,GAAS,YACrC,yBAAKxN,UAAWf,GAAIk8B,MAClB,kBAACC,GAAD,CAAgB34B,MAAO,CAAE2F,OAAM+yB,OAAMh3B,OAAM/E,MAAO,OAAQuN,OAAQ,OAAQhD,eAKnEtB,QAboC,EAA3BA,YAgB9BI,GAAMiP,SAAS,OAAQ4E,IIvxBhB,IACL8f,GAAY,SAAC,GAAoC,IAAlC35B,EAAiC,EAAjCA,MAET4K,EAA4D5K,EAA5D4K,MAF0C,EAEkB5K,EAArDgL,eAFmC,MAEzB,iBAFyB,EAEPvD,EAAyBzH,EAAzByH,MAAO6G,EAAkBtO,EAAlBsO,QAAS3I,EAAS3F,EAAT2F,KACvD,OACE,yBAAKgG,YAAWhG,EAAMgT,MAAOtK,GAAaC,IACxC,kBAAC,KAAD,CACE1D,MAAOA,EACPyf,YAAarf,EACbsf,gBAAiB7iB,M,qBCzCzBjL,I,OAAMC,YAAW,CACfm9B,QAAS,CACPhP,UAAW,oBAEbrL,UAAW,CACTpV,QAASA,GAAQ,EAAG,GACpBF,MAAO,CACL,eAAgB,CACd2gB,UAAW,GACXhP,aAAc,GACd3R,MAAO,CACL,YAAa,CACX4vB,YAAa,EACbC,aAAc,GACdC,YAAatrB,GAAQqG,eACrBqR,WAAY1X,GAAQuG,MACpBrY,MAAO,GACPuN,OAAQ,GACRK,UAAW,aACXC,OAAQ,UACRP,MAAO,CACL,WAAY,CACV+vB,UAAW,UAIjB,WAAY,CACVC,WAAY,UACZhpB,SAAU,GACV2B,WAAY,KAEd,qBAAsB,CACpB5E,MAAOS,GAAQqG,gBAEjB,WAAY,CACV5K,OAAQ,EACR4vB,aAAc,EACd3T,WAAY1X,GAAQiG,mBACpBlK,OAAQ,UACRP,MAAO,CACL,YAAa,CACXkc,WAAY1X,GAAQmG,wBAQlCuL,SAAU,CACR1V,QAAS,OAqCFyvB,GAAer6B,GAAK,YAA2C,IAAjC0D,EAAgC,EAAvCvD,MAAuC,EAEpCuD,EAAjCkU,WAFqE,MAE/D,EAF+D,IAEpClU,EAAxB2X,WAF4D,MAEtD,IAFsD,IAEpC3X,EAAb42B,YAFiD,MAE1C,EAF0C,EAGvE1yB,EAAQ,CACNgQ,IAAMlU,EAAE62B,WAAa72B,EAAE62B,UAAY3iB,GAAOlU,EAAE62B,WAAalf,EAAO3X,EAAE62B,UAAY3iB,EAC9EyD,IAAM3X,EAAE82B,WAAa92B,EAAE82B,UAAY5iB,GAAOlU,EAAE82B,WAAanf,EAAO3X,EAAE82B,UAAYnf,GAGlFnU,GAAG9H,KAAKsE,EAAEoC,MAAQzF,OAAO4hB,OAAOra,GAEhC,IACE6yB,EAASv8B,EAAW0J,GACpBuZ,EAAW,SAACuZ,GACVD,EAAOC,GACPxzB,GAAG9H,KAAKsE,EAAEoC,MAAQzF,OAAO4hB,OAAOyY,GAC5Bh3B,EAAE4d,SAASpa,GAAGT,QAUtB,MAAO,CAAE1F,OARE,kBACP,yBAAK+K,YAAWpI,EAAEoC,KAAMpI,UAAWf,GAAIo9B,QAASjhB,MAAOtK,GAAa9K,EAAE+K,UACnE/K,EAAEqH,OAAS,kBAAC,KAAD,CAAcuV,SAAU5c,EAAE4c,UAAW5c,EAAEqH,OACnD,yBAAKrN,UAAS,UAAKf,GAAI+iB,UAAT,YAAsBhc,EAAE4c,SAAW3jB,GAAI2jB,SAAW,KAC9D,kBAAC,KAAD,CAAYqa,SAAUtf,EAAKuf,SAAUhjB,EAAK0iB,KAAMA,EAAMha,SAAU5c,EAAE4c,SAAUua,iBAAe,EAACjzB,MAAO6yB,IAAUtZ,SAAUA,OAI9GsZ,aClHjB99B,GAAMC,YAAW,CACfk+B,UAAW,CACTpwB,UAAW,gBAmBfqwB,GAAa,SAAC,GAAD,IAAUr3B,EAAV,EAAGvD,MAAH,OACX,yBAAK2L,YAAWpI,EAAEoC,KAAMpI,UAAWf,GAAIm+B,UAAWhiB,MAAOtK,GAAa9K,EAAE+K,UACtE,kBAAC,KAAD,KAAmB/K,EAAEqH,S,UCezBiwB,GAAUh7B,GAAK,YAAsC,IAA5B0D,EAA2B,EAAlCvD,MAAkC,EAEFuD,EAA5CkU,WAF8C,MAExC,EAFwC,IAEFlU,EAAnC2X,WAFqC,MAE/B,IAF+B,IAEF3X,EAAxB42B,YAF0B,MAEnB,EAFmB,IAEF52B,EAAdkE,aAFgB,MAER,EAFQ,EAGhD+N,EAAgB/N,EAAQgQ,EAAOA,EAAQhQ,EAAQyT,EAAOA,EAAMzT,EAC9DV,GAAG9H,KAAKsE,EAAEoC,MAAQ6P,EAClB,IACEwL,EAAW,SAAC3gB,GAAD,OAAe0G,GAAG9H,KAAKsE,EAAEoC,MAAQtF,GAC5Cy6B,EAAY,SAACC,EAAiDC,GAAyBz3B,EAAE4d,SAASpa,GAAGT,QAmBvG,MAAO,CAAE1F,OAlBE,kBACP,kBAAC,KAAD,CACE+K,YAAWpI,EAAEoC,KACbgc,OAAQ,CAAEC,KAAMvT,GAAa9K,EAAE+K,UAC/B2sB,YAAa,CAAE,YAAa13B,EAAEoC,MAC9BiF,MAAOrH,EAAEqH,MACT6M,IAAKA,EACLyD,IAAKA,EACLif,KAAMA,EACN3kB,aAAcA,EACd0lB,WAAW,EACXC,eAAgB1jB,EAAM,GAAKyD,GAAO,EAClC8F,SAAUA,EACV8Z,UAAWA,EACX3a,SAAU5c,EAAE4c,gB,UClCpBib,GAAWv7B,GAAK,YAAuC,IAA7B0D,EAA4B,EAAnCvD,MAAmC,EAEJuD,EAA5CkU,WAFgD,MAE1C,EAF0C,IAEJlU,EAAnC2X,WAFuC,MAEjC,IAFiC,IAEJ3X,EAAxB42B,YAF4B,MAErB,EAFqB,IAEJ52B,EAAdkE,aAFkB,MAEV,EAFU,EAGlD+N,EAAgB/N,EAAQgQ,EAAOA,EAAQhQ,EAAQyT,EAAOA,EAAMzT,EAE9DV,GAAG9H,KAAKsE,EAAEoC,MAAQ6P,EAElB,IACE6lB,EAAa,SAACh7B,GACZ,IAAMrC,EAAIs9B,WAAWj7B,GACrB,OAASmB,MAAMxD,IAAMu9B,SAASv9B,GAAMA,EAAIyJ,GAE1C+zB,EAAS,SAACr5B,GACR4E,GAAG9H,KAAKsE,EAAEoC,MAAQ01B,EAAWl5B,EAAEmI,OAAO7C,QAExCg0B,EAAc,SAACp7B,GACb,IACEoH,EAAQ4zB,EAAWh7B,GACnBq7B,EAAYj0B,EAAQ0yB,EAAOjf,EAAOA,EAAMzT,EAAQ0yB,EAElD,OADApzB,GAAG9H,KAAKsE,EAAEoC,MAAQ+1B,EACXC,OAAOD,IAEhBE,EAAc,SAACv7B,GACb,IACEoH,EAAQ4zB,EAAWh7B,GACnBq7B,EAAYj0B,EAAQ0yB,EAAO1iB,EAAOA,EAAMhQ,EAAQ0yB,EAElD,OADApzB,GAAG9H,KAAKsE,EAAEoC,MAAQ+1B,EACXC,OAAOD,IAiBlB,MAAO,CAAE96B,OAfE,kBACP,kBAAC,KAAD,CACE+gB,OAAQ,CAAEC,KAAMvT,GAAa9K,EAAE+K,UAC/B8S,WAAY,CAAE,YAAa7d,EAAEoC,MAC7BiF,MAAOrH,EAAEqH,MACT6M,IAAKA,EACLyD,IAAKA,EACLif,KAAMA,EACN3kB,aAAY,UAAK/N,GACjB+zB,OAAQA,EACRC,YAAaA,EACbG,YAAaA,EACbzb,SAAU5c,EAAE4c,gBCxClB5M,GAAWD,KAAXC,OACF/W,GAAMC,YAAW,CACfo/B,WAAY,CACV1V,WAAY5S,GAAO5I,KACnBqD,MAAOuF,GAAOrN,KACdpJ,WAAY,SACZg9B,aAAc,MACdj9B,QAAS,cACTE,eAAgB,SAChBkU,SAAUtD,GAAI,IACdzD,OAAQ,GACR+T,SAAU,GACVthB,MAAO,IAETwjB,SAAU,CACR1V,QAAS,MAGbqxB,GAAiC,CAAEla,KAAM,CAAE3Q,SAAU,KAGrD8qB,GAAWl8B,GAAK,YAAuC,IAA7B0D,EAA4B,EAAnCvD,MAEfg8B,EAAQz4B,EAAE2H,MAEV+wB,EAAa,SAAC9B,EAAYz6B,GAAb,OACX,kBAAC,IAAMw8B,SAAP,CAAgBh3B,IAAKxF,GACnB,kBAAC,KAAD,CAAcghB,YAAU,EAACC,gBAAgB,gBAAgB4J,cAAc,SAAS7P,KAAM,GACpF,kBAAC,KAAD,CACEnd,UAAY48B,EAAKgC,KAA2B,IALlCC,EAK6B18B,EALd08B,EAAU,IAAMJ,EAAMI,EAAU,GAAGD,KAAO3/B,GAAI2jB,SAAW,IAMlFQ,gBAAgB,SAChBgB,OAAQ,CAAEC,KAAM,CAAEya,aAAc,GAAIvW,YAAa,MAG/CqU,EAAKgC,KACD,kBAAC,IAAD,CAAaxa,OAAQma,GAAYhxB,SAAS,mBAC1CqvB,EAAK/vB,KACH,kBAAC,IAAD,CAAauX,OAAQma,GAAYhxB,SAAUqvB,EAAK/vB,OAChD,0BAAM7M,UAAWf,GAAIq/B,YAAan8B,EAAI,GAE9C,kBAAC,KAAD,CAAa48B,OAAK,EAAC7R,QAAM,EAAC9I,OAAQ,CAAEC,KAAM,CAAEzX,QAAS,MAASgwB,EAAKvvB,SAGrEoxB,EAAM/9B,OAAS,IAAOyB,GAAK,kBAAC,KAAD,CAAkBiiB,OAAQ,CAAEC,KAAM,CAAEjlB,MAAO,YAnB3D,IAACy/B,GAkCpB,MAAO,CAAEx7B,OAZE,kBACP,kBAAC,KAAD,CACE+X,MAAOtK,GAAa9K,EAAE+K,SACtB3C,YAAWpI,EAAEoC,KACb+a,YAAU,EACVC,gBAAgB,gBAChB4J,cAAc,UAEbyR,EAAMx8B,IAAIy8B,S,kJC7ERM,GAAc,SAAC,GAA8C,IAA5CxrB,EAA2C,EAA3CA,KAAMhD,EAAqC,EAArCA,UAAWC,EAA0B,EAA1BA,MAAOvG,EAAmB,EAAnBA,MAElD+0B,EAAczrB,EAAO,EACrB0rB,EAAc1rB,EAAO,EAAIhD,EACzBiJ,EAAO0lB,OAAS,CACdF,cACAC,cACAE,WAAY,EACZC,SAAU,EAAIxrB,KAAKkkB,KAErBuH,EAAMH,OAAS,CACbF,cACAC,cACAE,WAAY,EACZC,SAAU,EAAIxrB,KAAKkkB,GAAK7tB,IAE5B,OACE,yBAAK9K,MAAOoU,EAAM7G,OAAQ6G,GACxB,0BAAMjP,EAAGkV,EAAMwe,KAAMxnB,EAAOynB,YAAa,IAAMuE,UAAS,oBAAewC,EAAf,YAA8BA,EAA9B,OACxD,0BAAM16B,EAAG+6B,EAAKrH,KAAMxnB,EAAOgsB,UAAS,oBAAewC,EAAf,YAA8BA,EAA9B,SCrBxCnpB,GAAQC,KACR9W,GAAMC,YAAW,CACf8iB,UAAW,CACT1iB,QAAS,QAEXigC,iBAAkB,CAChBjgC,QAAS,OACTE,eAAgB,SAChBD,WAAY,SACZE,cAAe,SACf8M,SAAU,WACViM,KAAM,GACNhM,IAAK,GACLpN,MAAOqZ,GAAKW,gBACZzM,OAAQ8L,GAAKW,iBAEfomB,QAAQ,2BACH1pB,GAAM7B,KAAKO,KADT,IAELtH,QAAS,OAeFuyB,GAAyB,SAAC,GAAD,IAAUz5B,EAAV,EAAGvD,MAAUi9B,EAAb,EAAaA,SAAb,OACpC,yBAAKtxB,YAAWpI,EAAEoC,KAAMpI,UAAWf,GAAI+iB,WACrC,kBAAC,GAAD,CAAaxO,KAAMiF,GAAKW,gBAAiB5I,UAAW,EAAGC,MAAOqF,GAAMrF,MAAMzK,EAAEyK,OAAS,OAAQvG,MAAOw1B,IACpG,yBAAK1/B,UAAWf,GAAIsgC,kBAClB,yBAAKv/B,UAAWf,GAAIugC,SAApB,UAAiC3rB,KAAKC,MAAiB,IAAX4rB,GAA5C,SC/BOC,GAAqB,SAAC,GAAD,IAAU35B,EAAV,EAAGvD,MAAUoK,EAAb,EAAaA,KAAb,OAChC,kBAAC,IAAD,CAAauB,YAAWpI,EAAEoC,KAAMmF,SAAUV,EAAMuX,OAAQ,CAAEC,KAAM,CAAE3Q,SAAU,SAAUjD,MAAOzK,EAAEyK,OAAS,eCgFxGxR,GAAMC,YAAW,CAEf0gC,eAAgB,CACdlzB,MAAO,CACL,6BAA8B,CAC5BH,SAAU,WACVuyB,aAAc,MAIpBe,YAAa,CACX1d,WAAY,GACZzO,SAAUtD,GAAI,KACd7D,SAAU,WACVC,KAAM,EACNC,OAAQ,GAIVqzB,sBAAuB,CACrBpzB,MAAO,CACL,oCAAqC,CACnCpN,QAAS,YAWjBygC,GAAW,SAAC3hB,EAAiB4hB,GAAlB,OAAiC,SAACC,EAAWC,GACtD,IAAIl/B,EAAIi/B,EAAK7hB,EAAOzW,KAAMb,EAAIo5B,EAAK9hB,EAAOzW,KAE1C,OAAQyW,EAAO+hB,UACb,IAAK,SAGH,OAFAn/B,GAAKA,EACL8F,GAAKA,EACEk5B,EAAUh/B,EAAI8F,EAAIA,EAAI9F,EAC/B,IAAK,OACHA,EAAI4lB,KAAKjiB,MAAM3D,GACf8F,EAAI8f,KAAKjiB,MAAMmC,GACf,MACF,QACE9F,EAAIA,EAAEsqB,cACNxkB,EAAIA,EAAEwkB,cAIV,OAAO0U,EACHl5B,EAAI9F,GAAK,EAAI,EACb8F,EAAI9F,EAAI,GAAK,IAEnBo/B,GAAY,SAACC,GAAD,OAAYA,EAAIC,WAAWhxB,QAAQ,wBAAyB,MAQxEixB,GAASj+B,GAAK,YAAqC,IAAD,IAA1B0D,EAA0B,EAAjCvD,MACf+G,GAAG9H,KAAKsE,EAAEoC,MAAQ,GAClB,IACEuF,EAAQ3H,EAAEhB,KAAK/C,KAAI,SAAAoD,GAEjB,IADA,IAAMm7B,EAA0C,CAAE74B,IAAKtC,EAAE+C,MAChDjG,EAAI,EAAGsD,EAAIJ,EAAEo7B,MAAM//B,OAAQyB,EAAIsD,EAAGtD,IAAK,CAE9Cq+B,EADYx6B,EAAER,QAAQrD,GACbiG,MAAQ/C,EAAEo7B,MAAMt+B,GAE3B,OAAOq+B,KAETE,GAAa,UAAA16B,EAAEue,cAAF,eAAU7jB,SAAUsF,EAAEklB,SACnCyV,EAAiBngC,EAAImN,GACrBizB,EAAiB56B,EAAER,QAAQwd,QAAO,qBAAG6d,cAA6B5+B,KAAI,qBAAGmG,QACzE04B,EAAatgC,EAAI,IACjBugC,EAAmBvgC,EAAsB,MACzCwgC,EAAsBxgC,EAAwC,MAC9DygC,EAAUzgC,OAAiCG,GAC3CugC,EAAc1gC,EAAI,KAClB2gC,EAA2Cn7B,EAAEo7B,UAAF,CAAe,CAAEz5B,IAAK,IAAKyF,KAAM,kBAAjC,mBAAuDpH,EAAER,QAAQvD,KAAI,SAAAo/B,GAAG,MAAK,CAAE15B,IAAK05B,EAAIj5B,KAAMgF,KAAMi0B,EAAIh0B,YAAa,GAChKi0B,EAAiB,SAAC5d,EAA6D6d,GAG7E,GAFAT,EAAWS,GAAa,KAEnBA,IAAcR,IAGjB,OAFAJ,EAAehzB,QACXszB,KAAWO,KAIjBxe,IACAljB,IACImhC,KAAWO,KAEjB1hC,EAAS,WACP,IAAMyhC,EAAYT,IAAaxV,cAC1BiW,GAAcX,EAAelgC,QAElCigC,EAAeA,IAAiB3d,QAAO,SAAA7gB,GAAC,OAAIy+B,EAAea,MAAK,SAAA95B,GAAG,OAAKxF,EAAEwF,GAAW2jB,cAAcwD,SAASyS,WAiB9Gve,EAAS,WACP,IAAM0e,EAAkBX,IAGlBY,EAAgBD,EAClB/zB,EAAMqV,QAAO,SAAA7gB,GAAC,OAAIQ,OAAOC,KAAK8+B,GAC7BE,OAAM,SAAAC,GAAS,OAAKH,EAAgBG,GAAWnhC,QAAUghC,EAAgBG,GACvEJ,MAAK,SAAAK,GAAS,OAAI3/B,EAAE0/B,KAAeC,WAGtCn0B,EAEJgzB,EAAegB,IAEjBI,EAAQ,WACNhB,EAAiB,MACjBD,EAAW,IAEXG,OAAQtgC,GACRugC,EAAY,KAEZle,IACAljB,KAeFmuB,EAAW,WAET,IACE9pB,EArGA,SAACA,GAAD,OAA0BA,EAAKlC,KAAI,SAAAqc,GACzC,IAAM3S,EAAOjH,KAAK6F,UAAU+T,GAC5B,OAAO3S,EAAKzD,OAAO,EAAGyD,EAAKjL,OAAS,MACnC4I,KAAK,MAkGO04B,CAAM,CAACh8B,EAAER,QAAQvD,KAAI,gBAAGoL,EAAH,EAAGA,MAAOjF,EAAV,EAAUA,KAAV,OAAqBiF,GAASjF,MAA9C,mBAAwDpC,EAAEhB,KAAK/C,KAAI,qBAAGw+B,YAClFz/B,EAAI6Y,SAASooB,cAAc,KAC3BC,EAAO,IAAIzU,KAAK,CAACtpB,GAAO,CAAEhE,KAAM,iBAChCgiC,EAAMviC,OAAOyc,IAAImR,gBAAgB0U,GAEnClhC,EAAEob,KAAO+lB,EACTnhC,EAAEitB,SAAW,oBACbjtB,EAAEohC,QAEFxiC,OAAOyc,IAAIgmB,gBAAgBF,IAE7BG,EAAmB,SAAC9/B,GAClB,OAAKA,EAGH,yBAAK4Y,MAAO,CAAExO,QAAS,KACrB,kBAAC,KAAD,CAAauY,QAAQ,aAAaf,OAAQ,CAAEC,KAAM,CAAEke,WAAY,GAAIC,cAAe,GAAIntB,WAAY,SAAY0pB,OAAK,GAApH,aAEEv8B,EAAMmL,MAAM1L,KAAI,YAA0B,IAzEhC4/B,EAAcC,EAyELn6B,EAAsB,EAAtBA,IAAKS,EAAiB,EAAjBA,KAAMjE,EAAW,EAAXA,KACtBu9B,EAAkBX,IAClBpd,IAAYvb,KAAUs5B,GAAmBA,EAAgBv9B,IAASu9B,EAAgBv9B,GAAM2qB,SAAS1mB,GACvG,OACE,kBAAC,KAAD,CACET,IAAKA,EACL0F,MAAOjF,EACP4b,eAAgBL,EAChBF,UAjFIoe,EAiFqB19B,GAAQ,GAjFf29B,EAiFmB15B,GAAQ,GAjFV,SAACsb,EAAsDC,GACtG,IAAM8e,EAAU1B,KAAsB,GAElCpd,EACE8e,EAAQZ,GAAYY,EAAQZ,GAAW1gC,KAAK2gC,GAC3CW,EAAQZ,GAAa,CAACC,GAExBW,EAAQZ,GAAaY,EAAQZ,GAAW7e,QAAO,SAAAjiB,GAAC,OAAIA,IAAM+gC,KAC/Df,EAAiBp+B,OAAO4hB,OAAOke,GAASb,OAAM,SAAA9+B,GAAC,OAAKA,EAAEpC,UAAU,KAA/CiC,OAAA,IAAAA,CAAA,GAA2D8/B,IAE5Ezf,IACAljB,IACImhC,KAAWO,MAsEHpd,OAAQ,CAAEC,KAAM,CAAEhG,aAAc,UAfzB,MAuBrBqkB,EAAuB,kBAAM1B,EAAoB,OACjD2B,EAAsB,SAACtB,EAAqBz8B,GAC1Co8B,EAAoB,CAClBrzB,MAAO1I,MAAMqiB,KAAK,IAAI5C,IAAI/W,EAAM1L,KAAI,SAAAE,GAAC,OAAIA,EAAEk/B,EAAIuB,WAAavB,EAAI15B,UAC7D1F,KAAI,SAAAqjB,GAAM,MAAK,CAAE3d,IAAK2d,EAAQld,KAAMkd,EAAQnhB,KAAMk9B,EAAIuB,WAAavB,EAAI15B,QAC1EoF,OAAQnI,EAAEmI,OACV81B,gBAAiBnW,KAAuBoW,eACxCC,SAAU,GACVC,eAAe,EACfV,mBACA9zB,UAAWk0B,KAiBflB,EAAa,WAAO,IAAD,EAdN,WACX,IAnLoCyB,EAAUt7B,EAmL1Cu7B,EAAU,EACRC,GApL8BF,EAoLTtC,IApLmBh5B,EAoLDu5B,IAnL1C+B,EAAIxX,QAAO,SAAC2X,EAAI3iC,GAErB,OADC2iC,EAAG3iC,EAAEkH,IAAQy7B,EAAG3iC,EAAEkH,KAAS,IAAIxG,KAAKV,GAC9B2iC,IACN,KAiLOC,EAAgB1gC,OAAOC,KAAKugC,GAC5BG,EAA0BD,EAAcphC,KAAI,SAAC0F,EAAKxF,GACtD,GAAU,IAANA,EAAS,CACX,IAAMohC,EAAUF,EAAclhC,EAAI,GAClC+gC,GAAWC,EAAUI,GAAS7iC,OAEhC,MAAO,CAAEiH,MAAKS,KAAMT,EAAK67B,WAAYN,EAASO,MAAON,EAAUx7B,GAAKjH,OAAQgjC,aAAa,MAG3F,MAAO,CAAEP,YAAWG,UAGUK,GAAtBR,EADS,EACTA,UAAWG,EADF,EACEA,OACnB3C,EAAeh+B,OAAO4hB,OAAO4e,GAAWS,SAAQ,SAAAX,GAAG,OAAIA,MACvDhC,EAAQqC,IAEVO,EAAkB,SAACngB,EAAqC4B,GACjDA,IACc,MAAfA,EAAO3d,KAKXo6B,IACAb,EAAY5b,EAAO3d,KACnB65B,KANEO,MAQJ+B,EAAwB,SAACthC,GACvB,OAAKA,EAGH,kBAAC,KAAD,CAAeuhC,eAAgBrX,KAA0BsX,OAAQC,gBAAc,GAC7E,kBAAC,KAAD,iBAA0BzhC,EAA1B,CAAiCmgC,oBAAqBA,EAAqB3iC,UAAWihC,IAAYhiC,GAAI6gC,sBAAwB,OAJ/G,gCASrBoE,EAAwB,SAAC1hC,GACvB,IAAM2hC,EAAiBvD,EAAelgC,QAAUsF,EAAER,QAAQi8B,MAAK,SAAAh6B,GAAC,OAAIA,EAAE28B,cACtE,IAAK5hC,IAAWwD,EAAEq+B,eAAiBr+B,EAAEs+B,aAAeH,EAAiB,OAAO,KAE5E,IAAMI,EAA6C,GAInD,OAHIv+B,EAAEq+B,cAAcE,EAAYpjC,KAAK,CAAEwG,IAAK,WAAYyF,KAAM,gBAAiBE,UAAW,CAAEC,SAAU,YAAcK,QAASqgB,IACzHjoB,EAAEs+B,YAAYC,EAAYpjC,KAAK,CAAEwG,IAAK,QAASyF,KAAM,cAAeE,UAAW,CAAEC,SAAU,WAAaK,QAASm0B,IAGnH,kBAAC,KAAD,CAAegC,eAAgBrX,KAA0B8X,OAAQP,gBAAc,GAC7E,kBAAC,KAAD,CAAc9gB,YAAU,EAACC,gBAAiB+gB,EAAiB,gBAAkB,MAAOnX,cAAc,UAE9FmX,GACE,kBAAC,KAAD,CAAahf,QAAQ,YAAY4Z,OAAK,GAAtC,QACE,uBAAG3jB,MAAO,CAAEmN,YAAa,IAAM6X,GAAUO,IAAiBjgC,QAA1D,OAAuE0/B,GAAUzyB,EAAMjN,UAI7F,kBAAC,KAAD,CAAmBiN,MAAO42B,OAKlCE,EAAc,SAACjiC,GACb,OAAKA,EAEE,kBAAC,KAAD,iBAAuBA,EAAvB,CAA8B4hB,OAAQ,CAAEsgB,KAAM,CAAEC,UAAW,UAAYtgB,KAAM,CAAEjlB,MAAO,YAF1E,gCAIrBwlC,EAAgB,SAAChgC,EAAkCwZ,GACkC,gBAA5DxZ,EAAEmI,OAAuB83B,aAAa,kBAE1ClC,EAAoBvkB,EAAQxZ,GACtCwZ,EAAO0mB,YAxIX,SAAC1mB,GACN,IAGe,EAHT4hB,EAA8B,aAApB5hB,EAAO7Q,UACvB6Q,EAAO7Q,SAAWyyB,EAAU,SAAW,WAEnCiB,KACFN,GAAsB,QAAP,EAAAM,WAAA,eAAWxV,QAAO,SAAC8L,EAAKwN,GAAN,4BAC3BxN,GAD2B,YACnBoJ,IAAiB/+B,MAAMmjC,EAAMvB,WAAYjM,EAAI72B,OAASqkC,EAAMtB,OAAOn8B,KAAKy4B,GAAS3hB,EAAQ4hB,QACrG,MAAgB,IAEfW,EAAe,YAAIA,KAAkBr5B,KAAKy4B,GAAS3hB,EAAQ4hB,KAEhEgF,EAASA,IAAW/iC,KAAI,SAACo/B,GAAD,OAASjjB,EAAOzW,MAAQ05B,EAAI15B,IAAMyW,EAASijB,MA6HvC/5B,CAAK8W,IAEnC4mB,EAAWxkC,EAAIwF,EAAER,QAAQvD,KAAI,SAACwF,GAC5B,IACEiZ,EAAWjZ,EAAE4Y,UACT5Y,EAAE4Y,UAAUlK,SAAS,OAClB1O,EAAE4Y,UAAU7b,UAAU,EAAGiD,EAAE4Y,UAAU3f,OAAS,IAC9C+G,EAAE4Y,UACL,IACJM,EAAWlZ,EAAE6Y,UACT7Y,EAAE6Y,UAAUnK,SAAS,OAClB1O,EAAE6Y,UAAU9b,UAAU,EAAGiD,EAAE6Y,UAAU5f,OAAS,IAC9C+G,EAAE6Y,eACL3f,EACN,MAAO,CACLgH,IAAKF,EAAEW,KACPA,KAAMX,EAAE4F,MACRu1B,UAAWn7B,EAAEW,KACbsY,WACAC,WACAskB,gBAAiBx9B,EAAEy9B,SAAWjmC,GAAI2gC,oBAAiBj/B,EACnDwkC,cAAe19B,EAAEy9B,SAAWjmC,GAAI4gC,iBAAcl/B,EAC9C4M,SAAU9F,EAAEy9B,SAAW,gBAAavkC,EACpCikC,gBACAQ,kBAAmB39B,EAAE28B,WAAa1X,KAAyB2Y,YAAc3Y,KAAyB4Y,UAClGC,SAAU99B,EAAE+9B,UACZrF,SAAU14B,EAAEg+B,UACZX,WAAYr9B,EAAEy9B,SACdQ,aAAa,OAGjBC,GAAmB,UAAA3/B,EAAER,QAAQogC,MAAK,SAAAn+B,GAAC,OAAIA,EAAEkb,eAAtB,eAA6Bva,SAA+B,IAAtBpC,EAAER,QAAQ,GAAGmd,UAAiBhiB,EAAYqF,EAAER,QAAQ,GAAG4C,MAChHgf,EAAY,IAAIsF,KAAiB,CAC/BmZ,mBAAoB,WAClBr8B,GAAG9H,KAAKsE,EAAEoC,MAAQgf,EAAU0e,eAAe7jC,KAAI,SAAAu+B,GAAI,OAAIA,EAAK74B,UAShEo+B,EAAgB,SAACvF,GACfh3B,GAAG9H,KAAKsE,EAAEoC,MAAQ,CAACo4B,EAAK74B,KACxB6B,GAAGT,QAELi9B,EAAqB,SAACxF,EAA0Cra,EAAiBkb,GAAmB,IAAD,IACjG,IAAKb,IAASa,EAAK,OAAO,+BAE1B,IAAMv+B,EAAI09B,EAAKa,EAAIuB,WACnB,GAAIvB,EAAI15B,MAAQg+B,IAAqBjF,EAAY,CAK/C,OAAO,kBAAC,KAAD,CAAa9yB,QAJJ,WACdpE,GAAG9H,KAAKsE,EAAEoC,MAAQ,CAACo4B,EAAK74B,KACxB6B,GAAGT,SAEkCjG,GAGzC,iBAAIu+B,EAAIkE,gBAAR,aAAI,EAAc7F,UAAiB,kBAAC,GAAD,CAAwBj9B,MAAO4+B,EAAIkE,SAAS7F,SAAUA,SAAUc,EAAKa,EAAI15B,QAC5G,UAAI05B,EAAIkE,gBAAR,aAAI,EAAc14B,MAAa,kBAAC,GAAD,CAAoBpK,MAAO4+B,EAAIkE,SAAS14B,KAAMA,KAAM2zB,EAAKa,EAAI15B,OACvE,SAAjB05B,EAAIlB,SAA4B,8BAAO,IAAIvZ,KAAK9jB,GAAGmjC,kBAEhD,8BAAOnjC,IAEhBojC,EAAgB,WACd,GAAIlgC,EAAE2G,OAAQ,OAAO3G,EAAE2G,OACvB,GAAIgB,EAAMjN,OAAS,GAAI,OAAO,IAE9B,IACEylC,EAAmBvF,EAAelgC,QAAUsF,EAAEo7B,UAAY,GAAK,EAE/DgF,EAAYpgC,EAAER,QAAQi8B,MAAK,SAAAh6B,GAAC,OAAIA,EAAE+9B,aAC9Bx/B,EAAER,QAAQi8B,MAAK,SAAAh6B,GAAC,uBAAIA,EAAE+9B,iBAAN,aAAI,EAAa9F,YAAY,GAAK,GAClD,GACJ2G,EAAergC,EAAEq+B,cAAgBr+B,EAAEs+B,YAAc1D,EAAelgC,OAAS,GAAK,EAEhF,OAAOylC,EANU,GAMyBx4B,EAAMjN,OAAS0lC,EAAaC,GAExEC,EAAY,kBACV,oCACE,kBAAC,KAAD,CACE34B,MAAOgzB,IACPn7B,QAASw/B,IACTuB,cAAe7Z,KAAqB8Z,cACpCC,WAAY/Z,KAA6Bga,aACzCpD,OAAQrC,IACR7Z,UAAWA,EACXuf,cAAejG,EAAahU,KAAqBxB,SAAWwB,KAAqBka,KACjFC,gCAA8B,EAC9Bd,cAAerF,OAAa//B,EAAYolC,EACxCtB,YAAaA,EACbuB,mBAAoBA,EACpBlC,sBAAuBA,EACvBI,sBAAuBA,IAExBlD,KAAyB,kBAAC,IAA2BA,OAkB5D,MAAO,CAAE79B,KA7EA,WACDu9B,GAAc16B,EAAEue,SAClBve,EAAEue,OAAOriB,SAAQ,SAAAY,GAAC,OAAIskB,EAAU0f,eAAehkC,GAAG,GAAM,MACxD0G,GAAG9H,KAAKsE,EAAEoC,MAAQpC,EAAEue,SA0EXlhB,OAfJ,kBACP,yBAAK+K,YAAWpI,EAAEoC,KAAMgT,MAAK,aAAI7O,SAAU,WAAYI,OAAQu5B,KAAoBp1B,GAAa9K,EAAE+K,WAChG,kBAAC,KAAD,CAAcoS,YAAU,EAACC,gBAAgB,iBACtCpd,EAAEo7B,WAAa,kBAAC,KAAD,CAAiBhzB,YAAU,UAAUf,MAAM,WAAW05B,YAAa7F,IAAezd,SAAUogB,EAAiBxe,QAAS8b,EAAgB/c,OAAQ,CAAEC,KAAM,CAAEjlB,MAAO,UAC5KwhC,EAAelgC,QAAU,kBAAC,KAAD,CAAkB0N,YAAU,SAASf,MAAM,SAASoW,SAAU6d,EAAgBp3B,MAAO42B,IAAc1c,OAAQ,CAAEC,KAAM,CAAEjlB,MAAO,WAE1J,kBAAC,KAAD,CAAuB4nC,oBAAqBta,KAA2Bua,KAAM7iB,OAAQ,CAAEC,KAAM,CAAE7X,IAAKxG,EAAEo7B,WAAaR,EAAelgC,OAAS,GAAK,KAE5IggC,EACI,kBAAC,KAAD,CAAyBtZ,UAAWA,GAAW,kBAACkf,EAAD,OAC/C,kBAACA,EAAD,SAKStB,WAAUrE,iBAAgBI,mBAAkBD,aAAYE,sBAAqBC,UAASC,kB,oBCvc/GgG,GAAQ5kC,GAAK,YAAoC,IAA1B0D,EAAyB,EAAhCvD,MAEZ0kC,EAAc,SAAC3G,GACRA,GACDA,EAAKh+B,MAAM4kC,UAAY59B,GAAG9H,KAAKsE,EAAEoC,QACnCoB,GAAG9H,KAAKsE,EAAEoC,MAAQo4B,EAAKh+B,MAAM4kC,SAAW,KACxC59B,GAAGT,SAOT,MAAO,CAAE1F,OAJE,WAAO,IAAD,IACPgkC,EAAI,UAAGrhC,EAAE2H,aAAL,aAAG,EAAS1L,KAAI,SAAAZ,GAAC,OAAI,kBAAC,KAAD,CAAkBsG,IAAKtG,EAAE+G,KAAMk/B,SAAUjmC,EAAEwL,KAAMu6B,QAAS/lC,EAAE+G,KAAMm/B,WAAYlmC,EAAEgM,WAC/G,OAAO,kBAAC,KAAD,CAAce,YAAWpI,EAAEoC,KAAMgT,MAAOtK,GAAa9K,EAAE+K,SAAUg2B,YAAW,UAAE/gC,EAAEkE,aAAJ,QAAa,KAAMi9B,YAAaA,GAAcE,QCdvIG,GAAYllC,GAAK,YAAwC,IAA9B0D,EAA6B,EAApCvD,MAEhBglC,EAAWt4B,KAAWY,QAAQ/J,EAAEqb,SAAW,IAK7C,MAAO,CAAEhe,OAJE,WACP,IAAMc,EAAOD,EAAO8B,EAAE7B,MACtB,OAAO,yBAAKiK,YAAWpI,EAAEoC,MAAM,kBAAC,GAAD,CAAS3F,MAAO,CAAE4e,QAASomB,EAAStjC,GAAQ,IAAK4M,QAAS/K,EAAE+K,iBAIjGuL,GAAOha,GAAK,YAA4C,IAAzC8F,EAAwC,EAAxCA,KAAMnF,EAAkC,EAAlCA,MAAOoF,EAA2B,EAA3BA,QAExBo/B,EAAWt4B,KAAWY,QAAQ9M,EAAMoe,SAAW,IAKjD,MAAO,CAAEhe,OAJE,WACP,IAAMc,EAAOD,EAAOjB,EAAMkB,MAC1B,OAAO,kBAAC,GAAD,CAAYiE,KAAMA,EAAMoF,MAAOuK,GAAW9U,EAAMuK,MAAOrJ,GAAOkd,QAASomB,EAAStjC,GAAQ,OAElFkE,cAGrBI,GAAMiP,SAAS,WAAY4E,ICuC3B,IACExG,GAAQC,KACR9W,GAAMC,YAAW,CACfkO,KAAM,CACJb,SAAU,YAEZkV,SAAU,CACR/U,MAAO,CACL1L,EAAG,CACDyP,MAAOS,GAAQmF,aACf3J,MAAO,CACL,UAAW,CACTg7B,eAAgB,UAItBC,MAAO,CACLvoC,MAAO+Q,GAAG,KACVy3B,eAAgB,YAElBC,GAAI,CACFC,aAAcv3B,GAAO,EAAGuF,GAAME,OAAOrE,QAEvCo2B,GAAI,CACFn7B,QAASA,GAAQ,GAAI,GACrBsV,UAAW,QAEboQ,GAAI,CACF1lB,QAASA,GAAQ,GAAI,QAK7Bo7B,GAA+C,CAC7CxrB,GAAI,SACJtQ,EAAG,QACHlG,EAAG,SACHpC,EAAG,QACH7B,GAAI,UAKNkmC,GAAQ,SAAC,GAAoI,IAH5HrkC,EAGNyd,EAAiI,EAAjIA,QAASjZ,EAAwH,EAAxHA,KAAMoL,EAAkH,EAAlHA,KAAMzF,EAA4G,EAA5GA,SAA4G,IAAlGm6B,kBAAkG,SACpIC,EAAW//B,EAAI,UAAMA,EAAN,SAAoBA,EACzC,OACE,yBAAKpI,UAAWf,GAAImO,KAAMgO,MAAOtK,GAAao3B,IAC5C,kBAAC,KAAD,CAAa95B,YAAWhG,EAAM+c,SAPnBvhB,EAO0C4P,GAAQ,IAPzCw0B,GAAapkC,IAAM,cAO4Bm7B,OAAK,GACtE,yBAAK/+B,UAAWf,GAAIwiB,UAAU,kBAAC,GAAD,CAAUM,OAAQV,SAEhD,OAACtT,QAAD,IAACA,OAAD,EAACA,EAAUrN,SAAU,kBAACoN,GAAD,CAAU1F,KAAM+/B,EAAUp6B,SAAUA,M,oBCnFjEq6B,GAAW9lC,GAAK,YAAuC,IAA7B0D,EAA4B,EAAnCvD,MACjB+G,GAAG9H,KAAKsE,EAAEoC,MAAQpC,EAAEkE,OAAS,GAC7B,IACEuZ,EAAW,SAAC,EAAqE3gB,GAAgB,IAAD,EAAlFiK,EAAkF,EAAlFA,OACZjK,EAAIA,GAAMiK,EAA4B7C,MAEtCV,GAAG9H,KAAKsE,EAAEoC,MAAV,UAAkBtF,SAAlB,QAAwBkD,EAAEkE,OAAS,GAC/BlE,EAAE4d,SAASpa,GAAGT,QAsCtB,MAAO,CAAE1F,OApCE,kBAAM2C,EAAEqiC,KAEb,kBAAC,KAAD,CACEj6B,YAAWpI,EAAEoC,KACbgT,MAAOtK,GAAa9K,EAAE+K,SACtB1D,MAAOrH,EAAEqH,MACT4K,aAAcjS,EAAEkE,MAChBm+B,KAAMriC,EAAEqiC,KACR9hB,aAAcvgB,EAAElB,MAChBygB,SAAUvf,EAAEuf,SACZ3C,SAAU5c,EAAE4c,SACZ0lB,SAAUtiC,EAAEuiC,SACZ9kB,SAAUzd,EAAE4d,QAAU4kB,oBAvBT,IAuBoC/kB,GAAYA,IAI/D,kBAAC,KAAD,CACErV,YAAWpI,EAAEoC,KACbgT,MAAOtK,GAAa9K,EAAE+K,SACtBqT,OAAQpe,EAAEyiC,WAAaziC,EAAE2G,OAAS,CAAE+7B,WAAY,CAAE/7B,OAAQ3G,EAAE2G,cAAahM,EACzE0M,MAAOrH,EAAEqH,MACT+Y,YAAapgB,EAAEogB,YACf9Y,UAAW,CAAEC,SAAUvH,EAAE6G,MACzB87B,OAAQ3iC,EAAE2iC,OACVC,OAAQ5iC,EAAE4iC,OACV3wB,aAAcjS,EAAEkE,MAChBqc,aAAcvgB,EAAElB,MAChBygB,SAAUvf,EAAEuf,SACZ3C,SAAU5c,EAAE4c,SACZ0lB,SAAUtiC,EAAEuiC,SACZE,UAAWziC,EAAEyiC,UACbtoC,KAAM6F,EAAE6iC,SAAW,gBAAaloC,EAChC8iB,SAAUzd,EAAE4d,QAAU4kB,oBA3CT,IA2CoC/kB,GAAYA,S,UC9DvEqlB,GAAUxmC,GAAK,YAAsC,IAA5B0D,EAA2B,EAAlCvD,MAChB+G,GAAG9H,KAAKsE,EAAEoC,QAAUpC,EAAEkE,MACtB,IACEuZ,EAAW,SAACC,EAAmCC,GAC7Cna,GAAG9H,KAAKsE,EAAEoC,QAAUub,EAChB3d,EAAE4d,SAASpa,GAAGT,QAgBtB,MAAO,CAAE1F,OAdE,kBACP,kBAAC,KAAD,CACE+K,YAAWpI,EAAEoC,KACbgT,MAAOtK,GAAa9K,EAAE+K,SACtB1D,MAAOrH,EAAEqH,MACT2W,eAAgBhe,EAAEkE,MAClBuZ,SAAUA,EACVb,SAAU5c,EAAE4c,SACZmmB,OAAO,KACPC,QAAQ,MACRC,aAAW,S,UC1CnBnzB,GAAQC,KACR9W,GAAMC,YAAW,CACfyJ,KAAM,CACJgE,OAAO,eAAD,OAAiBuD,GAAG,EAAIuI,GAAKI,KAA7B,OAERrL,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAEhBylB,KAAM,CACJ5uB,SAAU,WACVI,OAAQ,oBACRvN,MAAO,uBAqBX8pC,GAAqB5mC,GAAK,YAAqD,IAA3CW,EAA0C,EAAjDR,MAEzBwH,EAAM3G,IAAMi4B,YACZp4B,EAAI,yCAAG,+BAAAnC,EAAA,yDACAiJ,EAAIuxB,QADJ,uBAEH57B,OAAO6L,WAAWtI,EAAM,KAFrB,iCAOHyZ,EAAOlY,KAAKC,MAAM1B,EAAMkmC,gBACxBhlC,EAAOD,EAAcjB,EAAMkB,SAEnByY,EAAKzY,KAAO,CAAEogB,OAAQpgB,IAV3B,kBAYGilC,aAAUn/B,EAAIuxB,QAAS5e,EAAM,CACjCysB,KAAM,YACNC,cAAc,EACdC,SAAU,SACV/P,SAAS,EACTgQ,OAAQ,CACNC,SAAU,CACRtpC,KAAM,MACNupC,QAAQ,GAEVrxB,KAAM,CACJsxB,cAAe1/B,EAAIuxB,QAAQzhB,kBAAepZ,EAC1CipC,eAAgB3/B,EAAIuxB,QAAQvhB,mBAAgBtZ,EAC5CkpC,gBAAiB5/B,EAAIuxB,QAAQzhB,aAAe,IAC5C+vB,iBAAkB7/B,EAAIuxB,QAAQvhB,cAAgB,QA1BjD,yDA+BHpV,QAAQC,MAAR,MA/BG,0DAAH,qDA2CN,MAAO,CAAE3B,OAAME,OATJ,WAAO,IAEV+E,EAAiCnF,EAAjCmF,KAAMhJ,EAA2B6D,EAA3B7D,MAAOuN,EAAoB1J,EAApB0J,OAAQoE,EAAY9N,EAAZ8N,QACvBqK,EAAwC,SAAVhc,GAA+B,SAAXuN,EAC9C,CAAEJ,SAAU,WAAYiM,KAAM,EAAGhM,IAAK,EAAGC,MAAO,EAAGiN,OAAQ,GAC3D,CAAEta,MAAOA,GAAS,OAAQuN,OAAQA,GAAU,QAClD,OAAO,yBAAKyB,YAAWhG,EAAMgT,MAAK,2BAAOA,GAAUtK,GAAaC,IAAY9G,IAAKA,SAiBvFqS,GAAOha,GAAK,YAA4C,IAAzC8F,EAAwC,EAAxCA,KAAMnF,EAAkC,EAAlCA,MAYnB,MAAO,CAAEI,OAVE,WACP,OACE,yBAAK+K,YAAWhG,EAAMpI,UAAWf,GAAI0J,MACnC,yBAAK3I,UAAWf,GAAIuO,OAAQvK,EAAMuK,OAClC,yBAAKxN,UAAWf,GAAIk8B,MAClB,kBAAC+N,GAAD,CAAoBvhC,IAAKjE,IAAOjB,MAAO,CAAE0mC,cAAelmC,EAAMkmC,cAAehlC,KAAMlB,EAAMkB,KAAM/E,MAAO,OAAQuN,OAAQ,aAK/GtE,QAZoC,EAA3BA,YAe9BI,GAAMiP,SAAS,OAAQ4E,ICKvB,IACExG,GAAQC,KACRg0B,GAA2B,CAAEp8B,MAAO,IACpC1O,GAAMC,YAAW,CACf8qC,KAAM,CACJt9B,MAAO,CACL,MAAO,CACLgE,OAAQA,GAAO,GAAI,QAQ3Bu5B,GAAc,SAAC,GAAuC,IAC9CC,EAD6C,EAApCv8B,MACU1L,KAAI,SAAA+D,GAAC,OAAI,kBAAC,GAAD,CAAY2B,IAAKjE,IAAOjB,MAAOuD,OACjE,OAAO,oCAAGkkC,IAIZC,GAAa,SAAC,GAAwC,IAA/BnkC,EAA8B,EAArCvD,MACd,OAAIuD,EAAEoH,KAAa,kBAAC,GAAD,CAAUiU,QAASrb,EAAEoH,KAAK8V,QAASZ,QAAQ,GAAO,kBAAC,GAAD,CAAOla,KAAMpC,EAAEoH,KAAKhF,KAAMiZ,QAASrb,EAAEoH,KAAKiU,QAAS7N,KAAMxN,EAAEoH,KAAKoG,KAAM00B,WAAYliC,EAAEoH,KAAK2D,WAC1J/K,EAAEokC,QAAgB,kBAAC,GAAD,CAAU/oB,QAASrb,EAAEokC,QAAQlnB,QAASZ,QAAQ,GAAO,kBAAC,GAAD,CAAOla,KAAMpC,EAAEokC,QAAQhiC,KAAMiZ,QAASrb,EAAEokC,QAAQ/oB,QAAS7N,KAAK,KAAKzF,SAAU/H,EAAEokC,QAAQr8B,SAAUm6B,WAAYliC,EAAEokC,QAAQr5B,WAC9L/K,EAAEqkC,OAAe,kBAAC,GAAD,CAAUhpB,QAASrb,EAAEqkC,OAAOnnB,QAASZ,QAAQ,GAAO,kBAAC,GAAD,CAAOla,KAAMpC,EAAEqkC,OAAOjiC,KAAMiZ,QAASrb,EAAEqkC,OAAOhpB,QAAS7N,KAAK,IAAIzF,SAAU/H,EAAEqkC,OAAOt8B,SAAUm6B,WAAYliC,EAAEqkC,OAAOt5B,WACvL/K,EAAEskC,OAAe,kBAAC,GAAD,CAAUjpB,QAASrb,EAAEskC,OAAOpnB,QAASZ,QAAQ,GAAO,kBAAC,GAAD,CAAOla,KAAMpC,EAAEskC,OAAOliC,KAAMiZ,QAASrb,EAAEskC,OAAOjpB,QAAS6mB,WAAYliC,EAAEskC,OAAOv5B,WACjJ/K,EAAEukC,OAAe,kBAAC,GAAD,CAAUlpB,QAASrb,EAAEukC,OAAOrnB,QAASZ,QAAQ,GAAO,kBAAC,GAAD,CAAOla,KAAMpC,EAAEukC,OAAOniC,KAAMiZ,QAASrb,EAAEukC,OAAOlpB,QAAS7N,KAAK,IAAI00B,WAAYliC,EAAEukC,OAAOx5B,WAC1J/K,EAAEwkC,QAAgB,kBAAC,GAAD,CAAUnpB,QAASrb,EAAEwkC,QAAQtnB,QAASZ,QAAQ,GAAO,kBAAC,GAAD,CAAOla,KAAMpC,EAAEwkC,QAAQpiC,KAAMiZ,QAASrb,EAAEwkC,QAAQnpB,QAAS7N,KAAK,KAAK00B,WAAYliC,EAAEwkC,QAAQz5B,WAChK/K,EAAEqH,MAAc,kBAAC,GAAD,CAAUgU,QAASrb,EAAEqH,MAAM6V,QAASZ,QAAQ,GAAO,kBAAC,GAAD,CAAQ7f,MAAOuD,EAAEqH,SACpFrH,EAAE2c,KAAa,kBAAC,GAAD,CAAUtB,QAASrb,EAAE2c,KAAKO,QAASZ,QAAQ,GAAO,kBAAC0L,GAAD,CAAOvrB,MAAOuD,EAAE2c,QACjF3c,EAAEo3B,UAAkB,kBAAC,GAAD,CAAY36B,MAAOuD,EAAEo3B,YACzCp3B,EAAE05B,SAAiB,kBAAC,GAAD,CAAUre,QAASrb,EAAE05B,SAASxc,SAAS,kBAAC,GAAD,CAAWzgB,MAAOuD,EAAE05B,YAC9E15B,EAAEykC,YAAoB,kBAAC,GAAD,CAAahoC,MAAOuD,EAAEykC,cAC5CzkC,EAAE0kC,QAAgB,kBAAC,GAAD,CAAUrpB,QAASrb,EAAE0kC,QAAQxnB,SAAS,kBAACklB,GAAD,CAAU3lC,MAAOuD,EAAE0kC,WAC3E1kC,EAAE2kC,SAAiB,kBAAC,GAAD,CAAUtpB,QAASrb,EAAE2kC,SAASznB,QAASZ,QAAQ,GAAO,kBAACkB,GAAD,CAAW/gB,MAAOuD,EAAE2kC,YAC7F3kC,EAAE4kC,OAAe,kBAAC,GAAD,CAAUvpB,QAASrb,EAAE4kC,OAAO1nB,QAASZ,QAAQ,GAAO,kBAACwmB,GAAD,CAASrmC,MAAOuD,EAAE4kC,UACvF5kC,EAAE6kC,aAAqB,kBAAC,GAAD,CAAUxpB,QAASrb,EAAE6kC,aAAa3nB,SAAS,kBAACkC,GAAD,CAAc3iB,MAAOuD,EAAE6kC,gBACzF7kC,EAAE8kC,SAAiB,kBAAC,GAAD,CAAUzpB,QAASrb,EAAE8kC,SAAS5nB,SAAS,kBAACgE,GAAD,CAAWzkB,MAAOuD,EAAE8kC,YAC9E9kC,EAAE+kC,UAAkB,kBAAC,GAAD,CAAU1pB,QAASrb,EAAE+kC,UAAU7nB,SAAS,kBAACoB,GAAD,CAAY7hB,MAAOuD,EAAE+kC,aACjF/kC,EAAEglC,SAAiB,kBAAC,GAAD,CAAU3pB,QAASrb,EAAEglC,SAAS9nB,SAAS,kBAAC+C,GAAD,CAAWxjB,MAAOuD,EAAEglC,YAC9EhlC,EAAEilC,OAAe,kBAAC,GAAD,CAAU5pB,QAASrb,EAAEilC,OAAO/nB,SAAS,kBAACoa,GAAD,CAAS76B,MAAOuD,EAAEilC,UACxEjlC,EAAEklC,QAAgB,kBAAC,GAAD,CAAU7pB,QAASrb,EAAEklC,QAAQhoB,QAASZ,QAAQ,GAAO,kBAACub,GAAD,CAAUp7B,MAAOuD,EAAEklC,WAC1FllC,EAAEmlC,YAAoB,kBAAC,GAAD,CAAU9pB,QAASrb,EAAEmlC,YAAYjoB,SAAS,kBAAC2D,GAAD,CAAapkB,MAAOuD,EAAEmlC,eACtFnlC,EAAEolC,aAAqB,kBAAC,GAAD,CAAU/pB,QAASrb,EAAEolC,aAAaloB,SAAS,kBAACuC,GAAD,CAAchjB,MAAOuD,EAAEolC,gBACzFplC,EAAEqlC,YAAoB,kBAAC,GAAD,CAAUhqB,QAASrb,EAAEqlC,YAAYnoB,SAAS,kBAAC+F,GAAD,CAAaxmB,MAAOuD,EAAEqlC,eACtFrlC,EAAE2hC,MAAc,kBAAC,GAAD,CAAUtmB,QAASrb,EAAE2hC,MAAMzkB,SAAS,kBAACqd,GAAD,CAAQ99B,MAAOuD,EAAE2hC,SACrE3hC,EAAEyc,QAAgB,kBAAC,GAAD,CAAUhgB,MAAOuD,EAAEyc,UACrCzc,EAAEqhC,KAAa,kBAACH,GAAD,CAAOzkC,MAAOuD,EAAEqhC,OAC/BrhC,EAAE+c,OAAe,kBAAC,GAAD,CAAU1B,QAASrb,EAAE+c,OAAOG,QAASb,UAAU,EAAOC,QAAQ,GAAO,kBAAC,GAAD,CAAmB7f,MAAOuD,EAAE+c,UAClH/c,EAAEslC,SAAiB,kBAACrjB,GAAD,CAAWxlB,MAAOuD,EAAEslC,WACvCtlC,EAAEulC,MAAc,kBAAC,GAAD,CAAQ9oC,MAAOuD,EAAEulC,QACjCvlC,EAAEwlC,OAAe,kBAAC,GAAD,CAAS/oC,MAAOuD,EAAEwlC,SACnCxlC,EAAEyhC,SAAiB,kBAACD,GAAD,CAAW/kC,MAAOuD,EAAEyhC,WACvCzhC,EAAEylC,OAAe,kBAAC,GAAD,CAAUpqB,QAASrb,EAAEylC,OAAOvoB,SAAS,kBAACyL,GAAD,CAASlsB,MAAOuD,EAAEylC,UACxEzlC,EAAE0lC,aAAqB,kBAAC,GAAD,CAAUrqB,QAASrb,EAAE0lC,aAAaxoB,SAAS,kBAACyZ,GAAD,CAAcl6B,MAAOuD,EAAE0lC,gBACzF1lC,EAAE2lC,QAAgB,kBAAC,GAAD,CAAUtqB,QAASrb,EAAE2lC,QAAQzoB,SAAS,kBAACsb,GAAD,CAAU/7B,MAAOuD,EAAE2lC,WAC3E3lC,EAAE4lC,cAAsB,kBAACxQ,GAAD,CAAgB34B,MAAOuD,EAAE4lC,gBACjD5lC,EAAE6lC,mBAA2B,kBAAC3C,GAAD,CAAoBzmC,MAAOuD,EAAE6lC,qBACvD,kBAAC,KAAD,CAAmBpf,eAAgBC,KAAsB0B,eAAzD,0CAIT9R,GAAOha,GAAK,YAA4C,IAAzC8F,EAAwC,EAAxCA,KAAMnF,EAAkC,EAAlCA,MAanB,MAAO,CAAEI,OAXE,WACP,IACEO,EAAIkS,GAAMG,MAAM8zB,GAAU9mC,GAC1B0K,EAAQzJ,EAAoBN,EAAE+J,OAEhC,OACE,yBAAKS,YAAWhG,EAAMpI,UAAWf,GAAI+qC,MACnC,kBAAC,GAAD,CAAar8B,MAAOA,MAIXtF,QAboC,EAA3BA,YAgB9BI,GAAMiP,SAAS,OAAQ4E,IC7KRha,UAAK,WAEhB,IAAEyH,EAAYP,GAAZO,QAqBJ,MAAO,CAAE1G,OApBE,WAAO,IAAD,EAE2D0G,KAAa,GAAjFyD,EAFS,EAETA,MAFS,IAEFpO,aAFE,MAEM,QAFN,MAEeuO,aAFf,MAEuB,GAFvB,EAE2Bm+B,EAF3B,EAE2BA,SAAUjpB,EAFrC,EAEqCA,QAASkpB,EAF9C,EAE8CA,SACzDC,EAAiD,CAC/Cx+B,QACArN,KAAM2rC,EACFpf,KAAkBliB,MAClBqY,EACE6J,KAAkBuf,YAClBvf,KAAkBlS,QAE1B0xB,EAAgBv+B,EAAMw+B,MAExB,OACE,kBAAC,KAAD,CAAeh+B,QAASpE,IAAWiiC,mBAAoBA,EAAoBI,WAAY,CAAEC,WAAYN,GAAYrrB,SAAUthB,EAAOuhB,SAAUvhB,GAC1I,kBAAC,GAAD,CAAauO,MAAOA,KACN,OAAbu+B,QAAa,IAAbA,OAAA,EAAAA,EAAezpB,UAAW,kBAAC,KAAD,KAAqB,kBAAC,GAAD,CAAUhgB,MAAOypC,EAAczpB,aAItE1Y,cCxCjB+L,GAAQC,KACR9W,GAAMC,YAAW,CACfotC,IAAK,CACH//B,SAAU,WACViM,KAAM,EAAGhM,IAAK,EAAGC,MAAO,EAAGiN,OAAQ,EACnCY,gBAAiBxE,GAAME,OAAO/M,KAC9BwH,MAAOqF,GAAME,OAAO5I,KACpB9N,QAAS,OACTE,eAAgB,SAChB4a,SAAU,QAEZmyB,iBAAkB,CAChB5/B,OAAQwD,GAAG,KACX7Q,QAAS,OACTE,eAAgB,SAChBD,WAAY,SACZ+a,gBAAiBxE,GAAME,OAAO/M,KAC9BwH,MAAOqF,GAAME,OAAO5I,MAEtBo/B,YAAa,CACXltC,QAAS,OACTiN,SAAU,QACViM,KAAM,EAAGhM,IAAK,EAAGC,MAAO,EAAGiN,OAAQ,GAErC+yB,YAAa,CACXntC,QAAS,WAMbotC,GAAcpqC,GAAK,WACjB,IACEqqC,EAAc,EAGd9iC,EAAQL,GAAGK,MACX+iC,EAAQpsC,GAAI,GAcd,OARAM,EAAG+I,GAAO,SAAAgjC,GACRjtC,OAAOktC,aAAaH,GAChBE,EACFF,EAAc/sC,OAAO6L,YAAW,kBAAMmhC,GAAM,KAXlC,KAaVA,GAAM,MAGH,CAAEvpC,OAbE,kBACP,yBAAKrD,UAAW6J,IAAUwG,GAAKpR,GAAIutC,YAAavtC,GAAIwtC,aAAextC,GAAIutC,aACrE,kBAACO,EAAA,EAAD,CAAS/sC,UAAWf,GAAIstC,iBAAkBnxB,MAAO,CAAElO,QAAS0/B,IAAU,GAAM,GAAKv/B,MAAM,aAAamG,KAAMw5B,IAAYC,UAW3GpjC,QAAO+iC,YAuDbM,GArDP5qC,GAAK,WACT,IACE6qC,EAAW3sC,EAAgC,IAC3C4sC,EAAW,SAACxoC,GACV,OAAQA,EAAEvD,GACR,KAAKkC,EAAcsI,KACjBshC,EAAS,CAAElkC,KAAMrE,EAAEqE,OACnB,MACF,KAAK1F,EAAc2H,QACbtG,EAAEzE,OAASqD,EAAgBsI,KAAKqhC,EAAS,CAAEroC,MAAOF,EAAEwG,UACxD,MACF,KAAK7H,EAAcwI,MACjBnM,OAAOC,SAASwtC,WAItBC,EAAgB,WACd,IAAM9zB,EAAI5Z,OAAOC,SAASwL,MACrB,OAADmO,QAAC,IAADA,OAAA,EAAAA,EAAG9Y,QAAS,IACd8I,GAAG9H,KAAK,KAAO8X,EAAEtR,OAAO,IAE1BsB,GAAGT,QA6BP,MAAO,CAAE5F,KA3BA,WACLwH,GAAQ,MAAOyiC,GACfxtC,OAAOqe,iBAAiB,aAAcqvB,IAyB3BjqC,OAvBJ,WAAO,IAAD,EACW8pC,IAAhBlkC,EADK,EACLA,KAAMnE,EADD,EACCA,MAEd,GAAIA,EAAO,CACT,IAAMyhB,EAAyB,cAAVzhB,EACjB,kBAACioC,EAAA,EAAD,CAAS1/B,MAAM,yBAAyBmG,KAAMw5B,IAAYC,QAC1DnoC,EACJ,OAAO,yBAAK9E,UAAWqQ,GAAKpR,GAAIstC,iBAAkBttC,GAAIqtC,MAAO/lB,GAE/D,OAAKtd,EAGH,yBAAKjJ,UAAWf,GAAIqtC,KAClB,kBAACzrB,GAAD,CAAYlZ,IAAKsB,EAAKtB,IAAKsB,KAAMA,IACjC,kBAACyjC,GAAD,MACA,kBAAC,GAAD,OANc,kBAACK,EAAA,EAAD,CAAS/sC,UAAWf,GAAIstC,iBAAkB/4B,KAAMw5B,IAAYC,MAAO5/B,MAAM,iBAcxEpM,QAJX,WACRrB,OAAOse,oBAAoB,aAAcovB,IAGbH,e,mBCnFrBI,GAvBJ,WACP,IACEC,EAAS,CACP,CACE/jC,KAAM,UACNgkC,OAAO,EACPpqC,OAAQ,kBAAM,kBAAC,EAAD,QAEhB,CACEoG,KAAM,IACNgkC,OAAO,EACPpqC,OAAQ,kBAAM,kBAAC,GAAD,SAGpB,OACE,kBAAC,KAAD,KACE,kBAAC,KAAD,KACGmqC,EAAOvrC,KAAI,SAACoD,EAAGlD,GAAJ,OAAU,kBAAC,KAAD,CAAOwF,IAAKxF,EAAGsH,KAAMpE,EAAEoE,KAAMgkC,MAAOpoC,EAAEooC,MAAOpqC,OAAQgC,EAAEhC,e,UCIrFiZ,GAAOha,GAAK,YAA4C,IAAzC8F,EAAwC,EAAxCA,KAAMnF,EAAkC,EAAlCA,MAAOoF,EAA2B,EAA3BA,QAExBsF,EAAQ1K,EAAM0K,MAAM1L,KAAI,gBAAGmG,EAAH,EAAGA,KAAMiF,EAAT,EAASA,MAAT,MAAsB,CAC5C1F,IAAKS,EACLgF,KAAMC,EACNO,QAAS,WACHxF,EAAKyF,WAAW,KAClBjO,OAAOC,SAASwL,KAAOjD,EAAKF,OAAO,IAGrCsB,GAAG9H,KAAK0G,IAAQ,EAChBoB,GAAGT,aAMT,MAAO,CAAE1F,OAFE,kBAAM,kBAACqqC,GAAA,EAAD,CAAYt/B,YAAWhG,EAAMuF,MAAOA,KAEpCtF,cAGrBI,GAAMiP,SAAS,cAAe4E,ICtB9B,IACEqxB,GAAsB,CACpBxqB,WAAY,MACZyqB,SAAU,UAEZpvB,GAA0B,CACxBC,MAAO,aACPC,IAAK,WACLC,OAAQ,SACRC,QAAS,gBACTC,OAAQ,gBAEVC,GAAsB,CACpBL,MAAO,aACPC,IAAK,WACLC,OAAQ,SACRI,SAAU,WACVC,QAAS,WAEXC,GAAqB,CACnBR,MAAO,aACPC,IAAK,WACLC,OAAQ,SACRC,QAAS,gBACTC,OAAQ,eACRG,QAAS,WAEX6uB,GAAc,SAAC5qC,GACb,IACEhE,EAA2B,CAAEK,QAAS,QACtC6f,EAAYwuB,GAAW1qC,EAAMkc,WAAa,IAC1CC,EAAUZ,GAAevb,EAAMmc,SAAW,IAC1CC,EAAQP,GAAW7b,EAAMoc,OAAS,IAClCE,EAAON,GAAUhc,EAAMsc,MAAQ,IASjC,OAPIJ,IAAWlgB,EAAIQ,cAAgB0f,GAC/BC,IAASngB,EAAIO,eAAiB4f,GAC9BC,IAAOpgB,EAAIM,WAAa8f,GACxBE,IACFtgB,EAAIugB,SAAW,OACfvgB,EAAIqgB,aAAeC,GAEdtgB,GAITqd,GAAOha,GAAK,YAA4C,IAAzC8F,EAAwC,EAAxCA,KAAMnF,EAAkC,EAAlCA,MAUnB,MAAO,CAAEI,OARE,WAEP,OACE,yBAAK+K,YAAWhG,EAAMgT,MAAOyyB,GAAY5qC,IACvC,kBAAC,GAAD,CAAQoV,KAAMpV,EAAM6qC,UAAWtrC,MAAOS,EAAM8qC,WAAY5pC,KAAMlB,EAAMkB,SAI3DkE,QAVoC,EAA3BA,YAa9BI,GAAMiP,SAAS,OAAQ4E,ICrDvB,IAUE0xB,GAAU,SAACzpC,EAAQ0pC,GACjB,IADuC,EACjCrpC,EAAW,GADsB,cAEvBqpC,GAFuB,IAEvC,gCAAWprC,EAAX,QAAuB+B,EAAEzD,KAAKoD,EAAE1B,KAFO,kDAGvBorC,GAHuB,IAGvC,mCAA8B1pC,EAA9B,UAHuC,8BAIvC,OAAOK,GAETspC,GAAO,SAACtqC,GAAD,OAAeA,EAAEgF,MAAM,OAAO3G,KAAI,SAAAxB,GAAC,OAAKA,MAC/C0tC,GAAM,SAAantC,EAAS8F,EAAS/F,GAInC,IAHA,IACE0E,EAAIzE,EAAEN,OACN+G,EAAU,IAAIxC,MAAMQ,GACbtD,EAAI,EAAGA,EAAIsD,EAAGtD,IAAKsF,EAAEtF,GAAKpB,EAAEC,EAAEmB,GAAI2E,EAAE3E,IAC7C,OAAOsF,GAET2mC,GAAO,SAAiBptC,EAAS8F,EAASW,EAAS1G,GAIjD,IAHA,IACE0E,EAAIzE,EAAEN,OACN6D,EAAU,IAAIU,MAAMQ,GACbtD,EAAI,EAAGA,EAAIsD,EAAGtD,IAAKoC,EAAEpC,GAAKpB,EAAEC,EAAEmB,GAAI2E,EAAE3E,GAAIsF,EAAEtF,IACnD,OAAOoC,GAET8pC,GAAgC,CAC9BC,MAAOnP,KACP,eAAgBA,KAChB,aAAcA,KACdoP,SAAUpP,KACV,kBAAmBA,KACnB,gBAAiBA,KACjBqP,OAAQrP,KACR,gBAAiBA,KACjB,cAAeA,KACfsP,OAAQtP,KACR,gBAAiBA,KACjB,aAAcA,KACd,aAAcA,KACduP,QAASvP,KACTvC,KAAMuC,KACN,aAAcA,KACd,cAAeA,MAEjBwP,GAAO,kBAAM,GACbC,GAAO,SAACrqC,GAAD,OAAYA,EAAE,IACrBsqC,GAAO,SAACtqC,GAAD,OAAYA,EAAE,IACrBuqC,GAAO,SAACvqC,GAAD,OAAYA,EAAE,IAGrB+X,GAAOha,GAAK,YAA4C,IAAzC8F,EAAwC,EAAxCA,KAAMnF,EAAkC,EAAlCA,MAAOoF,EAA2B,EAA3BA,QAIxB0mC,EAAW,SAACpnB,EAAQxlB,GAAU,IAAD,EA3DlB,SAACoC,GACd,IACElD,EAAIkD,EAAC,IAAU,IACfvD,EAAS,GAGX,IAAK,IAAM6B,YAFJ0B,EAAC,GAEQA,EAAGvD,EAAE6B,EAAEyM,QAAQ,KAAM,MAAQ/K,EAAE1B,GAC/C,MAAO,CAACxB,EAAGL,GAsDIguC,CAAarnB,GAFG,mBAExBtmB,EAFwB,KAErBL,EAFqB,KAG3B,OAAQK,GACN,IAAK,IAAM,IAAD,EAEa2sC,GAAQhtC,EAAG,CAAC,KAAM,KAAM,KAAM,OAF3C,mBAELiuC,EAFK,KAEDC,EAFC,KAEGC,EAFH,KAEOC,EAFP,KAGN7qC,EAAI46B,OAAS,CACXD,YAAa+P,EACbhQ,YAAaiQ,EACb9P,WAAY+P,EAAKt7B,KAAKkkB,GAAK,IAC3BsH,SAAU+P,EAAKv7B,KAAKkkB,GAAK,MAE7B,OAAO,wCAAMpwB,IAAKxF,GAAOnB,EAAlB,CAAqBuD,EAAGA,KAEjC,IAAK,IAAK,OAAO,0CAAQoD,IAAKxF,GAAOnB,IACrC,IAAK,IAAK,OAAO,2CAAS2G,IAAKxF,GAAOnB,IACtC,IAAK,IAAK,OAAO,yCAAO2G,IAAKxF,GAAOnB,IACpC,IAAK,IAAK,OAAO,wCAAM2G,IAAKxF,GAAOnB,IACnC,IAAK,IAAK,OAAO,wCAAM2G,IAAKxF,GAAOnB,IACnC,IAAK,KAAM,OAAO,2CAAS2G,IAAKxF,GAAOnB,IACvC,IAAK,KAAM,OAAO,4CAAU2G,IAAKxF,GAAOnB,IACxC,IAAK,IAAK,OAAO,wCAAM2G,IAAKxF,GAAOnB,IACnC,IAAK,IAAM,IAAD,EAE0BgtC,GAAQhtC,EAAG,CAAC,IAAK,IAAK,KAAM,KAAM,QAAS,WAFrE,mBAELP,EAFK,KAEFc,EAFE,KAECoyB,EAFD,KAEKI,EAFL,KAES2C,EAFT,KAEgB2Y,EAFhB,KAGN5nC,EAAI4mC,GAAO3X,IAAUyI,KACrB56B,EAAI8qC,EACO,KAAPtb,EACEoL,OAAgBmQ,MAAMV,IAAM3P,YAAY4P,IAAM3P,YAAYyP,IAAMjY,MAAMjvB,EAAtE03B,CAAyEgP,GAAID,GAAKztC,GAAIytC,GAAK3sC,IAAI,SAACd,EAAGc,GAAJ,MAAU,CAACd,EAAGc,OAC7GwyB,EACEoL,OAAgBmQ,MAAMV,IAAM3P,YAAY6P,IAAM5P,YAAY2P,IAAMnY,MAAMjvB,EAAtE03B,CAAyEiP,GAAKF,GAAKztC,GAAIytC,GAAKna,GAAKma,GAAK3sC,IAAI,SAACd,EAAGszB,EAAIxyB,GAAR,MAAc,CAACd,EAAGszB,EAAIxyB,OACzH,KAAPoyB,EACEwL,OAAgBE,SAASuP,IAAMxP,WAAWuP,IAAMY,OAAOV,IAAMnY,MAAMjvB,EAAnE03B,CAAsEgP,GAAID,GAAKztC,GAAIytC,GAAK3sC,IAAI,SAACd,EAAGc,GAAJ,MAAU,CAACd,EAAGc,OAC1GoyB,EACEwL,OAAgBE,SAASwP,IAAMzP,WAAWwP,IAAMW,OAAOT,IAAMpY,MAAMjvB,EAAnE03B,CAAsEiP,GAAKF,GAAKva,GAAKua,GAAKztC,GAAIytC,GAAK3sC,IAAI,SAACoyB,EAAIlzB,EAAGc,GAAR,MAAc,CAACoyB,EAAIlzB,EAAGc,OAC7H49B,OAAgBzI,MAAMjvB,EAAtB03B,CAAyBgP,GAAID,GAAKztC,GAAIytC,GAAK3sC,IAAI,SAACd,EAAGc,GAAJ,MAAU,CAACd,EAAGc,OAC9D,KAAPwyB,EACEoL,OAAU1+B,EAAEmuC,IAAMY,GAAGX,IAAM9a,GAAG4a,IAAMjY,MAAMjvB,EAA1C03B,CAA6CgP,GAAID,GAAKztC,GAAIytC,GAAK3sC,IAAI,SAACd,EAAGc,GAAJ,MAAU,CAACd,EAAGc,OACjFwyB,EACEoL,OAAU1+B,EAAEmuC,IAAMY,GAAGV,IAAM/a,GAAG8a,IAAMnY,MAAMjvB,EAA1C03B,CAA6CiP,GAAKF,GAAKztC,GAAIytC,GAAKna,GAAKma,GAAK3sC,IAAI,SAACd,EAAGszB,EAAIxyB,GAAR,MAAc,CAACd,EAAGszB,EAAIxyB,OAC7F,KAAPoyB,EACEwL,OAAUsQ,GAAGb,IAAMjb,GAAGgb,IAAMptC,EAAEstC,IAAMnY,MAAMjvB,EAA1C03B,CAA6CgP,GAAID,GAAKztC,GAAIytC,GAAK3sC,IAAI,SAACd,EAAGc,GAAJ,MAAU,CAACd,EAAGc,OACjFoyB,EACEwL,OAAUsQ,GAAGZ,IAAMlb,GAAGib,IAAMrtC,EAAEutC,IAAMpY,MAAMjvB,EAA1C03B,CAA6CiP,GAAKF,GAAKva,GAAKua,GAAKztC,GAAIytC,GAAK3sC,IAAI,SAACoyB,EAAIlzB,EAAGc,GAAR,MAAc,CAACoyB,EAAIlzB,EAAGc,OACpG49B,OAAUzI,MAAMjvB,EAAhB03B,CAAmBgP,GAAID,GAAKztC,GAAIytC,GAAK3sC,IAAI,SAACd,EAAGc,GAAJ,MAAU,CAACd,EAAGc,OACrE,OAAO,wCAAMoG,IAAKxF,GAAOnB,EAAlB,CAAqBuD,EAAGA,KAEjC,IAAK,IAAM,IAAD,EACOypC,GAAQhtC,EAAG,CAAC,SAApBoM,EADC,oBAER,OAAO,wCAAMzF,IAAKxF,GAAOnB,GAAKoM,GAEhC,QAAS,OAAO,uCAAKzF,IAAKxF,GAAOnB,MAqBvC,MAAO,CAAEqC,OAlBE,WAAO,IAEVqsC,EAA0CzsC,EAA1CysC,SAAUtwC,EAAgC6D,EAAhC7D,MAAOuN,EAAyB1J,EAAzB0J,OAAQgjC,EAAiB1sC,EAAjB0sC,MAAOC,EAAU3sC,EAAV2sC,MAClCC,EAAWF,EAAQzrC,EAAayrC,GAAO1tC,IAAI8sC,GAAY,GACvDe,EAAWF,EAAQ1rC,EAAa0rC,GAAO3tC,KAAI,WAAWE,GAAX,IAAGoC,EAAH,EAAGA,EAAGojB,EAAN,EAAMA,EAAN,OAAiBonB,EAAS,2BAC/DxqC,EAAIG,KAAKC,MAAMJ,GAAK,IACpBojB,EAAIjjB,KAAKC,MAAMgjB,GAAK,IACvBxlB,MAAM,GACX,OACE,yBAAKiM,YAAWhG,GACd,yBAAK2nC,QAASL,EAAUtwC,MAAOA,EAAOuN,OAAQA,GAC5C,2BAAIkjC,GACJ,2BAAIC,MAMGznC,cAGrBI,GAAMiP,SAAS,WAAY4E,ICjK3B,IACExG,GAAQC,KACR9W,GAAMC,YAAW,CACfyJ,KAAM,CACJrJ,QAAS,OACTG,cAAe,UAEjB+N,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAEhBsE,KAAM,CACJyF,SAAU,EACVrF,SAAU,OACV1N,MAAO,CACL,KAAM,CACJo7B,aAAc,aAAehyB,GAAME,OAAOzE,MAC1C3E,QAAS,WAIf+6B,MAAO,CACLvoC,MAAO,UAeXkd,GAAOha,GAAK,YAA+C,IAA5C8F,EAA2C,EAA3CA,KAAaxE,EAA8B,EAArCX,MA0CnB,MAAO,CAAEI,OAxCE,WACP,IAAIo9B,EAAQv8B,EAAcN,EAAE68B,OAEvBx7B,MAAMC,QAAQu7B,KAAQA,EAAQ,CAAC,CAAEjzB,MAAO,UAE7C,IACEwiC,EAAMvP,EAAMx+B,KAAI,SAACyiC,EAAMviC,GAAP,OAAc,wBAAIwF,IAAKxF,GAAIuiC,EAAKl3B,UAChDhI,EAAUi7B,EAAMx+B,KAAI,gBAAGoW,EAAH,EAAGA,KAAM7V,EAAT,EAASA,MAAO0H,EAAhB,EAAgBA,MAAhB,MAA6B,CAAEmO,OAAM7V,MAAO0B,EAAY1B,GAAQ0H,YACpF+lC,EAAM/rC,EAAcN,EAAEO,MAAMlC,KAAI,SAACkC,EAAMhC,GACrC,IAAM+tC,EAAM1qC,EAAQvD,KAAI,WAAyBsD,GAAO,IAA7B8S,EAA4B,EAA5BA,KAAM7V,EAAsB,EAAtBA,MAAO0H,EAAe,EAAfA,MACtC,GAAa,MAATA,EACF,OAAO,4BAAI,kBAAC,GAAD,CAAQ/F,KAAMA,EAAM8L,OAAQ/F,KAEvC,IAAMvB,EAAkB,CACtBP,KAAM1E,IACNT,MAAM,2BAAMT,GAAP,IAAc6V,OAAMlU,SACzBkE,QAAS7H,KAEX,OAAO,4BAAI,kBAAC,GAAD,CAAUmH,IAAKpC,EAAGoD,KAAMA,QAGvC,OAAQ,wBAAIhB,IAAKxF,GAAI+tC,MAGzB,OACE,yBAAK9hC,YAAWhG,EAAMpI,UAAWf,GAAI0J,MACnC,yBAAK3I,UAAWf,GAAIuO,OAAQ5J,EAAE4J,OAAS,YACvC,yBAAKxN,UAAWf,GAAI+a,MAClB,2BAAOha,UAAWf,GAAI0oC,OACpB,+BACE,4BAAKqI,IAEP,+BACGC,OAOE5nC,QA1CuC,EAA3BA,YA6CjCI,GAAMiP,SAAS,OAAQ4E,I,iCCtDrB6zB,GAAO,SAAC,GAA6B,IAA3BxiC,EAA0B,EAA1BA,MAAOzD,EAAmB,EAAnBA,MACTo5B,EAAS31B,EAAM1L,KAAI,SAAC2O,GAAD,MAAuB,CAC9CxI,KAAMwI,EAAEvD,MACR+iC,kBAAmBx/B,EAAEy/B,UACrBC,MAAO1/B,EAAEjD,MAAM1L,KAAI,gBAAGmG,EAAH,EAAGA,KAAMiF,EAAT,EAASA,MAAOR,EAAhB,EAAgBA,KAAhB,MAAsC,CACvDlF,IAAKS,EACLA,KAAMiF,EACNR,OACAs1B,IAAK,GACLv0B,QAAS,WACHxF,EAAKyF,WAAW,KAClBjO,OAAOC,SAASwL,KAAOjD,EAAKF,OAAO,IAGrCsB,GAAG9H,KAAK0G,IAAQ,EAChBoB,GAAGT,iBAIT,OAAO,kBAACwnC,GAAA,EAAD,CAAKjN,OAAQA,EAAQyD,YAAa78B,KAE3CoS,GAAOha,GAAK,YAA4C,IAAzC8F,EAAwC,EAAxCA,KAAMnF,EAAkC,EAAlCA,MAEnB,MAAO,CAAEI,OADM,kBAAM,yBAAK+K,YAAWhG,GAAM,kBAAC,GAASnF,KACpCoF,QAFoC,EAA3BA,YAK9BI,GAAMiP,SAAS,MAAO4E,GAAMtI,GAAW+G,MCpDvC,IACEjF,GAAQC,KAER9W,GAAMC,YAAW,CACfyJ,KAAM,CACJ4D,SAAU,WAAYiM,KAAM,EAAGhM,IAAK,EAAGC,MAAO,EAAGiN,OAAQ,EACzDpa,QAAS,OACTC,WAAY,UAEdixC,IAAK,CACHpxC,MAAOqxC,GACP9jC,OAAQ8jC,GACRnxC,QAAS,OACTC,WAAY,SACZ0N,OAAQ,WAEVyjC,OAAQ,CACNhkC,MAAO,CACL,UAAW,CACT+D,MAAOqF,GAAME,OAAO/M,KACpBgE,OAAQ,aAIdJ,KAAM,CACJ6G,SAvBO,GAwBP/G,OAxBO,GAyBPvN,MAzBO,IA2BTuxC,IAAK,CACHlxB,SAAU,GAEZjS,MAAM,2BACDsI,GAAM7B,KAAKe,KACXc,GAAM7B,KAAKsB,IAEhBq7B,SAAS,aACPrkC,SAAU,WACVC,KAAM,GACHsJ,GAAM7B,KAAKO,OAwBlBq8B,GAAavuC,GAAK,YAAuE,IAApEqL,EAAmE,EAAnEA,MAAOua,EAA4D,EAA5DA,QAExB4oB,EAAU,kBAAM5oB,GAAQ,IAY1B,MAAO,CAAE7kB,OAXE,kBACP,kBAAC0tC,GAAA,EAAD,CACEC,gBAAc,EACd7wC,KAAM8wC,KAAUC,eAChB9oB,OAAQF,IACR1Z,UAAWsiC,EACXK,gBAAgB,GAEhB,kBAAC,GAAD,CAAMxjC,MAAOA,MAGFua,cAInB5L,GAAOha,GAAK,YAA4C,IAAzC8F,EAAwC,EAAxCA,KAAMnF,EAAkC,EAAlCA,MAAOoF,EAA2B,EAA3BA,QAExB+oC,EAAO5wC,GAAI,GACX6wC,EAAU,kBAAMD,GAAK,IA0BvB,MAAO,CAAE/tC,OAzBE,WAAO,IAEVmK,EAA2CvK,EAA3CuK,MAAOojC,EAAoC3tC,EAApC2tC,SAAU/jC,EAA0B5J,EAA1B4J,KAAMykC,EAAoBruC,EAApBquC,WAAYC,EAAQtuC,EAARsuC,IACrCb,EAASa,EAEL,yBAAKvxC,UAAWqQ,GAAKpR,GAAIuxC,IAAKvxC,GAAIyxC,QAAS9iC,QAASyjC,GAClD,kBAACG,GAAA,EAAD,CAAUxxC,UAAWf,GAAI4N,KAAMU,SAAS,qBAG1C,yBAAKvN,UAAWf,GAAIuxC,KAClB,kBAACgB,GAAA,EAAD,CAAUxxC,UAAWf,GAAI4N,KAAMU,SAAQ,OAAEV,QAAF,IAAEA,IAAQ,gBAAiBuO,MAAO,CAAE3K,MAAOqF,GAAMrF,MAAM6gC,OAItG,OACE,yBAAKljC,YAAWhG,EAAMpI,UAAWf,GAAI0J,MAClC+nC,EACD,yBAAK1wC,UAAWf,GAAI0xC,KAClB,yBAAK3wC,UAAWf,GAAIuO,OAAQA,GAC5B,yBAAKxN,UAAWf,GAAI2xC,UAAWA,IAEhCW,GAAO,kBAACV,GAAD,CAAYljC,MAAO4jC,EAAKrpB,QAASkpB,MAIhC/oC,cAGrBI,GAAMiP,SAAS,SAAU4E,GAAMtI,GAAW8G,QCnH1C,IACEhF,GAAQC,KACR9W,GAAMC,YAAW,CACfyJ,KAAM,CACJrJ,QAAS,OACTG,cAAe,UAEjB+N,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAEhB+7B,IAAK,CACHhyB,SAAU,EACViyB,UAAW,UACX9wB,UAAW,uBAiBftE,GAAOha,GAAK,YAA+C,IAA5C8F,EAA2C,EAA3CA,KAAaxE,EAA8B,EAArCX,MAUnB,MAAO,CAAEI,OATM,kBACb,yBAAK+K,YAAWhG,EAAMpI,UAAWf,GAAI0J,MACnC,yBAAK3I,UAAWf,GAAIuO,OAClB,kBAAC,GAAD,CAAQrJ,KAAMP,EAAEO,KAAM8L,OAAQrM,EAAE4J,SAElC,yBAAKxN,UAAWf,GAAIwyC,IAAKE,IAAK/tC,EAAE4J,MAAOmgB,IAAG,qBAAgB/pB,EAAEzD,KAAlB,mBAAiCyD,EAAEguC,WAIhEvpC,QAVuC,EAA3BA,YAajCI,GAAMiP,SAAS,QAAS4E,IC9CxB,IAAMrd,GAAMC,YAAW,CACrB8a,KAAM,CACJzN,SAAU,YAEZslC,KAAM,CACJtlC,SAAU,WACVnN,MAAO,OACP8N,QAAS,KAEXoyB,IAAK,CACH/yB,SAAU,cAUDulC,GAAc,SAAC,GAAwC,IAAtCthC,EAAqC,EAArCA,UAAWC,EAA0B,EAA1BA,MAAOvG,EAAmB,EAAnBA,MAC9C,OACE,yBAAKlK,UAAWf,GAAI+a,KAAMoB,MAAO,CAAEzO,OAAQ6D,IACzC,yBAAKxQ,UAAWf,GAAI4yC,KAAMz2B,MAAO,CAAEzO,OAAQ6D,EAAW8J,gBAAiB7J,KACvE,yBAAKzQ,UAAWf,GAAIqgC,IAAKlkB,MAAO,CAAEhc,MAAM,GAAD,OAAKyU,KAAKC,MAAc,IAAR5J,GAAhB,KAAiCyC,OAAQ6D,EAAW8J,gBAAiB7J,OCpBhHqF,GAAQC,KACR9W,GAAMC,YAAW,CACfyJ,KAAM,CACJrJ,QAAS,OACTG,cAAe,SACfD,eAAgB,iBAElBgO,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAEhB6O,OAAO,yBACLjlB,QAAS,OACTC,WAAY,WACZC,eAAgB,iBACbsW,GAAM7B,KAAKa,KACXgB,GAAM7B,KAAKsB,IAEhBrL,MAAO,GAEP6nC,UAAW,CACTthC,MAAOqF,GAAME,OAAOnE,OAEtBpE,QAAQ,2BACHqI,GAAM7B,KAAKQ,KADT,IAELhE,MAAOqF,GAAME,OAAOrE,QAEtBqgC,SAAS,yBACP1yC,QAAS,OACTC,WAAY,WACZC,eAAgB,iBACbsW,GAAM7B,KAAKO,KAJR,IAKN/D,MAAOqF,GAAME,OAAOnE,QAEtBogC,cAAe,GAEfC,kBAAmB,KA2BrB51B,GAAOha,GAAK,YAA+C,IAA5C8F,EAA2C,EAA3CA,KAAaxE,EAA8B,EAArCX,MAoCnB,MAAO,CAAEI,OAlCE,WACP,IACEc,EAAOD,EAAON,EAAEO,MAElB,OACE,yBAAKiK,YAAWhG,EAAMpI,UAAWf,GAAI0J,MACnC,yBAAK3I,UAAWf,GAAIuO,OAClB,kBAAC,GAAD,CAAQrJ,KAAMA,EAAM8L,OAAQrM,EAAE4J,SAEhC,yBAAKxN,UAAWf,GAAIwO,SAClB,kBAAC,GAAD,CAAQtJ,KAAMA,EAAM8L,OAAQrM,EAAE6J,WAEhC,6BACE,yBAAKzN,UAAWf,GAAIslB,QAClB,yBAAKvkB,UAAWf,GAAIiL,OAClB,kBAAC,GAAD,CAAQ/F,KAAMA,EAAM8L,OAAQrM,EAAEsG,SAEhC,yBAAKlK,UAAWf,GAAI8yC,WAClB,kBAAC,GAAD,CAAQ5tC,KAAMA,EAAM8L,OAAQrM,EAAEmuC,cAGlC,kBAAC,GAAD,CAAavhC,UAAW,EAAGC,MAAOqF,GAAMrF,MAAM7M,EAAEuuC,YAAajoC,MAAOtG,EAAE87B,WACtE,yBAAK1/B,UAAWf,GAAI+yC,UAClB,yBAAKhyC,UAAWf,GAAIgzC,eAClB,kBAAC,GAAD,CAAQ9tC,KAAMA,EAAM8L,OAAQrM,EAAEquC,iBAEhC,yBAAKjyC,UAAWf,GAAIizC,mBAClB,kBAAC,GAAD,CAAQ/tC,KAAMA,EAAM8L,OAAQrM,EAAEsuC,yBAO3B7pC,QApCuC,EAA3BA,YAuCjCI,GAAMiP,SAAS,iBAAkB4E,ICxGjC,IACExG,GAAQC,KACR9W,GAAMC,YAAW,CACfyJ,KAAM,CACJrJ,QAAS,OACTG,cAAe,UAEjB+N,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAEhB6O,OAAQ,CACNjlB,QAAS,OACTC,WAAY,YAEd2K,MAAM,2BACD4L,GAAM7B,KAAKiB,KACXY,GAAM7B,KAAKqB,IAEhBy8B,UAAW,CACT5vB,WAAY,EACZ1R,MAAOqF,GAAME,OAAOpE,OAEtBnE,QAAQ,2BACHqI,GAAM7B,KAAKQ,KADT,IAELhE,MAAOqF,GAAME,OAAOrE,UAmBxB2K,GAAOha,GAAK,YAA+C,IAA5C8F,EAA2C,EAA3CA,KAAaxE,EAA8B,EAArCX,MAsBnB,MAAO,CAAEI,OApBE,WACP,OACE,yBAAK+K,YAAWhG,EAAMpI,UAAWf,GAAI0J,MACnC,yBAAK3I,UAAWf,GAAIuO,OAClB,kBAAC,GAAD,CAAQrJ,KAAMP,EAAEO,KAAM8L,OAAQrM,EAAE4J,SAElC,yBAAKxN,UAAWf,GAAIslB,QAClB,yBAAKvkB,UAAWf,GAAIiL,OAClB,kBAAC,GAAD,CAAQ/F,KAAMP,EAAEO,KAAM8T,aAAcrU,EAAEsG,MAAO+F,OAAQrM,EAAEsG,SAEzD,yBAAKlK,UAAWf,GAAI8yC,WAClB,kBAAC,GAAD,CAAQ5tC,KAAMP,EAAEO,KAAM8L,OAAQrM,EAAEmuC,cAGpC,yBAAK/xC,UAAWf,GAAIwO,SAClB,kBAAC,GAAD,CAAQtJ,KAAMP,EAAEO,KAAM8L,OAAQrM,EAAE6J,aAKzBpF,QAtBuC,EAA3BA,YAyBjCI,GAAMiP,SAAS,aAAc4E,ICrE7B,IACExG,GAAQC,KACR9W,GAAMC,YAAW,CACfyJ,KAAM,CACJrJ,QAAS,OACTG,cAAe,UAEjB+N,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAEhBsE,KAAM,CACJyF,SAAU,EACVrF,SAAU,OACV1N,MAAO,CACL,KAAM,CACJo7B,aAAc,aAAehyB,GAAME,OAAOzE,MAC1C3E,QAAS,aAsBjB0P,GAAOha,GAAK,YAA+C,IAA5C8F,EAA2C,EAA3CA,KAAaxE,EAA8B,EAArCX,MAYnB,MAAO,CAAEI,OAVE,WACP,OACE,yBAAK+K,YAAWhG,EAAMpI,UAAWf,GAAI0J,MACnC,yBAAK3I,UAAWf,GAAIuO,OAAQ5J,EAAE4J,OAC9B,yBAAKxN,UAAWf,GAAI+a,MAClB,kBAAC,GAAD,CAAQ3B,KAAMzU,EAAEkqC,UAAWtrC,MAAOoB,EAAEmqC,WAAY5pC,KAAMP,EAAEO,UAKjDkE,QAZuC,EAA3BA,YAejCI,GAAMiP,SAAS,OAAQ4E,ICtDvB,IACExG,GAAQC,KACR9W,GAAMC,YAAW,CACfshC,KAAM,CACJlhC,QAAS,OACTE,eAAgB,iBAElBgZ,KAAM,CACJ/Y,cAAe,UAEjBgN,MAAO,CACLhN,cAAe,UAEjB+N,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAEhBjI,QAAQ,2BACHqI,GAAM7B,KAAKQ,KADT,IAELhE,MAAOqF,GAAME,OAAOrE,QAEtBzH,MAAM,eACD4L,GAAM7B,KAAKO,KAEhBu9B,UAAU,2BACLj8B,GAAM7B,KAAKQ,KADP,IAEPhE,MAAOqF,GAAME,OAAOrE,UAkBpBo4B,GAA2B,CAC/Bv8B,MAAO,YAIP8O,GAAOha,GAAK,YAA4C,IAAzC8F,EAAwC,EAAxCA,KAAMnF,EAAkC,EAAlCA,MA4BnB,MAAO,CAAEI,OA1BE,WACP,IACEO,EAAIkS,GAAMG,MAAM8zB,GAAU9mC,GAC1BkB,EAAOD,EAAON,EAAEO,MAElB,OACE,yBAAKiK,YAAWhG,EAAMpI,UAAWf,GAAIuhC,MACnC,yBAAKxgC,UAAWf,GAAIuZ,MAClB,yBAAKxY,UAAWf,GAAIuO,OAClB,kBAAC,GAAD,CAAQrJ,KAAMA,EAAM8L,OAAQrM,EAAE4J,SAEhC,yBAAKxN,UAAWf,GAAIwO,SAClB,kBAAC,GAAD,CAAQtJ,KAAMA,EAAM8L,OAAQrM,EAAE6J,YAGlC,yBAAKzN,UAAWf,GAAIwN,OAClB,yBAAKzM,UAAWf,GAAIiL,OAClB,kBAAC,GAAD,CAAQ/F,KAAMA,EAAM8L,OAAQrM,EAAEsG,SAEhC,yBAAKlK,UAAWf,GAAI8yC,WAClB,kBAAC,GAAD,CAAQ5tC,KAAMA,EAAM8L,OAAQrM,EAAEmuC,gBAMzB1pC,QA5BoC,EAA3BA,YA+B9BI,GAAMiP,SAAS,aAAc4E,IClFtB,IACLA,GAAOha,GAAK,YAAyD,IAAtD8F,EAAqD,EAArDA,KAAMnF,EAA+C,EAA/CA,MAOnB,MAAO,CAAEI,OALE,kBACP,yBAAK+K,YAAWhG,GACd,6BAAM1D,KAAK6F,UAAUtH,EAAO,KAAM,MAGvBoF,QAPiD,EAAxCA,YAU9BI,GAAMiP,SAAS,GAAI4E,ICTnB,IAGEpL,GAAU,0HAA0HtI,MAAM,QAG1IkN,GAAQC,KACR9W,GAAMC,YAAW,CACfyJ,KAAM,CACJrJ,QAAS,OACTG,cAAe,UAEjB+N,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAEhB08B,OAAQ,CACN9yC,QAAS,OAAQkgB,SAAU,OAC3BpgB,MAhBSizC,IAgBU1lC,OAhBV0lC,KAkBXC,SAAU,CACR/P,WAAY,GACZlV,UAAW,GACXklB,UAAW,kBAEbC,MAAO,CACLlzC,QAAS,eACTF,MA1BQ,GA0BUuN,OA1BV,MAuDZ2P,GAAOha,GAAK,YAA+C,IAA5C8F,EAA2C,EAA3CA,KAAaxE,EAA8B,EAArCX,MAAUoF,EAA2B,EAA3BA,QACzBoqC,EAAQ,OA4CZ,MAAO,CAAEpvC,OArCE,WACP,IACEc,EAAOD,EAAyBN,EAAEO,MAClCmuC,EAAWphC,GAAQjP,KAAI,SAACwF,EAAGtF,GAAJ,OACrB,yBACEwF,IAAKxF,EACLnC,UAAWf,GAAIuzC,MACfp3B,MAAO,CAAEd,gBAAiB7S,GAC1BmG,QAAS,kBAAM6kC,EAAQhrC,QAG3BirC,EAASvuC,EAAKlC,KAAI,SAAC6F,EAAG3F,GACpB,IAAMsO,EAAQ3I,EAAIA,EAAE2I,MA9Cb,SAACtO,GAChB,IAGEwwC,EADMxwC,EAAI,GACE,IAAM,EACpB,OAHQ0R,KAAK++B,MAAMzwC,EAAI,IAGV,IAAM,EACfwwC,EAAM,OAAS,OACfA,EAAM,OAAS,OAuCiBE,CAAe1wC,GAC3C,OACE,yBACEwF,IAAKxF,EACLnC,UAAWf,GAAIuzC,MACfp3B,MAAO,CAAEd,gBAAiB7J,GAC1B7C,QAAS,kBAvBX,SAACzL,GACP,IAAM8G,EAAOO,GAAGP,OAChBA,EAAK1C,IAAL,UAAY6B,EAAZ,iBAAyBjG,GAAe,SAAVswC,EAAmB,KAAO,CAACA,IACzDxpC,EAAKF,OAoBkB+pC,CAAM3wC,SAI7B,OACE,yBAAKiM,YAAWhG,EAAMpI,UAAWf,GAAI0J,MACnC,yBAAK3I,UAAWf,GAAIuO,OAAQ5J,EAAE4J,OAC9B,yBAAKxN,UAAWf,GAAImzC,QAASM,GAC7B,yBAAK1yC,UAAWf,GAAIqzC,UAClB,yBAAKtyC,UAAWf,GAAIuzC,OAClB,yBAAK5kC,QAAS,kBAAM6kC,EAAQ,QAAQ1C,QAAQ,oBAAoB3wC,MA3FlE,GA2FoFuN,OA3FpF,IA4FI,0BAAMpI,EAAE,8cAGX+tC,KAKMjqC,cAGrBI,GAAMiP,SAAS,YAAa4E,IC7FrB,IACLA,GAAOha,GAAK,YAA+C,IAA5C8F,EAA2C,EAA3CA,KAAaxE,EAA8B,EAArCX,MAOnB,MAAO,CAAEI,OALE,kBACP,yBAAK+K,YAAWhG,GACd,kBAAC,GAAD,CAAQiQ,KAAMzU,EAAEkqC,UAAWtrC,MAAOoB,EAAEmqC,WAAY5pC,KAAMP,EAAEO,SAG7CkE,QAPuC,EAA3BA,YAUjCI,GAAMiP,SAAS,SAAU4E,ICdlB,IAAMy2B,GAAb,4MACE9oC,IAAM3G,IAAMi4B,YADd,uDAEY,IAAD,EAEmEr4B,KAAKV,MAA3EpD,EAFG,EAEHA,MAAOuN,EAFJ,EAEIA,OAAQzC,EAFZ,EAEYA,MAAiB8oC,EAF7B,EAEmBC,SAAqBxiC,EAFxC,EAEwCA,MAAOtM,EAF/C,EAE+CA,KAAM+uC,EAFrD,EAEqDA,UAC1DD,EAAWD,GAAwB,IAH9B,EAMY7T,KAAoBh7B,GAAM,SAAAI,GAAC,OAAIA,EAAE2F,MAN7C,mBAMFipC,EANE,KAMIC,EANJ,KAQU,MAAbF,IACEC,EAAOD,EACTC,EAAOD,EACEE,EAAOF,IAChBE,EAAOF,IAIX,IACEvyB,EAAyB,EAAdxc,EAAKzD,OAChB2yC,EAASlU,OAAemU,OAAOnvC,EAAKlC,KAAI,SAAAsC,GAAC,OAAIA,EAAE0uC,OAAYM,MAAM,CAAC,EAAG1/B,KAAKqG,IAAI9a,EAAOuhB,KAAY6yB,aAAa,IAC9GC,EAAStU,OAAiBmU,OAAO,CAACH,EAAMC,IAAOG,MAAM,CAAC5mC,EAAQ,IAC9D+mC,EAAQvvC,EAAKlC,KAAI,SAACsC,EAAGpC,GACnB,IAAM1B,EAAI4yC,EAAO9uC,EAAE0uC,IAAY1xC,EAAIkyC,EAAOlvC,EAAE2F,IAC5C,OAAO,0BAAMvC,IAAKxF,EAAG81B,KAAMxnB,EAAOhQ,EAAGA,EAAGc,EAAGA,EAAGnC,MAAO,EAAGuN,OAAQA,EAASpL,OAE7E,OACE,yBAAK0I,IAAK/G,KAAK+G,IAAK7K,MAAOA,EAAOuN,OAAQA,GACvC+mC,OA5BT,GAA+BpwC,IAAMqwC,WCCnCtF,GAAc,CACZI,OAAQtP,KACRqP,OAAQrP,KACRvC,KAAMuC,KACN,aAAcA,KACd,cAAeA,MAGNyU,GAAb,4MACE3pC,IAAM3G,IAAMi4B,YADd,uDAEY,IAAD,EACyDr4B,KAAKV,MAA7DpD,EADD,EACCA,MAAOuN,EADR,EACQA,OAAQzC,EADhB,EACgBA,MAAOuG,EADvB,EACuBA,MAAOtM,EAD9B,EAC8BA,KAAM+uC,EADpC,EACoCA,UAAWxc,EAD/C,EAC+CA,MAD/C,EAGYyI,KAAoBh7B,GAAM,SAAAI,GAAC,OAAIA,EAAE2F,MAH7C,mBAGFipC,EAHE,KAGIC,EAHJ,KAKU,MAAbF,IACEC,EAAOD,EACTC,EAAOD,EACEE,EAAOF,IAChBE,EAAOF,IAIX,IACEG,EAASlU,OAAiBmU,OAAO,CAAC,EAAGnvC,EAAKzD,OAAS,IAAI6yC,MAAM,CAAC,EAAGn0C,IACjEq0C,EAAStU,OAAiBmU,OAAO,CAACH,EAAMC,IAAOG,MAAM,CAAC5mC,EAAQ,IAC9DknC,EAASxF,GAAO3X,IAAUyI,KAC1B2U,EAAK3U,OAEF4U,SAAQ,SAAAxvC,GAAC,OAAIA,GAAiB,MAAZA,EAAE2F,MACpBzJ,GAAE,SAACsC,EAAGZ,GAAJ,OAAUkxC,EAAOlxC,MACnBZ,GAAE,SAAAgD,GAAC,OAAIkvC,EAAOlvC,EAAE2F,OAChBwsB,MAAMmd,GACTG,EAAK7U,OAEF4U,SAAQ,SAAAxvC,GAAC,OAAIA,GAAiB,MAAZA,EAAE2F,MACpBzJ,GAAE,SAACsC,EAAGZ,GAAJ,OAAUkxC,EAAOlxC,MACnB4xB,IAAG,SAAAhxB,GAAC,OAAI0wC,EAAoB,MAAbP,EAAoBC,EAAOD,MAC1C1D,IAAG,SAAAjrC,GAAC,OAAIkvC,EAAOlvC,EAAE2F,OACjBwsB,MAAMmd,GAEX,OACE,yBAAK5pC,IAAK/G,KAAK+G,IAAK7K,MAAOA,EAAOuN,OAAQA,GACxC,0BAAMpI,EAAGyvC,EAAG7vC,GAAY8zB,KAAMxnB,EAAOynB,YAAY,MAAM+b,eAAe,QAAQC,cAAc,UAC5F,0BAAM3vC,EAAGuvC,EAAG3vC,GAAY8zB,KAAK,OAAOE,OAAQ1nB,EAAO0jC,YAAY,MAAMF,eAAe,QAAQC,cAAc,eApClH,GAA+B5wC,IAAMqwC,WCdnC79B,GAAQC,KACRq+B,GAAa37B,GAAKW,gBAAkB,GACpCna,GAAMC,YAAW,CACfyJ,KAAM,CACJrJ,QAAS,OACTG,cAAe,UAEjB40C,SAAU,CACR/0C,QAAS,OACTE,eAAgB,iBAElBgO,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAEhBxL,MAAM,eACD4L,GAAM7B,KAAKO,KAEhB2mB,KAAM,CACJ5uB,SAAU,WACViM,MAAOC,GAAKI,IACZa,QAASjB,GAAKI,IACdlM,OAAQynC,MA6BZ93B,GAAOha,GAAK,YAA+C,IAA5C8F,EAA2C,EAA3CA,KAAaxE,EAA8B,EAArCX,MAyCnB,MAAO,CAAEI,OAvCE,WACP,IACEixC,EAAY77B,GAAKQ,UACjB9U,EAAOD,EAAON,EAAEO,MAChBg3B,EAAuB,aAAhBv3B,EAAE2wC,UAEL,kBAAC,GAAD,CACEn1C,MAAOk1C,EACP3nC,OAAQynC,GACRjwC,KAAMD,EAAON,EAAE4wC,WACfvB,SAAUrvC,EAAE6wC,cACZvqC,MAAOtG,EAAE8wC,WACTjkC,MAAOqF,GAAMrF,MAAM7M,EAAEuuC,YACrBe,UAAWtvC,EAAE+wC,kBAGf,kBAAC,GAAD,CACEv1C,MAAOk1C,EACP3nC,OAAQynC,GACRjwC,KAAMD,EAAON,EAAE4wC,WACftqC,MAAOtG,EAAE8wC,WACTjkC,MAAOqF,GAAMrF,MAAM7M,EAAEuuC,YACrBe,UAAWtvC,EAAE+wC,gBACbje,MAAO9yB,EAAEgxC,YAAc,WAG/B,OACE,yBAAKxmC,YAAWhG,EAAMpI,UAAWf,GAAI0J,MACnC,yBAAK3I,UAAWf,GAAIo1C,UAClB,yBAAKr0C,UAAWf,GAAIuO,OAAS,YAC3B,kBAAC,GAAD,CAAQrJ,KAAMA,EAAM8L,OAAQrM,EAAE4J,SAEhC,yBAAKxN,UAAWf,GAAIiL,OAClB,kBAAC,GAAD,CAAQ/F,KAAMA,EAAM8L,OAAQrM,EAAEsG,UAGlC,yBAAKlK,UAAWf,GAAIk8B,MAAOA,KAGlB9yB,QAzCuC,EAA3BA,YA4CjCI,GAAMiP,SAAS,oBAAqB4E,IClGpC,IACExG,GAAQC,KACR9W,GAAMC,YAAW,CACfyJ,KAAM,CACJrJ,QAAS,OACTG,cAAe,UAEjB+N,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAEhBxL,MAAM,2BACD4L,GAAM7B,KAAKe,KACXc,GAAM7B,KAAKsB,MAelB+G,GAAOha,GAAK,YAA+C,IAA5C8F,EAA2C,EAA3CA,KAAaxE,EAA8B,EAArCX,MAenB,MAAO,CAAEI,OAbE,WACP,IACEc,EAAOD,EAAON,EAAEO,MAClB,OACE,yBAAKiK,YAAWhG,EAAMpI,UAAWf,GAAI0J,MACnC,yBAAK3I,UAAWf,GAAIuO,OAClB,kBAAC,GAAD,CAAQrJ,KAAMA,EAAM8L,OAAQrM,EAAE4J,SAEhC,yBAAKxN,UAAWf,GAAIiL,OAClB,kBAAC,GAAD,CAAQ/F,KAAMA,EAAM8L,OAAQrM,EAAEsG,WAIvB7B,QAfuC,EAA3BA,YAmBjCI,GAAMiP,SAAS,aAAc4E,I,cCpC3BA,GAAOha,GAAK,YAA4C,IAAzC8F,EAAwC,EAAxCA,KAAMnF,EAAkC,EAAlCA,MAAOoF,EAA2B,EAA3BA,QAExB8+B,EAAc,SAAC3G,GACb,IAAMp4B,EAAI,OAAGo4B,QAAH,IAAGA,OAAH,EAAGA,EAAMh+B,MAAM4kC,QACpBh/B,IACDA,EAAKyF,WAAW,KAClBjO,OAAOC,SAASwL,KAAOjD,EAAKF,OAAO,IAGrCsB,GAAG9H,KAAK0G,IAAQ,EAChBoB,GAAGT,UAWP,MAAO,CAAE1F,OATE,WACP,IACEwxC,EAAa5xC,EAAM0f,KAAOmyB,KAAgBxE,MAAQwE,KAAgBzN,KAClE15B,EAAQ1K,EAAM0K,MAAM1L,KAAI,gBAAGmG,EAAH,EAAGA,KAAMiF,EAAT,EAASA,MAAOR,EAAhB,EAAgBA,KAAhB,OACtB,kBAACkoC,GAAA,EAAD,CAAWptC,IAAKS,EAAMg/B,QAASh/B,EAAMm/B,WAAYl6B,EAAOi6B,SAAUz6B,OAEtE,OAAO,kBAACmoC,GAAA,EAAD,CAAO5mC,YAAWhG,EAAMysC,WAAYA,EAAY1N,YAAaA,EAAa3hB,mBAAoBviB,EAAMiH,OAAQyD,IAGtGtF,cAGrBI,GAAMiP,SAAS,MAAO4E,GAAMtI,GAAW+G,MClCvC,IACEjF,GAAQC,KACR9W,GAAMC,YAAW,CACfyJ,KAAM,CACJrJ,QAAS,OACTG,cAAe,SACfD,eAAgB,iBAElBgO,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAEhBsE,KAAM,CACJzN,SAAU,WACVnN,MAAOqZ,GAAKU,eAAgBxM,OAAQ8L,GAAKU,gBAE3C87B,cAAe,CACb1oC,SAAU,WACViM,KAAM,EAAGhM,IAAK,EACdpN,MAAOqZ,GAAKU,eAAgBxM,OAAQ8L,GAAKU,eACzC7Z,QAAS,OACTG,cAAe,SACfD,eAAgB,SAChBD,WAAY,UAEd2K,MAAM,2BACD4L,GAAM7B,KAAKe,KACXc,GAAM7B,KAAKsB,IAEhBw8B,UAAU,2BACLj8B,GAAM7B,KAAKO,KADP,IAEP/D,MAAOqF,GAAME,OAAOnE,UAqBxByK,GAAOha,GAAK,YAA+C,IAA5C8F,EAA2C,EAA3CA,KAAaxE,EAA8B,EAArCX,MAuBnB,MAAO,CAAEI,OArBE,WACP,IAAMc,EAAOD,EAAON,EAAEO,MAEtB,OACE,yBAAKiK,YAAWhG,EAAMpI,UAAWf,GAAI0J,MACnC,yBAAK3I,UAAWf,GAAIuO,OAClB,kBAAC,GAAD,CAAQrJ,KAAMA,EAAM8L,OAAQrM,EAAE4J,SAEhC,yBAAKxN,UAAWf,GAAI+a,MAClB,kBAAC,GAAD,CAAaxG,KAAMiF,GAAKU,eAAgB3I,UAAW,EAAGC,MAAOqF,GAAMrF,MAAM7M,EAAEuuC,YAAajoC,MAAOtG,EAAE87B,WACjG,yBAAK1/B,UAAWf,GAAIg2C,eAClB,yBAAKj1C,UAAWf,GAAIiL,OAClB,kBAAC,GAAD,CAAQ/F,KAAMA,EAAM8L,OAAQrM,EAAEsG,SAEhC,yBAAKlK,UAAWf,GAAI8yC,WAClB,kBAAC,GAAD,CAAQ5tC,KAAMA,EAAM8L,OAAQrM,EAAEmuC,iBAM3B1pC,QAvBuC,EAA3BA,YA0BjCI,GAAMiP,SAAS,kBAAmB4E,IC7ElC,IACExG,GAAQC,KACRq+B,GAAa37B,GAAKS,WAClBja,GAAMC,YAAW,CACfyJ,KAAM,CACJrJ,QAAS,OACTG,cAAe,UAEjB+N,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAEhBxL,MAAM,2BACD4L,GAAM7B,KAAKe,KACXc,GAAM7B,KAAKsB,IAEhBw8B,UAAU,2BACLj8B,GAAM7B,KAAKO,KADP,IAEP/D,MAAOqF,GAAME,OAAOnE,QAEtBspB,KAAM,CACJ5uB,SAAU,WACViM,MAAOC,GAAKI,IACZa,QAASjB,GAAKI,IACdlM,OAAQynC,MA+BZ93B,GAAOha,GAAK,YAA+C,IAA5C8F,EAA2C,EAA3CA,KAAaxE,EAA8B,EAArCX,MA2CnB,MAAO,CAAEI,OAzCE,WACP,IACEixC,EAAY77B,GAAKQ,UACjB9U,EAAOD,EAAON,EAAEO,MAChBg3B,EAAuB,aAAhBv3B,EAAE2wC,UAEL,kBAAC,GAAD,CACEn1C,MAAOk1C,EACP3nC,OAAQynC,GACRjwC,KAAMD,EAAON,EAAE4wC,WACfvB,SAAUrvC,EAAE6wC,cACZvqC,MAAOtG,EAAE8wC,WACTjkC,MAAOqF,GAAMrF,MAAM7M,EAAEuuC,YACrBe,UAAWtvC,EAAE+wC,kBAGf,kBAAC,GAAD,CACEv1C,MAAOk1C,EACP3nC,OAAQynC,GACRjwC,KAAMD,EAAON,EAAE4wC,WACftqC,MAAOtG,EAAE8wC,WACTjkC,MAAOqF,GAAMrF,MAAM7M,EAAEuuC,YACrBe,UAAWtvC,EAAE+wC,gBACbje,MAAO9yB,EAAEgxC,YAAc,WAI/B,OACE,yBAAKxmC,YAAWhG,EAAMpI,UAAWf,GAAI0J,MACnC,yBAAK3I,UAAWf,GAAIuO,OAClB,kBAAC,GAAD,CAAQrJ,KAAMA,EAAM8L,OAAQrM,EAAE4J,OAAS,cAEzC,yBAAKxN,UAAWf,GAAIiL,OAClB,kBAAC,GAAD,CAAQ/F,KAAMA,EAAM8L,OAAQrM,EAAEsG,SAEhC,yBAAKlK,UAAWf,GAAI8yC,WAClB,kBAAC,GAAD,CAAQ5tC,KAAMA,EAAM8L,OAAQrM,EAAEmuC,aAEhC,yBAAK/xC,UAAWf,GAAIk8B,MAAOA,KAGlB9yB,QA3CuC,EAA3BA,YA8CjCI,GAAMiP,SAAS,mBAAoB4E,ICvEnC,IACE44B,GAA8B,CAAEC,UAAW,QAC3CC,GAAa,SAACrnC,GAAD,OAAyBA,EAAS9L,IAAIozC,KACnDA,GAAY,SAAC,GAA0E,IAAxEjtC,EAAuE,EAAvEA,KAAMiF,EAAiE,EAAjEA,MAAOI,EAA0D,EAA1DA,QAASZ,EAAiD,EAAjDA,KAAMc,EAA2C,EAA3CA,MACzCnE,GAAG9H,KAAK0G,IAAQ,EAShB,MAAO,CACLT,IAAKS,EACLgF,KAAMC,EACN8nC,UAAW1nC,GAAWJ,EACtBG,MAAOC,EACP6nC,UAAWjoC,EACXC,UAAWT,EAAO,CAAEU,SAAUV,QAASlM,EACvC+M,aAAcC,EAAQ,CAAEA,MAAOynC,GAAWznC,SAAWhN,EACrDiN,QAhBc,WACE,MAAZxF,EAAK,IAIToB,GAAG9H,KAAK0G,IAAQ,EAChBoB,GAAGT,QAJDnJ,OAAOC,SAASwL,KAAOjD,EAAKF,OAAO,MAmBzCoU,GAAOha,GAAK,YAA4C,IAAzC8F,EAAwC,EAAxCA,KAAMnF,EAAkC,EAAlCA,MAqBnB,MAAO,CAAEI,OAnBE,WAAO,IAEVsK,EAA2C1K,EAA3C0K,MAAO4nC,EAAoCtyC,EAApCsyC,eAAgBC,EAAoBvyC,EAApBuyC,gBACzBznC,EAAWqnC,GAAWznC,GACtB8nC,EAAmBF,EAAiBH,GAAWG,QAAkB50C,EACjE+0C,EAAcF,EAAkBJ,GAAWI,QAAmB70C,EAChE,OACE,6BACE,kBAACg1C,GAAA,EAAD,CACEvnC,YAAWhG,EACXuF,MAAOI,EACP6nC,cAAeH,EACfI,oBAAqBX,GACrBY,SAAUJ,EACVP,UAAU,kEAKH9sC,QArBoC,EAA3BA,YAwB9BI,GAAMiP,SAAS,UAAW4E,GAAMtI,GAAW+G,MCjF3C,IACEjF,GAAQC,KACR9W,GAAMC,YAAW,CACfyJ,KAAM,CACJrJ,QAAS,OACTG,cAAe,SACfD,eAAgB,iBAElBgO,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAEhB6O,OAAQ,CACNjlB,QAAS,OACTC,WAAY,YAEd2K,MAAM,2BACD4L,GAAM7B,KAAKa,KACXgB,GAAM7B,KAAKsB,IAEhBw8B,UAAU,2BACLj8B,GAAM7B,KAAKQ,KADP,IAEPhE,MAAOqF,GAAME,OAAOnE,MACpB4N,SAAU,EACV0C,WAAY,MAqBhB7F,GAAOha,GAAK,YAA+C,IAA5C8F,EAA2C,EAA3CA,KAAaxE,EAA8B,EAArCX,MAsBnB,MAAO,CAAEI,OApBE,WACP,IAAMc,EAAOD,EAAON,EAAEO,MAEtB,OACE,yBAAKiK,YAAWhG,EAAMpI,UAAWf,GAAI0J,MACnC,yBAAK3I,UAAWf,GAAIuO,OAClB,kBAAC,GAAD,CAAQrJ,KAAMA,EAAM8L,OAAQrM,EAAE4J,SAEhC,yBAAKxN,UAAWf,GAAIslB,QAClB,yBAAKvkB,UAAWf,GAAIiL,OAClB,kBAAC,GAAD,CAAQ/F,KAAMA,EAAM8L,OAAQrM,EAAEsG,SAEhC,yBAAKlK,UAAWf,GAAI8yC,WAClB,kBAAC,GAAD,CAAQ5tC,KAAMA,EAAM8L,OAAQrM,EAAEmuC,cAGlC,kBAAC,GAAD,CAAavhC,UAAW,EAAGC,MAAOqF,GAAMrF,MAAM7M,EAAEuuC,YAAajoC,MAAOtG,EAAE87B,aAI7Dr3B,QAtBuC,EAA3BA,YAyBjCI,GAAMiP,SAAS,gBAAiB4E,ICtEhC,IACExG,GAAQC,KACR9W,GAAMC,YAAW,CACfyJ,KAAM,CACJrJ,QAAS,QAEXkZ,KAAM,CACJpZ,MAAOqZ,GAAKW,gBACZzM,OAAQ8L,GAAKW,gBACbmF,YAAa9F,GAAKI,KAEpB0mB,iBAAkB,CAChBjgC,QAAS,OACTE,eAAgB,SAChBD,WAAY,SACZE,cAAe,SACf8M,SAAU,WACViM,KAAM,EACNhM,IAAK,EACLpN,MAAOqZ,GAAKW,gBACZzM,OAAQ8L,GAAKW,iBAEfomB,QAAQ,2BACH1pB,GAAM7B,KAAKO,KADT,IAELtH,QAAS,KAEXT,MAAO,CACLgT,SAAU,EACVngB,QAAS,OACTG,cAAe,UAGjB+N,MAAM,uCACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAFX,IAGH0E,SAAU,YAEZmK,OAAQ,CACNjlB,QAAS,OACTC,WAAY,YAEd2K,MAAM,2BACD4L,GAAM7B,KAAKe,KACXc,GAAM7B,KAAKsB,IAEhBw8B,UAAU,2BACLj8B,GAAM7B,KAAKQ,KADP,IAEPhE,MAAOqF,GAAME,OAAOnE,MACpB4N,SAAU,EACV0C,WAAY,MAqBhB7F,GAAOha,GAAK,YAA+C,IAA5C8F,EAA2C,EAA3CA,KAAaxE,EAA8B,EAArCX,MA4BnB,MAAO,CAAEI,OA1BE,WACP,IAAMc,EAAOD,EAAON,EAAEO,MAEtB,OACE,yBAAKiK,YAAWhG,EAAMpI,UAAWf,GAAI0J,MACnC,yBAAK3I,UAAWf,GAAIuZ,MAClB,kBAAC,GAAD,CAAahF,KAAMiF,GAAKW,gBAAiB5I,UAAW,EAAGC,MAAOqF,GAAMrF,MAAM7M,EAAEuuC,YAAajoC,MAAOtG,EAAE87B,WAClG,yBAAK1/B,UAAWf,GAAIsgC,kBAClB,yBAAKv/B,UAAWf,GAAIugC,SAApB,UAAiC3rB,KAAKC,MAAmB,IAAblQ,EAAE87B,UAA9C,QAGJ,yBAAK1/B,UAAWf,GAAIwN,OAClB,yBAAKzM,UAAWf,GAAIuO,OAClB,kBAAC,GAAD,CAAQrJ,KAAMA,EAAM8L,OAAQrM,EAAE4J,SAEhC,yBAAKxN,UAAWf,GAAIslB,QAClB,yBAAKvkB,UAAWf,GAAIiL,OAClB,kBAAC,GAAD,CAAQ/F,KAAMA,EAAM8L,OAAQrM,EAAEsG,SAEhC,yBAAKlK,UAAWf,GAAI8yC,WAClB,kBAAC,GAAD,CAAQ5tC,KAAMA,EAAM8L,OAAQrM,EAAEmuC,iBAM3B1pC,QA5BuC,EAA3BA,YA+BjCI,GAAMiP,SAAS,kBAAmB4E,ICpGlC,IACExG,GAAQC,KACRu+B,GAAY77B,GAAKQ,UAAYR,GAAKI,IAClCu7B,GAAa37B,GAAKW,gBAClBna,GAAMC,YAAW,CACfyJ,KAAM,CACJrJ,QAAS,QAEXkZ,KAAM,CACJpZ,MAAOk1C,GACP3nC,OAAQ8L,GAAKW,gBACbmF,YAAa9F,GAAKI,KAEpBpM,MAAO,CACLgT,SAAU,EACVngB,QAAS,OACTG,cAAe,UAGjB+N,MAAM,2BACDsI,GAAM7B,KAAKO,KACXsB,GAAM7B,KAAKyB,IAEhB6O,OAAQ,CACNjlB,QAAS,OACTC,WAAY,YAEd2K,MAAM,2BACD4L,GAAM7B,KAAKe,KACXc,GAAM7B,KAAKsB,IAEhBw8B,UAAU,yBACRtyB,SAAU,GACP3J,GAAM7B,KAAKQ,KAFP,IAGPhE,MAAOqF,GAAME,OAAOnE,MACpBsQ,WAAY,EACZ9D,aAAc,MA+BlB/B,GAAOha,GAAK,YAA+C,IAA5C8F,EAA2C,EAA3CA,KAAaxE,EAA8B,EAArCX,MA8CnB,MAAO,CAAEI,OA5CE,WACP,IACEc,EAAOD,EAAON,EAAEO,MAChBg3B,EAAuB,aAAhBv3B,EAAE2wC,UAEL,kBAAC,GAAD,CACEn1C,MAAOk1C,GACP3nC,OAAQynC,GACRjwC,KAAMD,EAAON,EAAE4wC,WACfvB,SAAUrvC,EAAE6wC,cACZvqC,MAAOtG,EAAE8wC,WACTjkC,MAAOqF,GAAMrF,MAAM7M,EAAEuuC,YACrBe,UAAWtvC,EAAE+wC,kBAGf,kBAAC,GAAD,CACEv1C,MAAOk1C,GACP3nC,OAAQynC,GACRjwC,KAAMD,EAAON,EAAE4wC,WACftqC,MAAOtG,EAAE8wC,WACTjkC,MAAOqF,GAAMrF,MAAM7M,EAAEuuC,YACrBe,UAAWtvC,EAAE+wC,gBACbje,MAAO9yB,EAAEgxC,YAAc,WAI/B,OACE,yBAAKxmC,YAAWhG,EAAMpI,UAAWf,GAAI0J,MACnC,yBAAK3I,UAAWf,GAAIuZ,MAAO2iB,GAC3B,yBAAKn7B,UAAWf,GAAIwN,OAClB,yBAAKzM,UAAWf,GAAIuO,OAClB,kBAAC,GAAD,CAAQrJ,KAAMA,EAAM8L,OAAQrM,EAAE4J,SAEhC,yBAAKxN,UAAWf,GAAIslB,QAClB,yBAAKvkB,UAAWf,GAAIiL,OAClB,kBAAC,GAAD,CAAQ/F,KAAMA,EAAM8L,OAAQrM,EAAEsG,SAEhC,yBAAKlK,UAAWf,GAAI8yC,WAClB,kBAAC,GAAD,CAAQ5tC,KAAMA,EAAM8L,OAAQrM,EAAEmuC,iBAM3B1pC,QA9CuC,EAA3BA,YAiDjCI,GAAMiP,SAAS,mBAAoB4E,I,OChHf2G,QACW,cAA7BrjB,OAAOC,SAASk2C,UAEe,UAA7Bn2C,OAAOC,SAASk2C,UAEhBn2C,OAAOC,SAASk2C,SAAS7vC,MACvB,2DCTNkQ,YAAU,CAAE4/B,iBvEsRS,CACjBtZ,WAAY,SuEvRcxrB,aAG9B+kC,cAEAC,IAAS7yC,OAAO,kBAAC,GAAD,MAAYwW,SAASs8B,eAAe,SD6H9C,kBAAmBrnC,WACrBA,UAAUsnC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAA3xC,GACLD,QAAQC,MAAMA,EAAMsG,c","file":"static/js/main.722c35ce.chunk.js","sourcesContent":["import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CompoundButton } from '@fluentui/react'\n\nconst\n  css = stylesheet({\n    login: {\n      width: '100%',\n      minHeight: '100vh',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      flexDirection: 'column',\n    },\n  })\n\nconst\n  Login = () => {\n    const\n      queryString = window.location.search,\n      action = `/_auth/init${queryString}`\n    return (\n      <div className={css.login}>\n        <form action={action} method=\"POST\">\n          <CompoundButton type=\"default\" secondaryText=\"using OpenID Connect.\">\n            Log In\n          </CompoundButton>\n        </form>\n      </div>\n    )\n  }\n\nexport default Login\n","import * as React from 'react'\nimport { Dialog } from './dialog'\n\n//\n// Dataflow\n// Mostly a port of H2O Flow's dataflow.coffee\n//\n\nexport type Act = () => void\nexport type Eff<T> = (t: T) => void\nexport type Eff2<A, B> = (a: A, b: B) => void\nexport type Eff3<A, B, C> = (a: A, b: B, c: C) => void\nexport type Eff4<A, B, C, D> = (a: A, b: B, c: C, d: D) => void\nexport type Func<A, B> = (a: A) => B\nexport type Func2<A, B, C> = (a: A, b: B) => C\nexport type Func3<A, B, C, D> = (a: A, b: B, c: C) => D\n\nexport interface Disposable { dispose(): void }\ninterface Arrow<T> extends Disposable { f: Eff<T> }\n\nexport interface Box<T> extends Disposable {\n  (): T\n  (value: T): T\n}\ninterface Boxed<T> extends Box<T> {\n  __boxed__: boolean // marker\n  on(f: Eff<T>, o?: any): Arrow<T>\n  touch(): void\n}\n\ntype Equal<T> = (a: T, b: T) => boolean\nfunction different<T>(_a: T, _b: T) { return false }\nexport function box<T>(value?: T, equal?: Equal<T>): Box<T>;\nexport function box<T>(...args: any[]): Box<T> {\n  let\n    x: T = (args.length > 0 ? args[0] : undefined) as T\n  const\n    equal = args.length > 0 ? (args.length > 1 ? args[1] : null) : different,\n    arrows: Arrow<T>[] = [],\n    on = (f: Eff<T>): Arrow<T> => {\n      const a: Arrow<T> = { f, dispose: () => remove(arrows, a) }\n      arrows.push(a)\n      return a\n    },\n    dispose = (): void => { arrows.length = 0 },\n    broadcast = (t: T): void => { for (const a of arrows) a.f(t) },\n    touch = (): void => broadcast(x),\n    f = (...ys: T[]): T => {\n      if (ys.length) { // f(x) invoked\n        const y = ys[0]\n        if (!(equal ? equal(x, y) : (x === y))) broadcast(x = y) // store and broadcast new value if changed\n      } // else f() invoked\n      return x\n    }\n\n  f.on = on\n  f.touch = touch\n  f.dispose = dispose\n  f.__boxed__ = true\n\n  return f as Box<T>\n}\n\nexport function boxed<T>(x: any): x is Box<T> { return x && x.__boxed__ === true }\nexport function unbox<T>(x: T | Box<T>): T { return boxed(x) ? x() : x }\nexport function rebox<T>(b: Box<T>, f: Eff<T>) { const x = b(); f(x); (b as Boxed<T>).touch() }\n\nexport function on<A>(a: Box<A>, f: Eff<A>): Disposable;\nexport function on<A, B>(a: Box<A>, b: Box<B>, f: Eff2<A, B>): Disposable;\nexport function on<A, B, C>(a: Box<A>, b: Box<B>, c: Box<C>, f: Eff3<A, B, C>): Disposable;\nexport function on<A, B, C, D>(a: Box<A>, b: Box<B>, c: Box<C>, d: Box<D>, f: Eff4<A, B, C, D>): Disposable;\nexport function on(...args: any[]): Disposable { return react(false, args.slice(0, args.length - 1), args[args.length - 1]) }\n\nexport function to<A>(a: Box<A>, f: Eff<A>): Disposable;\nexport function to<A, B>(a: Box<A>, b: Box<B>, f: Eff2<A, B>): Disposable;\nexport function to<A, B, C>(a: Box<A>, b: Box<B>, c: Box<C>, f: Eff3<A, B, C>): Disposable;\nexport function to<A, B, C, D>(a: Box<A>, b: Box<B>, c: Box<C>, d: Box<D>, f: Eff4<A, B, C, D>): Disposable;\nexport function to(...args: any[]): Disposable { return react(true, args.slice(0, args.length - 1), args[args.length - 1]) }\n\n// tslint:disable-next-line:ban-types\nexport function react(immediate: boolean, boxen: Box<any>[], f: Function): Disposable {\n  const\n    xs = boxen as Boxed<any>[],\n    emit = () => f(...xs.map(x => x())),\n    arrows = xs.map(x => x.on(emit)),\n    dispose = () => arrows.forEach(a => a.dispose())\n\n  if (immediate) emit()\n  return { dispose }\n}\n\nexport function by<A, B>(a: Box<A>, map: Func<A, B>): Box<B>\nexport function by<A, B, C>(a: Box<A>, b: Box<B>, zip: Func2<A, B, C>): Box<B>\nexport function by<A, B, C, D>(a: Box<A>, b: Box<B>, c: Box<C>, zip: Func3<A, B, C, D>): Box<B>\nexport function by(...args: any[]): any {\n  if (args.length < 2) throw new Error(`invalid number of args: want 2 or more, got ${args.length}`)\n  const\n    m = args.length - 1,\n    xs = args.slice(0, m) as Boxed<any>[],\n    f = args[m] as Function,\n    yB = box(f(...xs.map(x => x())))\n\n  xs.forEach(x => x.on(_ => yB(f(...xs.map(x => x())))))\n  return yB\n}\n\nexport function watch<T>(x: Box<T>, label?: string): Disposable {\n  // eslint-disable-next-line no-console\n  return on(x, label ? ((x: T) => console.log(label, x)) : ((x: T) => console.log(x)))\n}\n\nfunction remove<T>(xs: T[], x: T): void { const i = xs.indexOf(x); if (i > -1) xs.splice(i, 1) }\n\n//\n// React Component + Dataflow\n//\n\ninterface Renderable {\n  render(): JSX.Element\n  init?(): void\n  update?(): void\n  dispose?(): void\n}\n\nexport function bond<TProps, TState extends Renderable>(ctor: (props: TProps) => TState) {\n  return class extends React.Component<TProps> {\n    private readonly model: TState\n    private readonly arrows: Disposable[]\n    constructor(props: TProps) {\n      super(props)\n\n      const\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        self = this,\n        model = ctor(props),\n        arrows: Disposable[] = []\n\n      Object.keys(model).forEach(k => {\n        if (k === 'render' || k === 'dispose' || k === 'init' || k === 'update') return\n        const v = (model as any)[k]\n        if (boxed(v)) arrows.push(on(v, _ => self.setState({})))\n      })\n\n      this.model = model\n      this.arrows = arrows\n      this.state = {}\n    }\n    componentDidMount() {\n      if (this.model.init) this.model.init()\n    }\n    componentDidUpdate() {\n      if (this.model.update) this.model.update()\n    }\n    componentWillUnmount() {\n      if (this.model.dispose) this.model.dispose()\n      for (const a of this.arrows) a.dispose()\n    }\n    render() {\n      return this.model.render()\n    }\n  }\n}\n\n//\n// Sync\n//\n\nexport type B = boolean\nexport type U = number\nexport type I = number\nexport type F = number\nexport type S = string\nexport type D = Date\nexport type V = F | S | D\nexport type Prim = S | F | B | null // primitive\nexport interface Size { width: U, height: U }\nexport interface Rect extends Size { left: U, top: U }\n\nexport interface Dict<T> { [key: string]: T } // generic object\n\nexport type Rec = Dict<Prim | Prim[]> // Record; named \"Rec\" to distinguish from Typescript's Record<K,T> utility type.\nexport type Recs = Rec[]\nexport type Packed<T> = T | S\n\nexport interface Data {\n  list(): (Rec | null)[]\n}\n\ninterface OpsD {\n  p?: PageD // init\n  d?: OpD[] // deltas\n  e?: S // error\n  r?: U // reset\n}\ninterface OpD {\n  k?: S\n  v?: any\n  c?: CycBufD\n  f?: FixBufD\n  m?: MapBufD\n  d?: Dict<Datum>\n  b?: BufD[]\n}\ntype Tup = any[]\ninterface PageD {\n  c: Dict<CardD>\n}\ntype Datum = S | F | B | Dict<any> | any[] | BufD\ninterface CardD {\n  d: Dict<Datum>\n  b?: BufD[]\n}\ninterface BufD {\n  c: CycBufD\n  f: FixBufD\n  m: MapBufD\n}\ninterface MapBufD {\n  f: S[]\n  d: Dict<Tup>\n}\ninterface FixBufD {\n  f: S[]\n  d: (Tup | null)[]\n  n: U\n}\ninterface CycBufD {\n  f: S[]\n  d: (Tup | null)[]\n  n: U\n  i: U\n}\n\nexport interface Page {\n  key: S\n  changed: Box<B>\n  add(k: S, c: C): void\n  get(k: S): C | undefined\n  set(k: S, v: any): void\n  list(): C[]\n  drop(k: S): void\n  sync(): void\n}\n\ninterface Cur {\n  __cur__: true\n  get(f: S): any\n  set(f: S, v: any): void\n}\ninterface Buf {\n  put(xs: any): void\n  set(k: S, v: any): void\n  get(k: S): Cur | null\n}\nexport interface Card<T> {\n  name: S\n  state: T\n  changed: Box<B>\n}\nexport interface C extends Card<Dict<any>> {\n  id: S\n  set(ks: S[], v: any): void\n}\ninterface Typ {\n  readonly f: S[] // fields\n  readonly m: Dict<U> // offsets\n  match(x: any): Tup | null\n  make(t: Tup): Rec\n}\n\ninterface DataBuf extends Data, Buf {\n  __buf__: true\n}\ninterface FixBuf extends DataBuf {\n  n: U\n  seti(i: U, v: any): void\n  geti(i: U): Cur | null\n}\ntype CycBuf = DataBuf\ntype MapBuf = DataBuf\n\nlet guid = 0\nexport const\n  xid = () => `x${++guid}`,\n  parseI = (s: S): I => {\n    if (!/^-{0,1}\\d+$/.test(s)) return NaN\n    return parseInt(s, 10)\n  },\n  parseU = (s: S): U => {\n    const i = parseI(s)\n    return isNaN(i) || i < 0 ? NaN : i\n  },\n  dict = <T extends {}>(kvs: [S, T][]): Dict<T> => {\n    const d: Dict<T> = {}\n    for (const [k, v] of kvs) d[k] = v\n    return d\n  },\n  unpack = <T extends {}>(data: any): T =>\n    (typeof data === 'string')\n      ? decodeString(data)\n      : (isData(data))\n        ? data.list()\n        : data,\n  iff = (x: S) => x && x.length ? x : undefined\n\nconst\n  decodeType = (d: S): [S, S] => {\n    const i = d.indexOf(':')\n    return (i > 0) ? [d.substring(0, i), d.substring(i + 1)] : ['', d]\n  },\n  decodeString = (data: S): any => {\n    if (data === '') return data\n    const [t, d] = decodeType(data)\n    switch (t) {\n      case 'data':\n        try {\n          return JSON.parse(d)\n        } catch (e) {\n          console.error(e)\n        }\n        break\n      case 'rows':\n        try {\n          const [fields, rows] = JSON.parse(d)\n          if (!Array.isArray(fields)) return data\n          if (!Array.isArray(rows)) return data\n          const w = fields.length // width\n          const recs: Rec[] = []\n          for (const r of rows) {\n            if (!Array.isArray(r)) continue\n            if (r.length !== w) continue\n            const rec: Rec = {}\n            for (let j = 0; j < w; j++) {\n              const f = fields[j], v = r[j]\n              rec[f] = v\n            }\n            recs.push(rec)\n          }\n          return recs\n        } catch (e) {\n          console.error(e)\n        }\n        break\n      case 'cols':\n        try {\n          const [fields, columns] = JSON.parse(d)\n          if (!Array.isArray(fields)) return data\n          if (!Array.isArray(columns)) return data\n          const w = fields.length // width\n          if (columns.length !== w) return data\n          if (columns.length === 0) return data\n          const n = columns[0].length\n          const recs = new Array<Rec>(n)\n          for (let i = 0; i < n; i++) {\n            const rec: Rec = {}\n            for (let j = 0; j < w; j++) {\n              const f = fields[j], v = columns[j][i]\n              rec[f] = v\n            }\n            recs[i] = rec\n          }\n          return recs\n        } catch (e) {\n          console.error(e)\n        }\n        break\n    }\n    return data\n  }\n\nconst\n  keysOf = <T extends {}>(d: Dict<T>): S[] => {\n    const a: S[] = []\n    for (const k in d) a.push(k)\n    return a\n  },\n  valuesOf = <T extends {}>(d: Dict<T>): T[] => {\n    const a: T[] = []\n    for (const k in d) a.push(d[k])\n    return a\n\n  },\n  isMap = (x: any): B => {\n    // for JSON data only: anything not null, string, number, bool, array\n    if (x === null || x === undefined) return false\n    switch (typeof x) {\n      case 'number':\n      case 'string':\n      case 'boolean':\n        return false\n      default:\n        if (Array.isArray(x)) return false\n    }\n    return true\n  },\n  isBuf = (x: any): x is Buf => x != null && x.__buf__ === true,\n  isData = (x: any): x is Data => isBuf(x),\n  isCur = (x: any): x is Cur => x != null && x.__cur__ === true,\n  reverseIndex = (xs: S[]): Dict<U> => {\n    const m: Dict<U> = {}\n    for (let i = 0, n = xs.length; i < n; i++) m[xs[i]] = i\n    return m\n  },\n  newType = (fields: S[]): Typ => {\n    const\n      n = fields.length,\n      m = reverseIndex(fields),\n      match = (x: any): Tup | null => {\n        if (Array.isArray(x) && x.length === n) return x\n        return null\n      },\n      make = (tup: Tup): Rec => {\n        const r: Rec = {}\n        for (let i = 0; i < n; i++) r[fields[i]] = tup[i]\n        return r\n      }\n    return { f: fields, m, match, make }\n  },\n  newCur = (t: Typ, tup: Tup): Cur => {\n    const\n      get = (f: S): any => {\n        if (tup != null) {\n          let i = t.m[f]\n          if (i != null && i >= 0 && i < tup.length) return tup[i]\n          i = parseI(f)\n          if (!isNaN(i) && i >= 0 && i < tup.length) return tup[i]\n        }\n        return null\n      },\n      set = (f: S, v: any) => {\n        if (tup != null) {\n          let i = t.m[f]\n          if (i != null && i >= 0 && i < tup.length) tup[i] = v\n          i = parseI(f)\n          if (!isNaN(i) && i >= 0 && i < tup.length) tup[i] = v\n        }\n      }\n    return { __cur__: true, get, set }\n  },\n  newFixBuf = (t: Typ, tups: (Tup | null)[]): FixBuf => {\n    const\n      n = tups.length,\n      put = (xs: any) => {\n        if (Array.isArray(xs) && xs.length === n) for (let i = 0; i < n; i++) seti(i, xs[i])\n      },\n      set = (k: S, v: any) => {\n        const i = parseI(k)\n        if (!isNaN(i)) seti(i, v)\n      },\n      seti = (i: U, v: any) => {\n        if (i >= 0 && i < n) {\n          if (v === null) {\n            tups[i] = null\n          } else {\n            const tup = t.match(v)\n            if (tup) tups[i] = tup\n          }\n        }\n      },\n      get = (k: S): Cur | null => {\n        const i = parseI(k)\n        if (!isNaN(i)) return geti(i)\n        return null\n      },\n      geti = (i: U): Cur | null => {\n        if (i >= 0 && i < n) {\n          const tup = tups[i]\n          if (tup) return newCur(t, tup)\n        }\n        return null\n      },\n      list = (): (Rec | null)[] => {\n        const xs: (Rec | null)[] = []\n        for (const tup of tups) xs.push(tup ? t.make(tup) : null)\n        return xs\n      }\n    return { __buf__: true, n, put, set, seti, get, geti, list }\n  },\n  newCycBuf = (t: Typ, tups: (Tup | null)[], i: U): CycBuf => {\n    const\n      n = tups.length,\n      b = newFixBuf(t, tups),\n      cur = \"\",\n      put = (xs: any) => {\n        if (Array.isArray(xs)) for (const x of xs) set(cur, x)\n      },\n      set = (_k: S, v: any) => {\n        b.seti(i, v)\n        i++\n        if (i >= n) i = 0\n      },\n      get = (_k: S): Cur | null => {\n        return b.geti(i)\n      },\n      list = (): Rec[] => {\n        const xs: Rec[] = []\n        for (let j = i, k = 0; k < n; j++, k++) {\n          if (j >= n) j = 0\n          const tup = tups[j]\n          if (tup) xs.push(t.make(tup))\n        }\n        return xs\n      }\n    return { __buf__: true, put, set, get, list }\n  },\n  newMapBuf = (t: Typ, tups: Dict<Tup>): MapBuf => {\n    const\n      put = (xs: any) => {\n        const ts: Dict<Tup> = {}\n        for (const k in xs) {\n          const x = xs[k], tup = t.match(x)\n          if (tup) ts[k] = tup\n        }\n        tups = ts\n      },\n      set = (k: S, v: any) => {\n        if (v === null) {\n          delete tups[k]\n        } else {\n          const tup = t.match(v)\n          if (tup) tups[k] = tup\n        }\n      },\n      get = (k: S): Cur | null => {\n        const tup = tups[k]\n        return tup ? newCur(t, tup) : null\n      },\n      list = (): Rec[] => {\n        const keys = keysOf(tups)\n        keys.sort()\n        const xs: Rec[] = []\n        for (const k of keys) xs.push(t.make(tups[k]))\n        return xs\n      }\n    return { __buf__: true, put, set, get, list }\n  },\n  newTups = (n: U) => {\n    const xs = new Array<Tup | null>(n)\n    for (let i = 0; i < n; i++) xs[i] = null\n    return xs\n  },\n  loadCycBuf = (b: CycBufD): CycBuf => {\n    const t = newType(b.f)\n    return b.d && b.d.length\n      ? newCycBuf(t, b.d, b.i)\n      : newCycBuf(t, newTups(b.n <= 0 ? 10 : b.n), 0)\n  },\n  loadFixBuf = (b: FixBufD): FixBuf => {\n    const t = newType(b.f)\n    return newFixBuf(t, b.d && b.d.length ? b.d : newTups(b.n <= 0 ? 10 : b.n))\n  },\n  loadMapBuf = (b: MapBufD): MapBuf => {\n    const t = newType(b.f)\n    return newMapBuf(t, b.d || {})\n  },\n  loadBuf = (b: BufD): DataBuf | null => {\n    if (b.c) return loadCycBuf(b.c)\n    if (b.f) return loadFixBuf(b.f)\n    if (b.m) return loadMapBuf(b.m)\n    return null\n  },\n  loadCard = (key: S, c: CardD): C => {\n    const\n      data: Dict<any> = {},\n      changedB = box<B>(),\n      ctor = (c: CardD) => {\n        const { d, b } = c\n        for (let k in d) {\n          let v = d[k]\n          if (b && k.length > 0 && k[0] === '~') {\n            const buf = loadBuf(b[v as U])\n            if (buf) {\n              k = k.substr(1)\n              v = buf\n            }\n          }\n          set([k], v)\n        }\n      },\n      set = (ks: S[], v: any) => {\n        switch (ks.length) {\n          case 0:\n            return\n          case 1:\n            {\n              const p = ks[0], b = data[p]\n              if (b && isBuf(b)) {\n                b.put(v)\n                return\n              }\n              if (v == null) delete data[p]; else data[p] = v\n              return\n            }\n          default:\n            {\n              let x: any = data\n              const p = ks[ks.length - 1]\n              for (const k of ks.slice(0, ks.length - 1)) x = gget(x, k)\n              gset(x, p, v)\n              return\n            }\n        }\n      }\n    ctor(c)\n    return { id: xid(), name: key, state: data, changed: changedB, set }\n  },\n  gset = (x: any, k: S, v: any) => {\n    if (x == null) return\n    if (isBuf(x)) x.set(k, v)\n    else if (isCur(x)) x.set(k, v)\n    else if (isMap(x)) {\n      if (v == null) delete x[k]; else x[k] = v\n    } else if (Array.isArray(x)) {\n      const i = parseI(k)\n      if (!isNaN(i) && i >= 0 && i < x.length) x[i] = v\n    }\n  },\n  gget = (x: any, k: S): any => {\n    if (x == null) return null\n    if (isBuf(x)) return x.get(k)\n    if (isCur(x)) return x.get(k)\n    if (isMap(x)) return x[k]\n    if (Array.isArray(x)) {\n      const i = parseI(k)\n      if (!isNaN(i) && i >= 0 && i < x.length) return x[i]\n    }\n    return null\n  },\n  newPage = (): Page => {\n    let dirty = false, dirties: Dict<B> = {}\n\n    const\n      key = xid(),\n      cards: Dict<C> = {},\n      changedB = box<B>(),\n      add = (k: S, card: C) => {\n        cards[k] = card\n        dirty = true\n      },\n      get = (k: S): C | undefined => cards[k],\n      list = (): C[] => valuesOf(cards),\n      drop = (k: S) => delete cards[k],\n      set = (k: S, v: any) => {\n        const ks = k.split(/\\s+/g)\n        if (ks.length === 1) {\n          delete cards[k]\n          dirty = true\n          return\n        }\n        const c = cards[ks[0]]\n        if (c) {\n          c.set(ks.slice(1), v)\n          dirties[ks[0]] = true\n        }\n      },\n      sync = () => {\n        if (dirty) {\n          changedB(true)\n        } else {\n          for (const k in dirties) {\n            const c = cards[k]\n            if (c) c.changed(true)\n          }\n        }\n        dirty = false // reset\n        dirties = {} // reset\n      }\n\n    return { key, changed: changedB, add, get, set, list, drop, sync }\n  },\n  load = ({ c }: PageD): Page => {\n    const page = newPage()\n    for (const k in c) page.add(k, loadCard(k, c[k]))\n    return page\n  },\n  exec = (page: Page, ops: OpD[]): Page | null => {\n    for (const op of ops) {\n      if (op.k && op.k.length > 0) {\n        if (op.c) {\n          page.set(op.k, loadCycBuf(op.c))\n        } else if (op.f) {\n          page.set(op.k, loadFixBuf(op.f))\n        } else if (op.m) {\n          page.set(op.k, loadMapBuf(op.m))\n        } else if (op.d) {\n          page.add(op.k, loadCard(op.k, { d: op.d, b: op.b || [] }))\n        } else {\n          page.set(op.k, op.v)\n        }\n      } else { // drop page\n        page = newPage()\n      }\n    }\n    if (page) page.sync()\n    return page\n  }\n\n//\n// In-browser API\n//\n\nexport interface PageRef {\n  get(key: S): Ref\n  set(key: S, value: any): void\n  del(key: S): void\n  drop(): void\n  sync(): void\n}\n\nexport interface Ref {\n  get(key: S): Ref\n  set(key: S, value: any): void\n}\n\nexport interface Qd {\n  readonly path: S\n  readonly args: Rec\n  readonly events: Dict<any>\n  readonly refreshRateB: Box<U>\n  readonly busyB: Box<B>\n  socket: WebSocket | null\n  dialogB: Box<Dialog | null>\n  page(): PageRef\n  sync(): void\n}\n\nconst\n  keyseq = (...keys: S[]): S => keys.join(' '),\n  clearRec = (a: Rec) => {\n    for (const k in a) delete a[k]\n  }\n\nexport const qd: Qd = {\n  path: window.location.pathname,\n  args: {},\n  events: {},\n  refreshRateB: box(-1),\n  busyB: box(false),\n  socket: null,\n  dialogB: box(null),\n  page: (path?: S): PageRef => {\n    path = path || qd.path\n    const\n      changes: OpD[] = [],\n      ref = (k: S): Ref => {\n        const\n          get = (key: S): Ref => ref(`${k}.${key}`),\n          set = (key: S, value: any) => changes.push({ k: keyseq(k, key), v: value })\n        return { get, set }\n      },\n      get = (key: S) => ref(key),\n      set = (key: S, value: any) => changes.push({ k: keyseq(key), v: value }),\n      del = (key: S) => changes.push({ k: key }),\n      drop = () => changes.push({}),\n      sync = () => {\n        const sock = qd.socket\n        if (!sock) return\n        const opsd: OpsD = { d: changes }\n        sock.send(`* ${path} ${JSON.stringify(opsd)}`)\n      }\n    return { get, set, del, drop, sync }\n  },\n  sync: () => {\n    const sock = qd.socket\n    if (!sock) return\n    const args: Dict<any> = { ...qd.args }\n    clearRec(qd.args)\n    if (Object.keys(qd.events).length) {\n      args[''] = { ...qd.events }\n      clearRec(qd.events)\n    }\n    sock.send(`@ ${qd.path} ${JSON.stringify(args)}`)\n    qd.busyB(true)\n  },\n}\n\non(qd.refreshRateB, r => {\n  // If we receive a change in refresh rate once the page has been loaded, close the socket.\n  // The socket onclose handler will reconnect using the refresh rate if necessary.\n  if (r < 0) return\n  const sock = qd.socket\n  if (sock) sock.close()\n})\n\nexport enum SockEventType { Message, Data, Reset }\nexport type SockEvent = SockMessage | SockData | SockReload\nexport interface SockData { t: SockEventType.Data, page: Page }\nexport enum SockMessageType { Info, Warn, Err }\nexport interface SockMessage { t: SockEventType.Message, type: SockMessageType, message: S }\nexport interface SockReload { t: SockEventType.Reset }\ntype SockHandler = (e: SockEvent) => void\n\nlet backoff = 1, currentPage: Page | null = null\nconst\n  toSocketAddress = (path: S): S => {\n    const\n      l = window.location,\n      p = l.protocol === 'https:' ? 'wss' : 'ws'\n    return p + \"://\" + l.host + path\n  },\n  reconnect = (address: S, handle: SockHandler) => {\n    const retry = () => reconnect(address, handle)\n    const sock = new WebSocket(address)\n    sock.onopen = function () {\n      qd.socket = sock\n      handle({ t: SockEventType.Message, type: SockMessageType.Info, message: 'Connected' })\n      backoff = 1\n      const hash = window.location.hash\n      sock.send(`+ ${qd.path} ${hash.charAt(0) === '#' ? hash.substr(1) : hash}`) // protocol: t<sep>addr<sep>data\n    }\n    sock.onclose = function () {\n      const refreshRate = qd.refreshRateB()\n      if (refreshRate === 0) return\n\n      // TODO handle refreshRate > 0 case\n\n      qd.socket = null\n      backoff *= 2\n      if (backoff > 16) backoff = 16\n      handle({ t: SockEventType.Message, type: SockMessageType.Warn, message: `Disconneced. Reconnecting in ${backoff} seconds...` })\n      setTimeout(retry, backoff * 1000)\n    }\n    sock.onmessage = function (e) {\n      if (!e.data) return\n      if (!e.data.length) return\n      qd.busyB(false)\n      for (const line of e.data.split('\\n')) {\n        try {\n          const msg = JSON.parse(line) as OpsD\n          if (msg.d) {\n            const page = exec(currentPage || newPage(), msg.d)\n            if (currentPage !== page) {\n              currentPage = page\n              if (page) handle({ t: SockEventType.Data, page: page })\n            }\n          } else if (msg.p) {\n            currentPage = load(msg.p)\n            handle({ t: SockEventType.Data, page: currentPage })\n          } else if (msg.e) {\n            handle({ t: SockEventType.Message, type: SockMessageType.Err, message: msg.e })\n          } else if (msg.r) {\n            handle({ t: SockEventType.Reset })\n          }\n        } catch (err) {\n          console.error(err)\n          handle({ t: SockEventType.Message, type: SockMessageType.Err, message: `Error: ${err}` })\n        }\n      }\n    }\n    sock.onerror = function (e: Event) {\n      qd.busyB(false)\n      console.error('A websocket error was encountered.', e) // XXX\n    }\n  }\n\nexport const connect = (path: S, handle: SockHandler) => reconnect(toSocketAddress(path), handle)\n\n","import { ContextualMenu, Icon, IContextualMenuItem } from '@fluentui/react'\nimport * as React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Command } from './toolbar'\nimport { bond, box, qd, Box, B, S } from './qd'\n\nconst\n  css = stylesheet({\n    menu: {\n      position: 'absolute',\n      top: 0, right: 0,\n      $nest: {\n        '>div:first-child': {\n          width: 32, height: 32,\n          padding: 8,\n        },\n      },\n    },\n    icon: {\n      userSelect: 'none',\n    },\n    target: {\n      boxSizing: 'border-box',\n      cursor: 'pointer',\n      opacity: 0.5,\n      $nest: {\n        '&:hover': {\n          opacity: 1,\n        },\n      },\n    }\n  })\n\nconst\n  toContextMenuItem = (c: Command): IContextualMenuItem => {\n    const\n      onClick = () => {\n        if (c.name.startsWith('#')) {\n          window.location.hash = c.name.substr(1)\n          return\n        }\n        qd.args[c.name] = c.value ?? c.data ?? true\n        qd.sync()\n      }\n    return {\n      key: c.name,\n      text: c.label || c.name || 'Untitled',\n      iconProps: c.icon ? { iconName: c.icon } : undefined,\n      title: c.caption || undefined,\n      subMenuProps: c.items ? { items: c.items.map(toContextMenuItem) } : undefined,\n      onClick,\n    }\n  }\n\nexport const\n  CardMenu = bond(({ commands, name, changedB }: { commands: Command[], name?: S, changedB?: Box<B> }) => {\n    const\n      target = React.createRef<HTMLDivElement>(),\n      hiddenB = box(true),\n      show = () => hiddenB(false),\n      hide = () => hiddenB(true),\n      render = () => {\n        const\n          hidden = hiddenB(),\n          items = commands.map(toContextMenuItem)\n        return (\n          <div className={css.menu} data-test={name}>\n            <div className={css.target} ref={target} onClick={show}>\n              <Icon className={css.icon} iconName='MoreVertical' />\n            </div>\n            <ContextualMenu target={target} items={items} hidden={hidden} onItemClick={hide} onDismiss={hide} />\n          </div>\n        )\n      }\n    return { render, changedB, hiddenB }\n  })","import Handlebars from 'handlebars'\nimport { createIntl, createIntlCache } from 'react-intl'\nimport { B, S } from './qd'\n\nconst intlCache = createIntlCache() // prevents memory leaks per docs\nexport const intl = createIntl({\n  locale: navigator.language,\n  messages: {},\n  // Since we generate format messages on the fly, ignore all errors.\n  // The intl lib requires messages to be initialized in advance,\n  // Otherwise, it throws console.errors for each missing id, each time format() is called.\n  // As of this implementation, there's no formal way to disable that behavior.  \n  onError: () => { /* noop */ },\n}, intlCache)\n\nconst\n  snakeToCamel = (s: S): S => s.replace(/(_\\w)/g, m => m[1].toUpperCase()),\n  kvToOpts = (a: any): any => {\n    const b: any = {}\n    for (const k in a) {\n      const v = a[k]\n      b[snakeToCamel(k)] =\n        (v === 'true')\n          ? true\n          : v === 'false'\n            ? false\n            : /^\\d+$/.test(v)\n              ? parseInt(v, 10)\n              : v\n    }\n    return b\n  },\n  isBareExpr = (s: S): B => /^\\w+$/.test(s)\n\nHandlebars.registerHelper('intl', (v: any, { hash: opts }: any) => {\n  opts = kvToOpts(opts)\n  const t = opts.type\n  return t === 'date'\n    ? intl.formatDate(v, opts)\n    : t === 'time'\n      ? intl.formatTime(v, opts)\n      : t === 'number' || typeof v === 'number'\n        ? intl.formatNumber(v, opts)\n        : v\n})\n\nexport type Fmt = (datum: any, value?: any) => S\n\nexport const\n  isFormatExpr = (f: any): B => typeof f === 'string' && f.length > 1 && f.charAt(0) === '=' && f.charAt(1) !== '=',\n  parseFormat = (s: S): [S, HandlebarsTemplateDelegate<any> | undefined] | null => {\n    if (!isFormatExpr(s)) return null\n\n    // \"=foo\"\n    s = s.substr(1) // lop off leading '='\n\n    // \"foo\"\n    if (isBareExpr(s)) return [s, undefined]\n\n    // \"{{func foo...\"\n    const invocation = s.match(/\\{\\{\\s*(\\w+)\\s+(\\w+)/)\n    if (invocation) return [invocation[2], compile(s)]\n\n    // \"{{foo...\"\n    const bare = s.match(/\\{\\{\\s*(\\w+)/)\n    if (bare) return [bare[1], undefined]\n\n    return null\n  },\n  compile = (s: S): any => Handlebars.compile(s),\n  format = (s: S, data: any): S => {\n    if (isBareExpr(s)) s = '{{' + s + '}}'\n    const t = compile(s)\n    return t ? t(data) : s\n  }","import { NestedCSSProperties } from \"typestyle/lib/types\"\nimport { Dict, I, F, S, U } from \"./qd\"\n\ninterface RGB { r: U, g: U, b: U }\ninterface Palette {\n  red: S\n  pink: S\n  purple: S\n  violet: S\n  indigo: S\n  blue: S\n  azure: S\n  cyan: S\n  teal: S\n  mint: S\n  green: S\n  lime: S\n  yellow: S\n  amber: S\n  orange: S\n  tangerine: S\n  brown: S\n  gray: S\n  text: S\n  card: S\n  page: S\n}\n\ninterface Tones {\n  text0: S\n  text1: S\n  text2: S\n  text3: S\n  text4: S\n  text5: S\n  text6: S\n  text7: S\n  text8: S\n  text9: S\n}\n\nexport const\n  px = (x: I) => `${x}px`,\n  pc = (x: F) => `${x}%`,\n  rem = (x: F) => `${x}rem`,\n  clas = (...names: string[]) => names.join(' '),\n  quint = (prop: string) => `${prop} 600ms cubic-bezier(0.23, 1, 0.32, 1)`, // https://easings.net/#easeOutQuint\n  border = (thickness: U, color: string) => `${thickness}px solid ${color}`,\n  dotted = (thickness: U, color: string) => `${thickness}px dotted ${color}`,\n  dashed = (thickness: U, color: string) => `${thickness}px dashed ${color}`,\n  hairline = border(1, '#ececec'),\n  padding = (...t: I[]) => t.map(px).join(' '),\n  paddingRem = (...t: F[]) => t.map(rem).join(' '),\n  margin = padding,\n  rgba = (r: U, g: U, b: U, a: F) => `rgba(${r},${g},${b},${a.toFixed(1)})`,\n  gray = (b: U) => { const h = b.toString(16); return `#${h}${h}${h}` },\n  centerMixin = () => ({ display: 'flex', alignItems: 'center', justifyContent: 'center' }),\n  displayMixin = (visible = true): React.CSSProperties => {\n    if (visible) return {}\n    return { display: 'none' }\n  }\n\nconst\n  black: RGB = { r: 0, g: 0, b: 0 },\n  rgb = (hex: S): RGB => {\n    const x = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n    return x ? { r: parseInt(x[1], 16), g: parseInt(x[2], 16), b: parseInt(x[3], 16) } : black\n  },\n  toPalette = (palette: Palette, a: F): Palette & Tones => {\n    const\n      { r, g, b } = rgb(palette.text),\n      tones: Tones = {\n        text0: rgba(r, g, b, 0.05),\n        text1: rgba(r, g, b, a += 0.1),\n        text2: rgba(r, g, b, a += 0.1),\n        text3: rgba(r, g, b, a += 0.1),\n        text4: rgba(r, g, b, a += 0.1),\n        text5: rgba(r, g, b, a += 0.1),\n        text6: rgba(r, g, b, a += 0.1),\n        text7: rgba(r, g, b, a += 0.1),\n        text8: rgba(r, g, b, a += 0.1),\n        text9: rgba(r, g, b, a += 0.1),\n      }\n    return { ...palette, ...tones }\n  },\n  defaultColors = {\n    red: '#F44336',\n    pink: '#E91E63',\n    purple: '#9C27B0',\n    violet: '#673AB7',\n    indigo: '#3F51B5',\n    blue: '#2196F3',\n    azure: '#03A9F4',\n    cyan: '#00BCD4',\n    teal: '#009688',\n    mint: '#4CAF50',\n    green: '#8BC34A',\n    lime: '#CDDC39',\n    yellow: '#FFEB3B',\n    amber: '#FFC107',\n    orange: '#FF9800',\n    tangerine: '#FF5722',\n    brown: '#795548',\n    gray: '#9E9E9E',\n  },\n  palettes: Dict<Palette & Tones> = {\n    light: toPalette({\n      ...defaultColors,\n      text: '#323130',\n      card: '#ffffff',\n      page: '#f5f5f5',\n    }, 0.1),\n    dark: toPalette({\n      ...defaultColors,\n      text: '#ffffff',\n      card: '#21252b',\n      page: '#282c34',\n    }, 0),\n    neon: toPalette({\n      ...defaultColors,\n      text: '#ffffff',\n      card: '#0d0e0f',\n      page: '#1b1d1f',\n    }, 0),\n  },\n  // tracking = a + b * Math.exp(c * fontSize)\n  // a = -0.0223, b = 0.185, c = -0.1745\n  fontTrackings = [\n    [6, 0.043],\n    [7, 0.032],\n    [8, 0.024],\n    [9, 0.016],\n    [10, 0.01],\n    [11, 0.005],\n    [12, 0],\n    [13, -0.0025],\n    [14, -0.006],\n    [15, -0.009],\n    [16, -0.011],\n    [17, -0.013],\n    [18, -0.014],\n    [20, -0.017],\n    [24, -0.019],\n    [30, -0.021],\n    [40, -0.022],\n    [80, -0.022],\n  ],\n  fontStyleFor = (size: U, tracking: F) => ({\n    fontSize: size + 'px',\n    letterSpacing: tracking + 'em',\n    lineHeight: Math.round(1.4 * size) + 'px',\n  }),\n  fontStyles: ReturnType<typeof fontStyleFor>[] = []\n\nfontTrackings.forEach(([size, tracking]) => fontStyles[size] = fontStyleFor(size, tracking))\n\n\nconst\n  font: ThemeFont = {\n    s6: fontStyles[6],\n    s7: fontStyles[7],\n    s8: fontStyles[8],\n    s9: fontStyles[9],\n    s10: fontStyles[10],\n    s11: fontStyles[11],\n    s12: fontStyles[12],\n    s13: fontStyles[13],\n    s14: fontStyles[14],\n    s15: fontStyles[15],\n    s16: fontStyles[16],\n    s17: fontStyles[17],\n    s18: fontStyles[18],\n    s20: fontStyles[20],\n    s24: fontStyles[24],\n    s30: fontStyles[30],\n    s40: fontStyles[40],\n    s80: fontStyles[80],\n    w1: { fontWeight: 100 }, // thin\n    w2: { fontWeight: 200 }, // extralight\n    w3: { fontWeight: 300 }, // light\n    w4: { fontWeight: 400 }, // regular\n    w5: { fontWeight: 500 }, // medium\n    w6: { fontWeight: 600 }, // semibold\n    w7: { fontWeight: 700 }, // bold\n    w8: { fontWeight: 800 }, // extrabold\n    w9: { fontWeight: 900 }, // black\n  }\n// ellipsis: NestedCSSProperties = {\n//   whiteSpace: 'nowrap', textOverflow: 'ellipsis', overflow: 'hidden',\n// }\n\ninterface ThemeFont {\n  s6: NestedCSSProperties\n  s7: NestedCSSProperties\n  s8: NestedCSSProperties\n  s9: NestedCSSProperties\n  s10: NestedCSSProperties\n  s11: NestedCSSProperties\n  s12: NestedCSSProperties\n  s13: NestedCSSProperties\n  s14: NestedCSSProperties\n  s15: NestedCSSProperties\n  s16: NestedCSSProperties\n  s17: NestedCSSProperties\n  s18: NestedCSSProperties\n  s20: NestedCSSProperties\n  s24: NestedCSSProperties\n  s30: NestedCSSProperties\n  s40: NestedCSSProperties\n  s80: NestedCSSProperties\n  /** Thin */\n  w1: NestedCSSProperties\n  /** Extra light */\n  w2: NestedCSSProperties\n  /** Light */\n  w3: NestedCSSProperties\n  /** Regular */\n  w4: NestedCSSProperties\n  /** Medium */\n  w5: NestedCSSProperties\n  /** Semi bold */\n  w6: NestedCSSProperties\n  /** Bold */\n  w7: NestedCSSProperties\n  /** Extra bold */\n  w8: NestedCSSProperties\n  /** Black */\n  w9: NestedCSSProperties\n}\n\nexport interface Theme {\n  font: ThemeFont\n  colors: Palette & Tones\n  merge<T>(defs: Partial<T>, state: Partial<T>): T\n  color(color?: S): S\n}\n\nlet theme: Theme | null = null\nexport const\n  loadTheme = (name: S): Theme => {\n    const colors = palettes[name],\n      color = (s?: S): S => {\n        if (!s) return colors.gray\n        if (s.startsWith('$')) {\n          const c = (colors as any)[s.substr(1)]\n          return c ? c : colors.gray\n        }\n        return s\n      },\n      merge = <T extends unknown>(defs: Partial<T>, state: Partial<T>): T => {\n        const s = { ...defs, ...state } as any\n        for (const k in s) {\n          if (k.endsWith('_color')) {// XXX obsolete; remove\n            const v = s[k]\n            if (typeof v === 'string') s[k] = color(v)\n          }\n        }\n        return s as T\n      }\n    theme = { font, colors, merge, color }\n    return theme\n  },\n  getTheme = (): Theme => theme ? theme : loadTheme('light'),\n  palette = {\n    themePrimary: '#000000',\n    themeLighterAlt: '#898989',\n    themeLighter: '#737373',\n    themeLight: '#595959',\n    themeTertiary: '#373737',\n    themeSecondary: '#2f2f2f',\n    themeDarkAlt: '#252525',\n    themeDark: '#151515',\n    themeDarker: '#0b0b0b',\n    neutralLighterAlt: '#faf9f8',\n    neutralLighter: '#f3f2f1',\n    neutralLight: '#edebe9',\n    neutralQuaternaryAlt: '#e1dfdd',\n    neutralQuaternary: '#d0d0d0',\n    neutralTertiaryAlt: '#c8c6c4',\n    neutralTertiary: '#a19f9d',\n    neutralSecondary: '#605e5c',\n    neutralPrimaryAlt: '#3b3a39',\n    neutralPrimary: '#323130',\n    neutralDark: '#201f1e',\n    black: '#000000',\n    white: '#ffffff',\n  },\n  defaultFontStyle = {\n    fontFamily: 'Inter',\n  }\n","import { default as React } from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardMenu } from './card_menu'\nimport { format, isFormatExpr } from './intl'\nimport { B, box, C, Card, Dict, F, parseI, Rec, S, U, unpack, xid } from './qd'\nimport { clas, getTheme, margin, palette } from './theme'\n\ntype Slot = {\n  left: U\n  top: U\n  width?: U\n  height?: U\n  right?: U\n  bottom?: U\n}\n\n\nexport enum CardEffect { Transparent, Normal, Raised, Flat }\n\nconst\n  newCardRegistry = () => {\n    const\n      m: Dict<{ ctor: typeof React.Component, effect: CardEffect }> = {},\n      register = (name: S, ctor: typeof React.Component, effect: CardEffect = CardEffect.Normal) => m[name] = { ctor, effect },\n      lookup = (name: S) => m[name] || m['']\n    return { register, lookup }\n  }\n\nexport const\n  cards = newCardRegistry(),\n  substitute = (formatString?: S, data?: Rec, defaultValue: any = null) => {\n    return (formatString !== undefined && formatString !== null)\n      ? isFormatExpr(formatString)\n        ? format(formatString.substr(1), data)\n        : formatString\n      : (defaultValue !== undefined && defaultValue !== null)\n        ? defaultValue\n        : null\n  },\n  Format = ({ data, defaultValue: v, format: f }: { data?: Rec, defaultValue?: any, format?: S }) => {\n    const x = substitute(f, data, v)\n    return x === null ? x : <>{x}</>\n  },\n  CardView = ({ card }: { card: Card<any> }) => {\n    const Tag = cards.lookup(card.state.view).ctor\n    return <Tag {...card} />\n  },\n  Repeat = ({ view, props, data }: { view: S | any, props: any, data: any }) => {\n    const items = unpack<Rec[]>(data).map((r, i) => {\n      const card: Card<any> = {\n        name: xid(),\n        state: { ...unpack<Rec>(props), view, data: r },\n        changed: box<B>(),\n      }\n      return <CardView key={i} card={card} />\n    })\n    return <>{items}</>\n  }\n\ntype Size = [U, U]\n\nconst\n  badPlacement: Slot = { left: 0, top: 0, width: 0, height: 0 },\n  newGrid = (uw: U, uh: U, cols: U, rows: U, gap: U) => {\n    let scale = 1\n    const\n      iw = uw - 2 * gap, // unit inner width\n      ih = uh - 2 * gap, // unit inner height\n      width = uw * cols + gap * (cols + 1),\n      height = uh * rows + gap * (rows + 1),\n      giw = width - 2 * gap,\n      gih = height - 2 * gap,\n      placeOnGrid = (x: U, y: U, w: U, h: U): Slot => {\n        const\n          slot: Slot = {\n            left: x * (uw + gap),\n            top: y * (uh + gap),\n          }\n        if (w > 0) {\n          slot.width = w * uw + (w - 1) * gap\n        } else {\n          slot.right = -(w + 1) * (uw + gap)\n        }\n        if (h > 0) {\n          slot.height = h * uh + (h - 1) * gap\n        } else {\n          slot.bottom = -(h + 1) * (uh + gap)\n        }\n        return slot\n      },\n      normalize = (s: S): S[] => {\n        const x = s.trim().split(/\\s+/g)\n        switch (x.length) {\n          case 1: return ['1', '1', s, s]\n          case 2: return ['1', '1', ...x]\n          case 3: return [...x, x[2]]\n          case 4: return x\n          default: return x.slice(0, 4)\n        }\n      },\n      place = (s: S): Slot => {\n        if (!s) return badPlacement\n        const [x, y, w, h] = normalize(s).map(parseI)\n        if (isNaN(x) || isNaN(y) || isNaN(w) || isNaN(h)) return badPlacement\n        return placeOnGrid(x - 1, y - 1, w, h)\n      },\n      getWindowSize = (): Size => ([\n        window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,\n        window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight\n      ]),\n      rescale = (): F => {\n        const [w, h] = getWindowSize()\n        scale = Math.min(w / width, h / height)\n        return scale\n      },\n      inset: React.CSSProperties = ({ position: 'absolute', left: gap, top: gap, right: gap, bottom: gap, overflow: 'auto' })\n    return {\n      width, height,\n      innerWidth: giw, innerHeight: gih,\n      unitWidth: uw, unitHeight: uh,\n      unitInnerWidth: iw, unitInnerHeight: ih,\n      gap, place, scale, rescale, inset,\n    }\n  }\n\nexport const\n  grid = newGrid(134, 76, 12, 10, 15) // approx 1800x930\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    grid: {\n      position: 'relative',\n      boxSizing: 'border-box',\n      width: grid.innerWidth,\n      margin: margin(grid.gap),\n    },\n    slot: {\n      backgroundColor: theme.colors.card,\n      boxSizing: 'border-box',\n      transition: 'box-shadow 0.3s cubic-bezier(.25,.8,.25,1)',\n      overflow: 'auto',\n      $nest: {\n        '>*:first-child': {\n          position: 'absolute',\n          left: 15, top: 15, right: 15, bottom: 15,\n        }\n      }\n    },\n    normal: {\n      backgroundColor: theme.colors.card,\n      boxShadow: `0px 3px 5px ${theme.colors.text0}`,\n      $nest: {\n        '&:hover': {\n          boxShadow: `0px 12px 20px ${theme.colors.text2}`,\n        }\n      },\n    },\n    raised: {\n      color: theme.colors.card,\n      backgroundColor: palette.themePrimary,\n      boxShadow: `0px 3px 7px ${theme.colors.text3}`,\n    },\n    flat: {\n      backgroundColor: theme.colors.card,\n      boxShadow: `0px 3px 5px ${theme.colors.text0}`,\n    },\n    flush: {\n      $nest: {\n        '>*:first-child': {\n          position: 'absolute',\n          left: 0, top: 0, right: 0, bottom: 0,\n        }\n      }\n    },\n  })\n\n\nexport const\n  getCardEffectClass = (c: C) => {\n    const effect = cards.lookup(c.state.view).effect\n    return clas(css.slot, effect === CardEffect.Normal\n      ? css.normal\n      : effect === CardEffect.Raised\n        ? css.raised\n        : effect == CardEffect.Flat\n          ? css.flat : css.flush)\n  },\n  GridLayout = ({ name, cards: cs }: { name: S, cards: C[] }) => {\n    const\n      children = cs.map(c => {\n        const\n          placement = grid.place(c.state.box),\n          { left, top, right, bottom, width, height } = placement,\n          display = placement === badPlacement ? 'none' : 'block',\n          zIndex = c.name === '__unhandled_error__' ? 1 : 'initial'\n        return (\n          <div key={c.id} className={getCardEffectClass(c)} style={{ display, position: 'absolute', left, top, right, bottom, width, height, zIndex }}>\n            <CardView card={c} />\n            {!!c.state.commands?.length && <CardMenu name={c.name} commands={c.state.commands} changedB={c.changed} />}\n          </div>\n        )\n      })\n    return (\n      <div data-test={name} className={css.grid}>\n        {children}\n      </div>\n    )\n  }\n","export const showNotification = async (notificationText: string) => {\n  // TODO: Decide on fallback when user's browser does not support Notification API.\n  if (!('Notification' in window)) return\n  else if (Notification.permission === 'granted') new Notification(notificationText)\n  else if (Notification.permission !== 'denied') {\n    if (await Notification.requestPermission() === 'granted') new Notification(notificationText)\n  }\n}","import React from 'react'\nimport { cards } from './layout'\nimport { showNotification } from './notification'\nimport { bond, box, Card, qd, S, U } from './qd'\nimport { Dialog } from './dialog'\n\n/**\n * Represents the layout structure for a page.\n */\nexport interface Layout {\n  /**\n   * The minimum viewport width at which to use this layout.\n   * Values must be pixel widths (e.g. '0px', '576px', '768px') or a named preset.\n   * The named presets are:\n   * 'xs': '0px' for extra small devices (portrait phones),\n   * 's': '576px' for small devices (landscape phones),\n   * 'm': '768px' for medium devices (tablets),\n   * 'l': '992px' for large devices (desktops),\n   * 'xl': '1200px' for extra large devices (large desktops).\n   *\n   * A breakpoint value of 'xs' (or '0') matches all viewport widths, unless other breakpoints are set.\n  */\n  breakpoint: S\n  /** The zones in this layout. Each zones can in turn contain sub-zones. */\n  zones: Zone[]\n  /** The width of the layout. Defaults to `100%`. */\n  width?: S\n  /** The minimum width of the layout. */\n  min_width?: S\n  /** The maximum width of the layout. */\n  max_width?: S\n  /** The height of the layout. Defaults to `auto`. */\n  height?: S\n  /** The minimum height of the layout. */\n  min_height?: S\n  /** The maximum height of the layout. */\n  max_height?: S\n}\n\n/**\n * Represents an zone within a page layout.\n */\nexport interface Zone {\n  /** An identifying name for this zone. */\n  name: S,\n  /** The size of this zone. */\n  size?: S,\n  /** Layout direction. */\n  direction?: 'row' | 'column'\n  /** Layout strategy for main axis. */\n  justify?: 'start' | 'end' | 'center' | 'between' | 'around'\n  /** Layout strategy for cross axis. */\n  align?: 'start' | 'end' | 'center' | 'stretch'\n  /** Wrapping strategy. */\n  wrap?: 'start' | 'end' | 'center' | 'between' | 'around' | 'stretch'\n  /** The sub-zones contained inside this zone. */\n  zones?: Zone[]\n}\n\n/**\n * Represents page-global state.\n *\n * This card is invisible.\n * It is used to control attributes of the active page.\n*/\ninterface State {\n  /** The title of the page. */\n  title?: S\n  /** Refresh rate in seconds. A value of 0 turns off live-updates. Values != 0 are currently ignored (reserved for future use). */\n  refresh?: U\n  /** Display a desktop notification. */\n  notification?: S\n  /** Redirect the page to a new URL. */\n  redirect?: S\n  /** Shortcut icon path. Preferably a `.png` file (`.ico` files may not work in mobile browsers). */\n  icon?: S\n  /** The layouts supported by this page. */\n  layouts?: Layout[]\n  /** Display a dialog on the page. */\n  dialog?: Dialog\n}\n\nexport const\n  layoutsB = box<Layout[]>([]),\n  preload = ({ state }: Card<State>) => {\n    const { title, icon, refresh, notification, redirect, layouts, dialog } = state\n\n    if (title) {\n      delete state.title\n      window.document.title = title\n    }\n\n    if (icon) {\n      delete state.icon\n      const\n        iconLink = document.querySelector(\"link[rel*='icon']\") as HTMLLinkElement,\n        touchIconLink = document.querySelector(\"link[rel*='apple-touch-icon']\") as HTMLLinkElement\n      if (iconLink) iconLink.href = icon\n      if (touchIconLink) touchIconLink.href = icon\n    }\n\n    if (typeof refresh === 'number') {\n      delete state.refresh\n      qd.refreshRateB(refresh)\n    }\n\n    // Force new obj reference to rerender Dialog component with most recent changes.\n    qd.dialogB(dialog ? { ...dialog } : null)\n\n    if (notification) {\n      delete state.notification\n      showNotification(notification)\n    }\n\n    if (redirect) {\n      delete state.redirect\n      try {\n        const url = new URL(redirect)\n        if (redirect === url.hash) {\n          window.location.hash = redirect\n        } else {\n          window.location.replace(redirect)\n        }\n      } catch (e) {\n        console.error(`Could not redirect: ${redirect} is an invalid URL`)\n      }\n    }\n\n    if (layouts) {\n      delete state.layouts\n      layoutsB(layouts)\n    }\n  }\n\nexport const View = bond(() => ({ render: () => <></> }))\n\ncards.register('meta', View)\n","import { default as React } from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardMenu } from './card_menu'\nimport { CardView, GridLayout, getCardEffectClass } from './layout'\nimport { Layout, layoutsB, preload, Zone } from './meta'\nimport { B, bond, box, C, Dict, Disposable, on, Page, parseU, S, U } from './qd'\nimport { clas } from './theme'\n\n\ntype Breakpoint = {\n  layout: Layout\n  min: U\n  max: U\n  listener(e: MediaQueryListEvent): void\n  mq: MediaQueryList\n}\n\ntype Slot = {\n  order: U\n  zone?: S\n  grow?: U\n  size1?: S\n  size2?: S\n}\n\ntype CardSlot = {\n  card: C\n  slot: Slot\n}\n\ntype Section = {\n  zone: Zone\n  sections?: Section[]\n  cardslots: CardSlot[]\n}\n\nconst\n  presetBreakpoints: Dict<S> = {\n    xs: '0px',\n    s: '576px',\n    m: '768px',\n    l: '992px',\n    xl: '1200px',\n  },\n  breakpointsB = box<Breakpoint[]>([]),\n  layoutB = box<{ layout: Layout, index: U } | null>(null),\n  parseBreakpoint = (spec: S): U => parseInt(presetBreakpoints[spec] ?? spec, 10),\n  badSlot: Slot = { order: 0 },\n  parseBox = ({ zone, order, size, width, height }: any): Slot => {\n    return { zone, order: order ? order : 0, grow: parseU(size), size1: width, size2: height }\n  },\n  parseBoxes = (index: U, spec: S): Slot => {\n    try {\n      if (spec[0] === '[') {\n        const specs: any[] = JSON.parse(spec)\n        spec = specs[index]\n        if (!spec) spec = specs[0]\n        if (!spec) return badSlot\n      }\n      return spec[0] === '{' ? parseBox(JSON.parse(spec)) : { zone: spec, order: 0 }\n    } catch {\n      return badSlot\n    }\n  },\n  segregate = <T extends {}>(xs: T[], f: (x: T) => B): [T[], T[]] => {\n    const a: T[] = [], b: T[] = []\n    for (const x of xs) (f(x) ? a : b).push(x)\n    return [a, b]\n  }\n\non(layoutsB, layouts => {\n  const\n    bps = layouts.map((layout, index): Breakpoint => {\n      const\n        nextLayout = layouts[index + 1],\n        min = parseBreakpoint(layout.breakpoint),\n        max = nextLayout ? parseBreakpoint(nextLayout.breakpoint) - 1 : 0,\n        mq = window.matchMedia(\n          max\n            ? `(min-width:${min}px) and (max-width:${max}.98px)`\n            : `(min-width:${min}px)`\n        ),\n        listener = (mq: MediaQueryListEvent) => { if (mq.matches) layoutB({ layout, index }) },\n        bp: Breakpoint = { layout, min, max, mq, listener }\n\n      mq.addEventListener('change', listener)\n      if (mq.matches) layoutB({ layout, index })\n\n      return bp\n    })\n\n  for (const { mq, listener } of breakpointsB()) mq.removeEventListener('change', listener)\n  breakpointsB(bps)\n})\n\nconst\n  css = stylesheet({\n    layout: {\n      display: 'flex',\n    },\n    flex: {\n      position: 'relative',\n      display: 'flex',\n    },\n    column: {\n      $nest: {\n        '>*': { marginBottom: 15 },\n        '>*:last-child': { marginBottom: 0 }\n      }\n    },\n    row: {\n      $nest: {\n        '>*': { marginRight: 15 },\n        '>*:last-child': { marginRight: 0 }\n      }\n    },\n  }),\n  justifications: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n  },\n  alignments: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    baseline: 'baseline',\n    stretch: 'stretch',\n  },\n  wrappings: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n    stretch: 'stretch',\n  },\n  toSectionStyle = (zone: Zone, direction?: S): React.CSSProperties => {\n    const\n      css: React.CSSProperties = {\n        flexDirection: zone.direction === 'row' ? 'row' : 'column',\n        justifyContent: justifications[zone.justify ?? ''],\n        alignItems: alignments[zone.align ?? ''],\n        alignContent: wrappings[zone.wrap ?? ''],\n        flexWrap: zone.wrap ? 'wrap' : undefined,\n      }\n\n    if (zone.size) {\n      if (direction === 'row') {\n        css.width = zone.size\n      } else {\n        css.height = zone.size\n      }\n    } else {\n      css.flexGrow = 1\n    }\n\n    return css\n  },\n  toSlotStyle = ({ card: c, slot }: CardSlot, direction?: S): React.CSSProperties => {\n    const\n      { size1, size2, grow } = slot,\n      zIndex = c.name === '__unhandled_error__' ? 1 : undefined,\n      style: React.CSSProperties = { position: 'relative', zIndex }\n    if (grow) {\n      style.flexGrow = grow\n    } else {\n      if (size1 && size2) {\n        style.width = size1\n        style.height = size2\n      } else if (size1) {\n        if (direction === 'row') {\n          style.width = size1\n        } else {\n          style.height = size1\n        }\n      } else {\n        style.flexGrow = 1\n      }\n    }\n    return style\n\n  },\n  toSection = (zone: Zone): Section => ({\n    zone,\n    sections: zone.zones?.map(toSection),\n    cardslots: []\n  }),\n  findSection = (section: Section, name: S): Section | null => {\n    const { zone, sections } = section\n    if (zone.name === name) return section\n    if (sections) {\n      for (const s of sections) {\n        const c = findSection(s, name)\n        if (c) return c\n      }\n    }\n    return null\n  },\n  sortCardsInSection = (section: Section) => {\n    const { sections } = section\n    if (sections) {\n      for (const s of sections) {\n        sortCardsInSection(s)\n      }\n    }\n    section.cardslots.sort((a, b) => a.slot.order - b.slot.order)\n  },\n  FlexSection = ({ section, direction }: { section: Section, direction?: S }) => {\n    const\n      { zone, cardslots, sections } = section,\n      children = sections\n        ? sections.map(section => <FlexSection key={section.zone.name} direction={zone.direction} section={section} />)\n        : cardslots.length ?\n          cardslots.map(cardslot => {\n            const { card: c } = cardslot\n            return (\n              <div key={c.id} className={getCardEffectClass(c)} style={toSlotStyle(cardslot, zone.direction)}>\n                <CardView card={c} />\n                {!!c.state.commands?.length && <CardMenu name={c.name} commands={c.state.commands} changedB={c.changed} />}\n              </div>\n            )\n          })\n          : null\n\n    return (\n      <div data-test={zone.name} className={clas(css.flex, zone.direction === 'row' ? css.row : css.column)} style={toSectionStyle(zone, direction)}>\n        {children}\n      </div>\n    )\n  },\n  FlexLayout = bond(({ name, cards }: { name: S, cards: C[] }) => {\n    const\n      render = () => {\n        const layoutIndex = layoutB()\n        if (!layoutIndex) return <></>\n        const\n          { layout, index } = layoutIndex,\n          section = toSection({ name: 'main', zones: layout.zones }),\n          { width, min_width, max_width, height, min_height, max_height } = layout\n        for (const card of cards) {\n          const\n            slot = parseBoxes(index, card.state.box),\n            target = findSection(section, slot.zone ?? '')\n          target?.cardslots.push({ card, slot })\n        }\n\n        sortCardsInSection(section)\n\n        const style: React.CSSProperties = {\n          width: width ?? '100%',\n          minWidth: min_width,\n          maxWidth: max_width,\n          height,\n          minHeight: min_height,\n          maxHeight: max_height,\n        }\n        return (\n          <div data-test={name} className={css.layout} style={style}>\n            <FlexSection section={section} />\n          </div>\n        )\n      }\n    return { render, layoutB }\n  })\nexport const\n  PageLayout = bond(({ page }: { page: Page }) => {\n    let\n      metaCard: C | null = null,\n      onMetaCardChanged: Disposable | null = null\n\n    const\n      { changed } = page,\n      render = () => {\n        const\n          all = page.list(),\n          [metas, cards] = segregate(all, c => c.state.view === 'meta')\n\n        if (metas.length) {\n          onMetaCardChanged?.dispose()\n          metaCard = metas[0]\n          preload(metaCard as any)\n          onMetaCardChanged = on(metaCard.changed, () => preload(metaCard as any))\n        }\n        return layoutsB().length\n          ? <FlexLayout name={page.key} cards={cards} />\n          : <GridLayout name={page.key} cards={cards} />\n      }\n\n    return { render, changed }\n  })\n","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards } from './layout'\nimport { bond, Card, S, B } from './qd'\nimport { getTheme, displayMixin } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    titledCard: {},\n    untitledCard: {\n      display: 'absolute', left: 0, top: 0, right: 0, bottom: 0,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n  })\n\n/** Render HTML content. */\nexport interface Markup {\n  /** The HTML content. */\n  content: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\n/** Render HTML content. */\ninterface State {\n  /** The title for this card.*/\n  title: S\n  /** The HTML content. */\n  content: S\n}\n\nexport const\n  XMarkup = ({ model: { content, visible, name } }: { model: Markup }) => (\n    <div data-test={name} dangerouslySetInnerHTML={{ __html: content }} style={displayMixin(visible)} />\n  ),\n  MarkupCard = ({ name, title, content }: { name: S, title: S, content: S }) => (\n    <div data-test={name} className={title ? css.titledCard : css.untitledCard}>\n      {title && <div className={css.title}>{title}</div>}\n      <XMarkup model={{ content }} />\n    </div>\n  ),\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const render = () => <MarkupCard name={name} title={state.title} content={state.content} />\n    return { render, changed }\n  })\n\ncards.register('markup', View)","import markdownit from 'markdown-it'\nimport React from 'react'\nimport { cards, substitute } from './layout'\nimport { bond, Card, Rec, S, unpack } from './qd'\nimport { MarkupCard } from './markup'\n\nexport const\n  markdown = markdownit({ html: true, linkify: true, typographer: true, }),\n  markdownSafe = markdownit({ typographer: true, linkify: true }),\n  Markdown = ({ source }: { source: S }) => (<div dangerouslySetInnerHTML={{ __html: markdown.render(source) }} />),\n  MarkdownSafe = ({ source }: { source: S }) => (<div dangerouslySetInnerHTML={{ __html: markdownSafe.render(source) }} />)\n\n/**\n * Create a card that renders Markdown content.\n *\n * Github-flavored markdown is supported.\n * HTML markup is allowed in markdown content.\n * URLs, if found, are displayed as hyperlinks.\n * Copyright, reserved, trademark, quotes, etc. are replaced with language-neutral symbols.\n */\ninterface State {\n  /** The title for this card.*/\n  title: S\n  /** The markdown content. Supports Github Flavored Markdown (GFM): https://guides.github.com/features/mastering-markdown/ */\n  content: S\n  /** Additional data for the card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const data = unpack(state.data)\n        return (\n          <MarkupCard\n            name={name}\n            title={substitute(state.title, data)}\n            content={markdown.render(substitute(state.content, data))}\n          />\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('markdown', View)","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Markdown } from './markdown'\nimport { B, S } from './qd'\n\nconst\n  css = stylesheet({\n    container: {\n      display: 'flex',\n      alignItems: 'flex-start',\n      alignContent: 'flex-start'\n    },\n    element: {\n      flexGrow: 1\n    },\n    icon: {\n      color: '#323130',\n      fontWeight: 400,\n      fontSize: '14px',\n      userSelect: 'none',\n      textAlign: 'left',\n      marginLeft: '0.5em',\n      cursor: 'pointer'\n    }\n  })\n\nexport const\n  XToolTip = ({ children, content, showIcon, expand }: {\n    children: React.ReactChild,\n    content?: S,\n    showIcon?: B,\n    expand?: B\n  }) => {\n    if (!content) return <>{children}</>\n\n    const\n      tooltipProps: Fluent.ITooltipProps = {\n        onRenderContent: () => (<div><Markdown source={content} /></div>)\n      }\n    return (\n      <div className={css.container} data-test='tooltip'>\n        {\n          showIcon === undefined || showIcon\n            ? (\n              <>\n                <div className={expand === undefined || expand ? css.element : ''}>{children}</div>\n                <Fluent.TooltipHost tooltipProps={tooltipProps}>\n                  <Fluent.FontIcon className={css.icon} iconName='Info' />\n                </Fluent.TooltipHost>\n              </>\n            )\n            : <Fluent.TooltipHost tooltipProps={tooltipProps}>{children}</Fluent.TooltipHost>\n        }\n      </div>\n    )\n  }","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Component } from './form'\nimport { B, bond, S, qd, Dict } from './qd'\nimport { XToolTip } from './tooltip'\nimport { displayMixin } from './theme'\n\n/**\n * Create a button.\n *\n * Buttons are best used to enable a user to commit a change or complete steps in a task.\n * They are typically found inside forms, dialogs, panels or pages.\n * An example of their usage is confirming the deletion of a file in a confirmation dialog.\n *\n * When considering their place in a layout, contemplate the order in which a user will flow through the UI.\n * As an example, in a form, the individual will need to read and interact with the form fields before submitting\n * the form. Therefore, as a general rule, the button should be placed at the bottom of the UI container\n * which holds the related UI elements.\n *\n * Buttons may be placed within a \"buttons\" component which will lay out the buttons horizontally, or used\n * individually and they will be stacked vertically.\n *\n * While buttons can technically be used to navigate a user to another part of the experience, this is not\n * recommended unless that navigation is part of an action or their flow.\n */\nexport interface Button {\n  /** An identifying name for this component. If the name is prefixed with a '#', the button sets the location hash to the name when clicked. */\n  name: S\n  /** The text displayed on the button. */\n  label?: S\n  /** The caption displayed below the label. Setting a caption renders a compound button. */\n  caption?: S\n  /** A value for this button. If a value is set, it is used for the button's submitted instead of a boolean True. */\n  value?: S\n  /** True if the button should be rendered as the primary button in the set. */\n  primary?: B\n  /** True if the button should be disabled. */\n  disabled?: B\n  /** True if the button should be rendered as link text and not a standard button. */\n  link?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\n/** Create a set of buttons to be layed out horizontally. */\nexport interface Buttons {\n  /** The button in this set. */\n  items: Component[]\n  /** Specifies how to lay out buttons horizontally. */\n  justify?: 'start' | 'end' | 'center' | 'between' | 'around'\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\n\nconst\n  css = stylesheet({\n    buttons: {\n      boxSizing: 'border-box',\n    },\n  }),\n  justifications: Dict<Fluent.Alignment> = {\n    start: 'start',\n    end: 'end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n  }\n\nconst\n  XButton = bond(({ model: m }: { model: Button }) => {\n    qd.args[m.name] = false\n    const\n      onClick = () => {\n        if (m.name.startsWith('#')) {\n          window.location.hash = m.name.substr(1)\n          return\n        }\n        qd.args[m.name] = m.value === undefined || m.value\n        qd.sync()\n      },\n      render = () => {\n        if (m.link) {\n          return <Fluent.Link data-test={m.name} disabled={m.disabled} onClick={onClick}>{m.label}</Fluent.Link>\n        }\n        return m.caption?.length\n          ? m.primary\n            ? <Fluent.CompoundButton data-test={m.name} primary text={m.label} secondaryText={m.caption} disabled={m.disabled} onClick={onClick} />\n            : <Fluent.CompoundButton data-test={m.name} text={m.label} secondaryText={m.caption} disabled={m.disabled} onClick={onClick} />\n          : m.primary\n            ? <Fluent.PrimaryButton data-test={m.name} text={m.label} disabled={m.disabled} onClick={onClick} />\n            : <Fluent.DefaultButton data-test={m.name} text={m.label} disabled={m.disabled} onClick={onClick} />\n      }\n    return { render }\n  })\nexport const\n  XButtons = ({ model: m }: { model: Buttons }) => {\n    const\n      children = (m.items.map(c => c.button).filter(Boolean) as Button[]).map(b => (\n        <XToolTip key={b.name} content={b.tooltip} showIcon={false} expand={false}>\n          <XButton model={b}>{b.label}</XButton>\n        </XToolTip>\n      ))\n    return (\n      <div data-test={m.name} className={css.buttons} style={displayMixin(m.visible)}>\n        <Fluent.Stack horizontal horizontalAlign={justifications[m.justify || '']} tokens={{ childrenGap: 10 }}>{children}</Fluent.Stack>\n      </div>\n    )\n  },\n  XStandAloneButton = ({ model: m }: { model: Button }) => (\n    <div className={css.buttons} style={displayMixin(m.visible)}>\n      <XButton key={m.name} model={m}>{m.label}</XButton>\n    </div>\n  )","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, S, qd } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a checkbox.\n *\n * A checkbox allows users to switch between two mutually exclusive options (checked or unchecked, on or off) through\n * a single click or tap. It can also be used to indicate a subordinate setting or preference when paired with another\n * component.\n *\n * A checkbox is used to select or deselect action items. It can be used for a single item or for a list of multiple\n * items that a user can choose from. The component has two selection states: unselected and selected.\n *\n * For a binary choice, the main difference between a checkbox and a toggle switch is that the checkbox is for status\n * and the toggle switch is for action.\n *\n * Use multiple checkboxes for multi-select scenarios in which a user chooses one or more items from a group of\n * choices that are not mutually exclusive.\n */\nexport interface Checkbox {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the checkbox. */\n  label?: S\n  /** True if selected, False if unselected. */\n  value?: B\n  /** True if the selection is indeterminate (neither selected nor unselected). */\n  indeterminate?: B\n  /** True if the checkbox is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the checkbox value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XCheckbox = bond(({ model: m }: { model: Checkbox }) => {\n    qd.args[m.name] = !!m.value\n    const\n      onChange = (_e?: React.FormEvent<HTMLElement>, checked?: boolean) => {\n        qd.args[m.name] = checked === null ? null : !!checked\n        if (m.trigger) qd.sync()\n      },\n      render = () => (\n        <Fluent.Checkbox\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          inputProps={{ 'data-test': m.name } as any} // HACK: data-test does not work on root as of this version\n          label={m.label}\n          defaultIndeterminate={m.indeterminate}\n          defaultChecked={m.value}\n          onChange={onChange}\n          disabled={m.disabled}\n        />\n      )\n\n    return { render }\n  })","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { Choice } from './choice_group'\nimport { B, bond, box, Box, on, S, qd } from './qd'\nimport { margin, displayMixin } from './theme'\nimport { stylesheet } from 'typestyle'\n\n/**\n * Create a set of checkboxes.\n * Use this for multi-select scenarios in which a user chooses one or more items from a group of\n * choices that are not mutually exclusive.\n */\nexport interface Checklist {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed above the component. */\n  label?: S\n  /** The names of the selected choices. */\n  values?: S[]\n  /** The choices to be presented. */\n  choices?: Choice[]\n  /** True if the form should be submitted when the checklist value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst\n  css = stylesheet({\n    toolbar: {\n      margin: margin(5, 0)\n    },\n    items: {\n      $nest: {\n        '> *': {\n          margin: '10px 0',\n        }\n      },\n    },\n  }),\n  XChecklistItem = bond(({ name, label, disabled, selectedB }: { name: S, label: S, disabled: B, selectedB: Box<B> }) => {\n    const\n      onChange = (_e?: React.FormEvent<HTMLElement>, checked?: boolean) => selectedB(!!checked),\n      render = () => {\n        return (\n          <Fluent.Checkbox\n            data-test={name}\n            label={label}\n            checked={selectedB()}\n            onChange={onChange}\n            disabled={disabled}\n            styles={{ root: { marginBottom: 4 } }}\n          />\n        )\n      }\n    return { render, selectedB }\n  })\n\nexport const\n  XChecklist = bond(({ model: m }: { model: Checklist }) => {\n    qd.args[m.name] = m.values || []\n    let _pause = false\n    const\n      defaultSelection = new Set<S>(m.values),\n      choices = (m.choices || []).map(c => ({\n        choice: c,\n        selectedB: box(defaultSelection.has(c.name))\n      })),\n      capture = () => {\n        if (_pause) return\n        const vs: S[] = []\n        for (const c of choices) if (c.selectedB()) vs.push(c.choice.name)\n        qd.args[m.name] = vs\n        if (m.trigger) qd.sync()\n      },\n      select = (value: B) => {\n        _pause = true\n        for (const c of choices) if (!c.choice.disabled) c.selectedB(value)\n        _pause = false\n        capture()\n      },\n      selectAll = () => select(true),\n      deselectAll = () => select(false),\n      render = () => {\n        const\n          items = choices.map(({ choice, selectedB }, i) => (\n            <XChecklistItem name={`checkbox-${i + 1}`} key={i} label={choice.label || choice.name} disabled={!!choice.disabled} selectedB={selectedB} />\n          ))\n        return (\n          <div data-test={m.name} style={displayMixin(m.visible)}>\n            <Fluent.Label>{m.label}</Fluent.Label>\n            <div className={css.toolbar}>\n              <Fluent.Text variant='small'>\n                <Fluent.Link onClick={selectAll}>Select All</Fluent.Link> | <Fluent.Link onClick={deselectAll}>Deselect All</Fluent.Link>\n              </Fluent.Text>\n            </div>\n            <div className={css.items}>{items}</div>\n          </div>\n        )\n      }\n    choices.forEach(c => on(c.selectedB, capture))\n    return { render }\n  })","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, S, qd } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n *  Create a choice for a checklist, choice group or dropdown.\n */\nexport interface Choice {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** True if the checkbox is disabled. */\n  disabled?: B\n}\n\n/**\n * Create a choice group.\n * The choice group component, also known as radio buttons, let users select one option from two or more choices.\n * Each option is represented by one choice group button; a user can select only one choice group in a button group.\n *\n * Choice groups emphasize all options equally, and that may draw more attention to the options than necessary.\n * Consider using other components, unless the options deserve extra attention from the user.\n * For example, if the default option is recommended for most users in most situations, use a dropdown instead.\n *\n * If there are only two mutually exclusive options, combine them into a single Checkbox or Toggle switch.\n * For example, use a checkbox for \"I agree\" instead of choice group buttons for \"I agree\" and \"I don't agree.\"\n*/\nexport interface ChoiceGroup {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** The name of the selected choice. */\n  value?: S\n  /** The choices to be presented. */\n  choices?: Choice[]\n  /** True if this field is required. */\n  required?: B\n  /** True if the form should be submitted when the selection changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XChoiceGroup = bond(({ model: m }: { model: ChoiceGroup }) => {\n    qd.args[m.name] = m.value || null\n    const\n      options = (m.choices || []).map(({ name, label, disabled }): Fluent.IChoiceGroupOption => ({ key: name, text: label || name, disabled })),\n      onChange = (_e?: React.FormEvent<HTMLElement>, option?: Fluent.IChoiceGroupOption) => {\n        if (option) qd.args[m.name] = option.key\n        if (m.trigger) qd.sync()\n      },\n      render = () => (\n        <Fluent.ChoiceGroup\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          label={m.label}\n          required={m.required}\n          defaultSelectedKey={m.value}\n          options={options}\n          onChange={onChange}\n        />\n      )\n\n    return { render }\n  })","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { bond, S, qd, B } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a color picker.\n *\n * A date picker allows a user to pick a color value.\n * If the 'choices' parameter is set, a swatch picker is displayed instead of the standard color picker.\n */\nexport interface ColorPicker {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** The selected color (CSS-compatible string). */\n  value?: S\n  /** A list of colors (CSS-compatible strings) to limit color choices to. */\n  choices?: S[]\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** True if the form should be submitted when the color picker value changes. */\n  trigger?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst\n  toColorCells = (cs: S[]) => cs.map((c): Fluent.IColorCellProps => ({ id: c, label: c, color: c }))\n\nexport const\n  XColorPicker = bond(({ model: m }: { model: ColorPicker }) => {\n    const value = m.value || null\n    qd.args[m.name] = value\n    const\n      onColorChanged = (_id?: string, color?: string) => {\n        qd.args[m.name] = color || value\n\n        if (m.trigger) qd.sync()\n      },\n      onChange = (_e: React.SyntheticEvent<HTMLElement>, color: Fluent.IColor) => {\n        qd.args[m.name] = color?.str || value\n        if (m.trigger) qd.sync()\n      },\n      render = () => (\n        <div data-test={m.name} style={displayMixin(m.visible)}>\n          <Fluent.Label>{m.label}</Fluent.Label>\n          {\n            m.choices?.length\n              ? <Fluent.SwatchColorPicker\n                columnCount={10}\n                selectedId={value || m.choices[0]}\n                colorCells={toColorCells(m.choices)}\n                onColorChanged={onColorChanged}\n              />\n              : <Fluent.ColorPicker\n                color={value || '#000'}\n                onChange={onChange}\n              />\n          }\n        </div>\n      )\n\n    return { render }\n  })","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, box, S, qd } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a combobox.\n *\n * A combobox is a list in which the selected item is always visible, and the others are visible on demand by\n * clicking a drop-down button or by typing in the input.\n * They are used to simplify the design and make a choice within the UI.\n *\n * When closed, only the selected item is visible.\n * When users click the drop-down button, all the options become visible.\n * To change the value, users open the list and click another value or use the arrow keys (up and down)\n * to select a new value.\n * When collapsed the user can select a new value by typing.\n */\nexport interface Combobox {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** A string that provides a brief hint to the user as to what kind of information is expected in the field. */\n  placeholder?: S\n  /** The name of the selected choice. */\n  value?: S\n  /** The choices to be presented. */\n  choices?: S[]\n  /** Text to be displayed as an error below the text box. */\n  error?: S\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\n\nexport const\n  XCombobox = bond(({ model: m }: { model: Combobox }) => {\n    qd.args[m.name] = m.value || null\n    const\n      textB = box(m.value),\n      options = (m.choices || []).map((text, i): Fluent.IComboBoxOption => ({ key: `${i}`, text })),\n      onChange = (_e: React.FormEvent<Fluent.IComboBox>, option?: Fluent.IComboBoxOption, _index?: number, value?: string) => {\n        const v = option?.text || value || ''\n        qd.args[m.name] = v\n        textB(v)\n      },\n      render = () => (\n        <Fluent.ComboBox\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          label={m.label}\n          placeholder={m.placeholder}\n          options={options}\n          disabled={m.disabled}\n          autoComplete=\"on\"\n          allowFreeform={true}\n          errorMessage={m.error}\n          text={textB()}\n          onChange={onChange}\n        />\n      )\n    return { render, textB }\n  })","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, S, qd, U } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a date picker.\n *\n * A date picker allows a user to pick a date value.\n */\nexport interface DatePicker {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** A string that provides a brief hint to the user as to what kind of information is expected in the field. */\n  placeholder?: S\n  /** The date value in YYYY-MM-DD format. */\n  value?: S\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the datepicker value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst\n  pad2 = (n: U) => { const s = `${n}`; return s.length === 1 ? `0${s}` : s },\n  formatDate = (d: Date): S => `${d.getFullYear()}-${pad2(d.getMonth() + 1)}-${pad2(d.getDate())}`,\n  parseDate = (s: S | null): Date | undefined => {\n    if (s && s.length) {\n      const ss = s.split('-')\n      if (ss.length !== 3) return undefined\n      const ymd = ss.map(s => parseInt(s, 10)).filter(n => !isNaN(n))\n      if (ymd.length !== 3) return undefined\n      return new Date(ymd[0], ymd[1] - 1, ymd[2])\n    }\n    return undefined\n  }\n\nexport const\n  XDatePicker = bond(({ model: m }: { model: DatePicker }) => {\n    const value = m.value || null\n    qd.args[m.name] = value\n    const\n      onSelectDate = (d: Date | null | undefined) => {\n        qd.args[m.name] = (d === null || d === undefined) ? value : formatDate(d)\n\n        if (m.trigger) qd.sync()\n      },\n      render = () => (\n        <Fluent.DatePicker\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          label={m.label}\n          value={parseDate(value)}\n          placeholder={m.placeholder}\n          disabled={m.disabled}\n          onSelectDate={onSelectDate}\n        />\n      )\n\n    return { render }\n  })","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { Choice } from './choice_group'\nimport { B, bond, S, qd, box } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a dropdown.\n *\n * A dropdown is a list in which the selected item is always visible, and the others are visible on demand by clicking\n * a drop-down button. They are used to simplify the design and make a choice within the UI. When closed, only the\n * selected item is visible. When users click the drop-down button, all the options become visible.\n *\n * To change the value, users open the list and click another value or use the arrow keys (up and down) to\n * select a new value.\n *\n * Note: Use either the 'value' parameter or the 'values' parameter. Setting the 'values' parameter renders a\n * multi-select dropdown.\n */\nexport interface Dropdown {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** A string that provides a brief hint to the user as to what kind of information is expected in the field. */\n  placeholder?: S\n  /** The name of the selected choice. */\n  value?: S\n  /** The names of the selected choices. If this parameter is set, multiple selections will be allowed. */\n  values?: S[]\n  /** The choices to be presented. */\n  choices?: Choice[]\n  /** True if this is a required field. */\n  required?: B\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the dropdown value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XDropdown = bond(({ model: m }: { model: Dropdown }) => {\n    const isMultivalued = !!m.values\n    qd.args[m.name] = isMultivalued\n      ? (m.values || [])\n      : (m.value || null)\n\n    const\n      selection = isMultivalued ? new Set<S>(m.values) : null,\n      selectedOptionsB = box(Array.from(selection || [])),\n      options = (m.choices || []).map(({ name, label, disabled }): Fluent.IDropdownOption => ({ key: name, text: label || name, disabled })),\n      onChange = (_e?: React.FormEvent<HTMLElement>, option?: Fluent.IDropdownOption) => {\n        if (option) {\n          const name = option.key as S\n          if (isMultivalued && selection !== null) {\n            if (option.selected) {\n              selection.add(name)\n            } else {\n              selection.delete(name)\n            }\n            const selectedOpts = Array.from(selection)\n            qd.args[m.name] = selectedOpts\n            selectedOptionsB(selectedOpts)\n          } else {\n            qd.args[m.name] = name\n          }\n        }\n        if (m.trigger) qd.sync()\n      },\n      selectAll = () => {\n        if (!selection) return\n\n        selection.clear()\n        options.forEach(o => { if (!o.disabled) selection.add(o.key as S) })\n\n        const selectionArr = Array.from(selection)\n        selectedOptionsB(selectionArr)\n        qd.args[m.name] = selectionArr\n\n        onChange()\n      },\n      deselectAll = () => {\n        if (!selection) return\n\n        selection.clear()\n        selectedOptionsB([])\n        qd.args[m.name] = []\n\n        onChange()\n      },\n      render = () =>\n        <div style={displayMixin(m.visible)}>\n          <Fluent.Dropdown\n            data-test={m.name}\n            label={m.label}\n            placeholder={m.placeholder}\n            options={options}\n            required={m.required}\n            disabled={m.disabled}\n            multiSelect={isMultivalued || undefined}\n            defaultSelectedKey={!isMultivalued ? m.value : undefined}\n            selectedKeys={isMultivalued ? selectedOptionsB() : undefined}\n            onChange={onChange}\n          />\n          {\n            isMultivalued &&\n            <div>\n              <Fluent.Text variant='small'>\n                <Fluent.Link onClick={selectAll}>Select All</Fluent.Link> | <Fluent.Link onClick={deselectAll}>Deselect All</Fluent.Link>\n              </Fluent.Text>\n            </div>\n          }\n        </div>\n\n    return { render, selectedOptionsB }\n  })","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Component, XComponents } from './form'\nimport { B, bond, box, S, qd } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Creates a new expander.\n *\n * Expanders can be used to show or hide a group of related components.\n */\nexport interface Expander {\n  /** An identifying name for this component. */\n  name: S\n  /** The text displayed on the expander. */\n  label?: S\n  /** True if expanded, False if collapsed. */\n  expanded?: B\n  /** List of components to be hideable by the expander. */\n  items?: Component[]\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    expanderOpen: {\n      $nest: {\n        '>div:last-child': {\n          display: 'block',\n        },\n      },\n    },\n    expanderClosed: {\n      $nest: {\n        '>div:last-child': {\n          display: 'none',\n        },\n      },\n    },\n  })\n\nexport const\n  XExpander = bond(({ model: m }: { model: Expander }) => {\n    const\n      isOpenB = box(!!qd.args[m.name]),\n      onClick = () => {\n        qd.args[m.name] = m.expanded = !m.expanded\n        isOpenB(m.expanded)\n      },\n      render = () => {\n        const\n          isOpen = isOpenB(),\n          actionTitle = isOpen ? 'Shrink' : 'Expand',\n          expanderIcon = { iconName: isOpen ? 'ChevronDownMed' : 'ChevronRightMed' },\n          className = isOpenB() ? css.expanderOpen : css.expanderClosed\n\n        return (\n          <div data-test={m.name} className={className} style={displayMixin(m.visible)}>\n            <Fluent.Separator alignContent=\"start\" styles={{ content: { paddingLeft: 0 } }}>\n              <Fluent.ActionButton\n                title={actionTitle}\n                iconProps={expanderIcon}\n                onClick={onClick}\n                styles={{ root: { paddingLeft: 0 }, icon: { marginLeft: 0 } }}>{m.label}</Fluent.ActionButton>\n            </Fluent.Separator>\n            <div>\n              <XComponents items={m.items || []} />\n            </div>\n          </div>\n        )\n      }\n    return { isOpenB, render }\n  })","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { B, bond, box, S, qd, U, xid, F } from './qd'\nimport { getTheme, centerMixin, dashed, clas, displayMixin } from './theme'\n\n/**\n * Create a file upload component.\n * A file upload component allows a user to browse, select and upload one or more files.\n */\nexport interface FileUpload {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** True if the component should allow multiple files to be uploaded. */\n  multiple?: B\n  /** List of allowed file extensions, e.g. `pdf`, `docx`, etc. */\n  file_extensions?: S[]\n  /** Maximum allowed size (Mb) per file. Defaults to no limit. */\n  max_file_size?: F\n  /** Maximum allowed size (Mb) for all files combined. Defaults to no limit. */\n  max_size?: F\n  /** The height of the file upload, e.g. '400px', '50%', etc. */\n  height?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst\n  { colors } = getTheme(),\n  css = stylesheet({\n    uploadInput: {\n      opacity: 0\n    },\n    upload: {\n      ...centerMixin(),\n      flexDirection: 'column',\n      boxSizing: 'border-box',\n    },\n    uploadDragging: {\n      border: dashed(2, colors.text),\n    },\n    uploadLabel: {\n      ...centerMixin(),\n      padding: 15,\n      background: colors.text,\n      color: colors.page,\n      minWidth: 80,\n      $nest: {\n        '&:hover': {\n          cursor: 'pointer'\n        }\n      }\n    },\n    uploadMessageBar: {\n      margin: '20px 0'\n    },\n    uploadRemove: {\n      fontSize: 20,\n      position: 'absolute',\n      top: -15,\n      right: 0,\n      cursor: 'pointer'\n    },\n  })\nconst convertMegabytesToBytes = (bytes: F) => bytes * 1024 * 1024\nexport const\n  XFileUpload = bond(({ model }: { model: FileUpload }) => {\n    const\n      isDraggingB = box(false),\n      filesB = box<File[]>([]),\n      percentCompleteB = box(0.0),\n      errorB = box(''),\n      successMsgB = box(''),\n      maxFileSizeBytes = model.max_file_size ? convertMegabytesToBytes(model.max_file_size) : 0,\n      maxSizeBytes = model.max_size ? convertMegabytesToBytes(model.max_size) : 0,\n      fileExtensions = model.file_extensions\n        ? model.file_extensions.map(e => e.startsWith('.') ? e : `.${e}`)\n        : null,\n      upload = async () => {\n        const formData = new FormData()\n        filesB().forEach(f => formData.append('files', f))\n\n        try {\n          const makeRequest = new Promise<XMLHttpRequest>((resolve, reject) => {\n            const xhr = new XMLHttpRequest()\n            xhr.open(\"POST\", \"/_f\")\n            xhr.upload.onprogress = e => percentCompleteB(e.loaded / e.total)\n            xhr.send(formData)\n            xhr.onreadystatechange = () => {\n              if (xhr.readyState !== XMLHttpRequest.DONE) return\n              if (xhr.status >= 200 && xhr.status < 300) resolve(xhr)\n              else reject(xhr)\n            }\n          })\n          const { responseText } = await makeRequest\n          const { files } = JSON.parse(responseText)\n          qd.args[model.name] = files\n          qd.sync()\n          successMsgB(`Successfully uploaded files: ${filesB().map(({ name }) => name).join(',')}.`)\n        }\n        catch (e) { errorB('There was an error when uploading file.') }\n        finally { filesB([]) }\n      },\n      isFileTypeAllowed = (fileName: string) => {\n        if (!fileExtensions) return true\n        for (const allowedExtension of fileExtensions) {\n          if (fileName.toLowerCase().endsWith(allowedExtension.toLowerCase())) return true\n        }\n        return false\n      },\n      validateFiles = (fileArr: File[]) => {\n        if (!model.multiple && fileArr.length > 1) {\n          return 'Cannot upload multiple files. Input is not set to multiple mode.'\n        }\n\n        const notAllowedFiles = fileArr.filter(({ name }) => !isFileTypeAllowed(name))\n        if (notAllowedFiles.length) {\n          return `Not allowed extension for files: ${notAllowedFiles.map(({ name }) => name).join(', ')}.\n          Allowed file extensions: ${fileExtensions?.join(', ')}.`\n        }\n\n        if (maxFileSizeBytes) {\n          const maxSizePerFileExceededFiles = fileArr.filter(({ size }) => size > maxFileSizeBytes)\n          if (maxSizePerFileExceededFiles.length) {\n            return `Max file size exceeded for files: ${maxSizePerFileExceededFiles.map(({ name }) => name).join(', ')}.\n            Allowed size per file: ${model.max_file_size}Mb.`\n          }\n        }\n\n        if (maxSizeBytes) {\n          const totalSize = fileArr.reduce((total, { size }) => total + size, 0)\n          if (totalSize > maxSizeBytes) {\n            return `Total max file size exceeded. Allowed size: ${model.max_size}Mb.`\n          }\n        }\n      },\n      onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const files = e.target.files\n        if (!files?.length) return\n        const fileArr = Array.from(files)\n\n        const errMsg = validateFiles(fileArr)\n        if (errMsg) {\n          errorB(errMsg)\n          return\n        }\n        filesB(fileArr)\n      },\n      onIsDragging = (e: React.DragEvent<HTMLFormElement>) => {\n        e.preventDefault()\n        e.stopPropagation()\n        isDraggingB(true)\n      },\n      onIsNotDragging = (e: React.DragEvent<HTMLFormElement>) => {\n        e.preventDefault()\n        e.stopPropagation()\n        isDraggingB(false)\n      },\n      onDrop = (e: React.DragEvent<HTMLFormElement>) => {\n        onIsNotDragging(e)\n        const files = e.dataTransfer.files\n        if (!files.length || errorB() || successMsgB()) return\n        const fileArr = Array.from(files)\n\n        const errMsg = validateFiles(fileArr)\n        if (errMsg) {\n          errorB(errMsg)\n          return\n        }\n\n        filesB(fileArr)\n      },\n      // Workaround - This event prevents onDrop from firing.\n      // https://stackoverflow.com/questions/50230048/react-ondrop-is-not-firing/50230145.\n      onDragOver = (e: React.DragEvent<HTMLFormElement>) => {\n        e.preventDefault()\n        e.stopPropagation()\n      },\n      onDismissError = () => errorB(''),\n      onDismissSuccess = () => {\n        successMsgB('')\n        percentCompleteB(0)\n      },\n      removeFile = (index: U) => () => {\n        filesB().splice(index, 1)\n        filesB([...filesB()])\n      },\n      getUploadBodyComponent = () => {\n        if (errorB()) return (\n          <>\n            <Fluent.Text variant='xLarge'>An error occured</Fluent.Text>\n            <Fluent.MessageBar\n              className={css.uploadMessageBar}\n              messageBarType={Fluent.MessageBarType.error}\n              isMultiline={true}\n              onDismiss={onDismissError}>\n              {errorB()}\n            </Fluent.MessageBar>\n          </>\n        )\n        else if (successMsgB()) return (\n          <>\n            <Fluent.Text variant='xLarge'>Upload successful</Fluent.Text>\n            <Fluent.MessageBar\n              className={css.uploadMessageBar}\n              messageBarType={Fluent.MessageBarType.success}\n              isMultiline={true}\n              onDismiss={onDismissSuccess}>\n              {successMsgB()}\n            </Fluent.MessageBar>\n          </>\n        )\n        else if (isDraggingB()) return (\n          <Fluent.Text styles={{ root: { pointerEvents: 'none' } }}>Drop files anywhere within the box.</Fluent.Text>\n        )\n        else if (percentCompleteB()) return (\n          <Fluent.ProgressIndicator\n            styles={{ root: { width: '80%' } }}\n            data-test='progress' // TODO: Does not work.\n            description={`Uploading: ${(percentCompleteB() * 100).toFixed(2)}%`}\n            percentComplete={percentCompleteB()}\n          />\n        )\n        else if (filesB().length) return (\n          <>\n            <Fluent.Text variant='xLarge'>{model.multiple ? 'Chosen Files' : 'Chosen File'}</Fluent.Text>\n            <Fluent.Stack\n              horizontal={true}\n              verticalAlign='center'\n              styles={{ root: { maxWidth: '100%', overflowX: 'auto', padding: '30px 0' } }}\n              tokens={{ childrenGap: 15 }}>\n              {\n                filesB().map(({ name }, i) => (\n                  <Fluent.StackItem key={xid()} styles={{ root: { textAlign: 'center', position: 'relative' } }}>\n                    <Fluent.Icon className={css.uploadRemove} iconName='RemoveFilter' onClick={removeFile(i)} />\n                    <Fluent.Icon iconName='OpenFile' styles={{ root: { fontSize: 35 } }} />\n                    <br />\n                    <Fluent.Text nowrap={true} styles={{ root: { display: 'block', margin: '15px 0' } }}>{name}</Fluent.Text>\n                  </Fluent.StackItem>\n                ))\n              }\n            </Fluent.Stack>\n          </>\n        )\n        else return (\n          <>\n            <Fluent.Icon iconName='CloudUpload' styles={{ root: { fontSize: 50 } }} />\n            <input\n              id='file'\n              data-test={model.name}\n              className={css.uploadInput}\n              onChange={onChange}\n              type='file'\n              accept={fileExtensions?.join(',') || undefined}\n              multiple={model.multiple} />\n            <label htmlFor=\"file\" className={css.uploadLabel}>\n              <Fluent.Text variant={'large'}>Browse...</Fluent.Text>\n            </label>\n            <Fluent.Text styles={{ root: { marginTop: 15 } }}>Or drag and drop {model.multiple ? 'files' : 'a file'} here.</Fluent.Text>\n          </>\n        )\n      },\n      render = () => {\n        const uploadClasses = isDraggingB() && !errorB() && !successMsgB() ? clas(css.upload, css.uploadDragging) : css.upload\n        return (\n          <div style={displayMixin(model.visible)}>\n            <form\n              className={uploadClasses}\n              style={{ height: model.height || 300 }}\n              onDragStart={onIsDragging}\n              onDragEnter={onIsDragging}\n              onDragEnd={onIsNotDragging}\n              onDragLeave={onIsNotDragging}\n              onDrop={onDrop}\n              onDragOver={onDragOver}\n            >\n              {getUploadBodyComponent()}\n            </form>\n            <Fluent.PrimaryButton\n              disabled={!!percentCompleteB() || !filesB().length}\n              text={model.label}\n              onClick={upload} />\n          </div>\n        )\n      }\n\n    return { render, percentCompleteB, isDraggingB, filesB, errorB, successMsgB }\n  })","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards } from './layout'\nimport { bond, Card, S, xid, B } from './qd'\nimport { getTheme, displayMixin } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      position: 'absolute', left: 0, top: 0, right: 0, bottom: 0,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    body: {\n      position: 'absolute', left: 0, top: 20, right: 0, bottom: 0,\n    },\n  })\n\n/**\n * Create a new inline frame (an `iframe`).\n */\nexport interface Frame {\n  /** The path or URL of the web page, e.g. `/foo.html` or `http://example.com/foo.html` */\n  path?: S\n  /** The HTML content of the page. A string containing `<html>...</html>`. */\n  content?: S\n  /** The width of the frame, e.g. `200px`, `50%`, etc. Defaults to `100%`. */\n  width?: S\n  /** The height of the frame, e.g. `200px`, `50%`, etc. Defaults to `150px`. */\n  height?: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\n/**\n * Render a card containing a HTML page inside an inline frame (an `iframe`).\n *\n * Either a path or content can be provided as arguments.\n */\ninterface State {\n  /** The title for this card.*/\n  title: S\n  /** The path or URL of the web page, e.g. `/foo.html` or `http://example.com/foo.html` */\n  path?: S\n  /** The HTML content of the page. A string containing `<html>...</html>` */\n  content?: S\n}\n\nconst\n  // replace ' src=\"/' -> ' src=\"http://foo.bar.baz:8080/'\n  fixrefs = (s: S): S => s.replace(/(\\s+src\\s*=\\s*[\"'])\\//g, `$1${window.location.protocol}//${window.location.host}/`),\n  inline = (s: S): S => URL.createObjectURL(new Blob([fixrefs(s)], { type: 'text/html' })),\n  InlineFrame = ({ path, content }: { path?: S, content?: S }) => (\n    <iframe title={xid()} src={path ? path : content ? inline(content) : inline('Nothing to render.')} frameBorder=\"0\" width=\"100%\" height=\"100%\" />\n  )\n\n// HACK: Applying width/height styles directly on iframe don't work in Chrome/FF; so wrap in div instead.\nexport const XFrame = ({ model: { name, path, content, width = '100%', height = '150px', visible } }: { model: Frame }) => (\n  <div data-test={name} style={{ width, height, ...displayMixin(visible) }}>\n    <InlineFrame path={path} content={content} />\n  </div>\n)\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const render = () => (\n      <div data-test={name} className={css.card}>\n        <div className={css.title}>{state.title}</div>\n        <div className={css.body}>\n          <InlineFrame path={state.path} content={state.content} />\n        </div>\n      </div>\n    )\n    return { render, changed }\n  })\n\ncards.register('frame', View)\n","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a label.\n *\n * Labels give a name or title to a component or group of components.\n * Labels should be in close proximity to the component or group they are paired with.\n * Some components, such as textboxes, dropdowns, or toggles, already have labels\n * incorporated, but other components may optionally add a Label if it helps inform\n * the user of the component’s purpose.\n*/\nexport interface Label {\n  /**  The text displayed on the label.*/\n  label: S\n  /** True if the field is required. */\n  required?: B\n  /** True if the label should be disabled. */\n  disabled?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nexport const\n  XLabel = ({ model }: { model: Label }) => {\n    const { label, required = false, disabled = false, visible, name } = model\n    return (\n      <Fluent.Label\n        data-test={name}\n        style={displayMixin(visible)}\n        required={required}\n        disabled={disabled}\n      >{label}</Fluent.Label>\n    )\n  }","/* eslint-disable @typescript-eslint/camelcase */\nimport { Chart, registerInteraction } from '@antv/g2'\nimport { AdjustOption, AnnotationPosition, ArcOption, CoordinateActions, CoordinateOption, DataMarkerOption, DataRegionOption, GeometryOption, LineOption, RegionOption, ScaleOption, TextOption, ChartCfg, AxisOption } from '@antv/g2/lib/interface'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Fmt, parseFormat } from './intl'\nimport { cards } from './layout'\nimport { B, bond, Card, Dict, F, parseI, parseU, qd, Rec, S, unpack, V } from './qd'\nimport { getTheme, displayMixin } from './theme'\n\nconst\n  theme = getTheme(),\n  hues = theme.colors,\n  cat10 = [\n    hues.gray,\n    hues.blue,\n    hues.green,\n    hues.amber,\n    hues.tangerine,\n    hues.purple,\n    hues.cyan,\n    hues.mint,\n    hues.pink,\n    hues.brown,\n  ]\ntype AnnotationOption = ArcOption | LineOption | TextOption | RegionOption | DataMarkerOption | DataRegionOption\n\nenum SpaceT { CC, DD, TT, CD, DC, TC, CT, TD, DT }\n\n/**\n * Create a specification for a layer of graphical marks such as bars, lines, points for a plot.\n * A plot can contain multiple such layers of marks.\n*/\ninterface Mark {\n  /** Coordinate system. `rect` is synonymous to `cartesian`. `theta` is transposed `polar`. */\n  coord?: 'rect' | 'cartesian' | 'polar' | 'theta' | 'helix';\n  /** Graphical geometry. */\n  type?: 'interval' | 'line' | 'path' | 'point' | 'area' | 'polygon' | 'schema' | 'edge' | 'heatmap';\n  /** X field or value. */\n  x?: V;\n  /** X base field or value. */\n  x0?: V;\n  /** X bin lower bound field or value. For histograms. */\n  x1?: V;\n  /** X bin upper bound field or value. For histograms. */\n  x2?: V;\n  /** X axis scale minimum. */\n  x_min?: F;\n  /** X axis scale maximum. */\n  x_max?: F;\n  /** Whether to nice X axis scale ticks. */\n  x_nice?: B;\n  /** X axis scale type. */\n  x_scale?: 'linear' | 'cat' | 'category' | 'identity' | 'log' | 'pow' | 'power' | 'time' | 'time-category' | 'quantize' | 'quantile';\n  /** X axis title. */\n  x_title?: S;\n  /** Y field or value. */\n  y?: V;\n  /** Y base field or value. */\n  y0?: V;\n  /** Y bin lower bound field or value. For histograms. */\n  y1?: V;\n  /** Y bin upper bound field or value. For histograms. */\n  y2?: V;\n  /** Y axis scale minimum. */\n  y_min?: F;\n  /** Y axis scale maximum. */\n  y_max?: F;\n  /** Whether to nice Y axis scale ticks. */\n  y_nice?: B;\n  /** Y axis scale type. */\n  y_scale?: 'linear' | 'cat' | 'category' | 'identity' | 'log' | 'pow' | 'power' | 'time' | 'time-category' | 'quantize' | 'quantile';\n  /** Y axis title. */\n  y_title?: S;\n  /** Mark color field or value. */\n  color?: S;\n  /** Mark color range for multi-series plots. A string containing space-separated colors, e.g. `'#fee8c8 #fdbb84 #e34a33'` */\n  color_range?: S;\n  /** The unique values in the data (labels or categories or classes) to map colors to, e.g. `['high', 'medium', 'low']`. If this is not provided, the unique values are automatically inferred from the `color` attribute. */\n  color_domain?: S[];\n  /** Mark shape field or value for `point` mark types. Possible values are 'circle', 'square', 'bowtie', 'diamond', 'hexagon', 'triangle', 'triangle-down', 'cross', 'tick', 'plus', 'hyphen', 'line'. */\n  shape?: S;\n  /** Mark shape range for multi-series plots using `point` mark types. A string containing space-separated shapes, e.g. `'circle square diamond'` */\n  shape_range?: S;\n  /** Mark size field or value. */\n  size?: V;\n  /** Mark size range. A string containing space-separated integers, e.g. `'4 30'` */\n  size_range?: S;\n  /** Field to stack marks by, or 'auto' to infer. */\n  stack?: S;\n  /** Field to dodge marks by, or 'auto' to infer. */\n  dodge?: S;\n  /** Curve type for `line` and `area` mark types. */\n  curve?: 'none' | 'smooth' | 'step-before' | 'step' | 'step-after';\n  /** Mark fill color. */\n  fill_color?: S;\n  /** Mark fill opacity. */\n  fill_opacity?: F;\n  /** Mark stroke color. */\n  stroke_color?: S;\n  /** Mark stroke opacity. */\n  stroke_opacity?: F;\n  /** Mark stroke size. */\n  stroke_size?: F;\n  /** Mark stroke dash style. A string containing space-separated integers that specify distances to alternately draw a line and a gap (in coordinate space units). If the number of elements in the array is odd, the elements of the array get copied and concatenated. For example, [5, 15, 25] will become [5, 15, 25, 5, 15, 25]. */\n  stroke_dash?: S;\n  /** Label field or value. */\n  label?: S;\n  /** Distance between label and mark. */\n  label_offset?: F;\n  /** Horizontal distance between label and mark. */\n  label_offset_x?: F;\n  /** Vertical distance between label and mark. */\n  label_offset_y?: F;\n  /** Label rotation angle, in degrees, or 'none' to disable automatic rotation. The default behavior is 'auto' for automatic rotation. */\n  label_rotation?: S;\n  /** Label position relative to the mark. */\n  label_position?: 'top' | 'bottom' | 'middle' | 'left' | 'right';\n  /** Strategy to use if labels overlap. */\n  label_overlap?: 'hide' | 'overlap' | 'constrain';\n  /** Label fill color. */\n  label_fill_color?: S;\n  /** Label fill opacity. */\n  label_fill_opacity?: F;\n  /** Label stroke color. */\n  label_stroke_color?: S;\n  /** Label stroke opacity. */\n  label_stroke_opacity?: F;\n  /** Label stroke size (line width or pen thickness). */\n  label_stroke_size?: F;\n  /** Label font size. */\n  label_font_size?: F;\n  /** Label font weight. */\n  label_font_weight?: S;\n  /** Label line height. */\n  label_line_height?: F;\n  /** Label text alignment. */\n  label_align?: 'left' | 'right' | 'center' | 'start' | 'end';\n  /** Reference line stroke color. */\n  ref_stroke_color?: S;\n  /** Reference line stroke opacity. */\n  ref_stroke_opacity?: F;\n  /** Reference line stroke size (line width or pen thickness). */\n  ref_stroke_size?: F;\n  /** Reference line stroke dash style. A string containing space-separated integers that specify distances to alternately draw a line and a gap (in coordinate space units). If the number of elements in the array is odd, the elements of the array get copied and concatenated. For example, [5, 15, 25] will become [5, 15, 25, 5, 15, 25]. */\n  ref_stroke_dash?: S;\n}\n\n/** Extended mark attributes. Not exposed to API. */\ninterface MarkExt extends Mark {\n  /** Field. */\n  x_field?: S;\n  /** Format string. */\n  x_format?: Fmt;\n  /** Field. */\n  x0_field?: S;\n  /** Format string. */\n  x0_format?: Fmt;\n  /** Field. */\n  x1_field?: S;\n  /** Format string. */\n  x1_format?: Fmt;\n  /** Field. */\n  x2_field?: S;\n  /** Format string. */\n  x2_format?: Fmt;\n  /** Field. */\n  y_field?: S;\n  /** Format string. */\n  y_format?: Fmt;\n  /** Field. */\n  y0_field?: S;\n  /** Format string. */\n  y0_format?: Fmt;\n  /** Field. */\n  y1_field?: S;\n  /** Format string. */\n  y1_format?: Fmt;\n  /** Field. */\n  y2_field?: S;\n  /** Format string. */\n  y2_format?: Fmt;\n  /** Field. */\n  color_field?: S;\n  /** Format string. */\n  color_format?: Fmt;\n  /** Field. */\n  shape_field?: S;\n  /** Format string. */\n  shape_format?: Fmt;\n  /** Format string. */\n  size_format?: Fmt;\n  /** Field. */\n  size_field?: S;\n  /** Field. */\n  dodge_field?: S;\n  /** Field. */\n  label_field?: S;\n  /** Format string. */\n  label_format?: Fmt;\n}\n\n/** Create a plot. A plot is composed of one or more graphical mark layers. */\nexport interface Plot {\n  /** The graphical mark layers contained in this plot. */\n  marks: Mark[];\n}\n\nregisterInteraction('drag-move', {\n  start: [{ trigger: 'plot:mousedown', action: 'scale-translate:start' }],\n  processing: [{ trigger: 'plot:mousemove', action: 'scale-translate:translate', throttle: { wait: 100, leading: true, trailing: false } }],\n  end: [{ trigger: 'plot:mouseup', action: 'scale-translate:end' }],\n})\n\n// TODO not in use\nexport const\n  spaceTypeOf = (ds: any[], marks: Mark[]): SpaceT => spaceTypes[scaleTypeOf(ds, marks, 'x') + scaleTypeOf(ds, marks, 'y')],\n  crosshairFor = (t: SpaceT): 'x' | 'y' | 'xy' => {\n    switch (t) {\n      case SpaceT.CC:\n      case SpaceT.DD:\n      case SpaceT.TT:\n        return 'xy'\n      case SpaceT.DC:\n      case SpaceT.TC:\n      case SpaceT.TD:\n        return 'x'\n      case SpaceT.CD:\n      case SpaceT.CT:\n      case SpaceT.DT:\n        return 'y'\n    }\n  }\n\nconst\n  isF = (x: any): x is number => typeof x === 'number',\n  isB = (x: any): x is boolean => typeof x === 'boolean',\n  isS = (x: any): x is string => typeof x === 'string',\n  split = (s: S) => s.trim().split(/\\s+/g),\n  parseInts = (s: S) => split(s).map(s => parseInt(s, 10)),\n  convertToDates = (ds: any[], f: S) => {\n    for (const d of ds) {\n      if (d) {\n        const s = d[f]\n        if (s && isS(s)) d[f] = new Date(s) // must be ISO string\n      }\n    }\n  },\n  convertToPairs = (ds: any[], f0: S, f1: S, f: S) => {\n    for (const d of ds) if (d) d[f] = [d[f0], d[f1]]\n  },\n  xyVariants = ' 0 1 2'.split(' '),\n  xyExtra = split('min max nice scale title'),\n  makeXYProps = (p: S) => xyVariants.map(s => p + s),\n  makeXYExtraProps = (p: S) => xyExtra.map(s => `${p}_${s}`),\n  makeFormattables = (xs: S[]) => xs.map(f => ([f, f + '_field', f + '_format'])),\n  xProps = makeFormattables(makeXYProps('x')),\n  yProps = makeFormattables(makeXYProps('y')),\n  xExtraProps = makeXYExtraProps('x'),\n  yExtraProps = makeXYExtraProps('y'),\n  otherProps = makeFormattables(split('color shape size dodge label')),\n  formattables = [...xProps, ...yProps, ...otherProps],\n  scaleTypeOf = (ds: any[], marks: Mark[], attr: S): 'c' | 'd' | 't' => {\n    const f = attr + '_field', s = attr + '_scale'\n    for (const mark of marks) {\n      const m = mark as any, field = m[f], scale = m[s]\n      if (scale === 'time') return 't'\n      if (isS(field)) {\n        for (const d of ds) {\n          const v = d[field]\n          if (isF(v)) return 'c'\n          if (isS(v)) return 'd'\n        }\n      }\n    }\n    return 'c'\n  },\n  spaceTypes: Dict<SpaceT> = {\n    cc: SpaceT.CC, dd: SpaceT.DD, tt: SpaceT.TT,\n    dc: SpaceT.DC, cd: SpaceT.CD,\n    tc: SpaceT.TC, ct: SpaceT.CT,\n    td: SpaceT.TD, dt: SpaceT.DT,\n  },\n  dummyDatum: any = {},\n  makeFormatFunc = (field: S, render: HandlebarsTemplateDelegate<any>) => (datum: any, value?: any) => {\n    const x = datum ? datum[field] : value\n    if (x != null) {\n      dummyDatum[field] = x\n      return render(dummyDatum)\n    }\n    return ''\n  },\n  transposeMark = (mark: Mark) => { // WARNING: Can modify marks in-place!\n    const m: any = mark\n    for (let k = 0; k < xProps.length; k++) {\n      const x = xProps[k], y = yProps[k]\n      for (let i = 0; i < x.length; i++) {\n        const tmp = m[x[i]]\n        m[x[i]] = m[y[i]]\n        m[y[i]] = tmp\n      }\n    }\n    for (let i = 0; i < xExtraProps.length; i++) {\n      const x = xExtraProps[i], y = yExtraProps[i]\n      const tmp = m[x]\n      m[x] = m[y]\n      m[y] = tmp\n    }\n  },\n  refactorMark = (mark: Mark): MarkExt => {\n    // if any fields are passed in as format expressions, separate them out into _field and _format\n    const m = mark as any\n    for (const [plainAttr, fieldAttr, formatAttr] of formattables) {\n      const expr = m[plainAttr]\n      if (isS(expr)) {\n        const fmts = parseFormat(expr)\n        if (fmts) {\n          const [field, fmt] = fmts\n          m[plainAttr] = undefined\n          m[fieldAttr] = field\n          if (fmt) m[formatAttr] = makeFormatFunc(field, fmt)\n        }\n      }\n    }\n    return mark\n  },\n  refactorData = (ds: any[], marks: MarkExt[]): any[] => {\n    for (const m of marks) {\n      if (m.x_scale === 'time') {\n        for (const { x_field, x0_field } of marks) {\n          if (isS(x_field)) convertToDates(ds, x_field)\n          if (isS(x0_field)) convertToDates(ds, x0_field)\n        }\n        if (isS(m.x)) m.x = new Date(m.x)\n        if (isS(m.x0)) m.x0 = new Date(m.x0)\n        break\n      }\n    }\n    for (const m of marks) {\n      if (m.y_scale === 'time') {\n        for (const { y_field, y0_field } of marks) {\n          if (isS(y_field)) convertToDates(ds, y_field)\n          if (isS(y0_field)) convertToDates(ds, y0_field)\n        }\n        if (isS(m.y)) m.y = new Date(m.y)\n        if (isS(m.y0)) m.y0 = new Date(m.y0)\n        break\n      }\n    }\n    for (const { x_field, x0_field } of marks) {\n      if (isS(x_field) && isS(x0_field)) {\n        convertToPairs(ds, x0_field, x_field, x_field)\n      }\n    }\n    for (const { y_field, y0_field } of marks) {\n      if (isS(y_field) && isS(y0_field)) {\n        convertToPairs(ds, y0_field, y_field, y_field)\n      }\n    }\n    for (const mark of marks) {\n      const { type, x1_field, x2_field, y_field } = mark\n      if (type === 'interval' && isS(x1_field) && isS(x2_field) && isS(y_field)) { // histogram on x\n        mark.x_field = x1_field + ' - ' + x2_field\n        convertToPairs(ds, x1_field, x2_field, mark.x_field)\n      }\n    }\n    for (const mark of marks) {\n      const { type, y1_field, y2_field, x_field } = mark\n      if (type === 'interval' && isS(y1_field) && isS(y2_field) && isS(x_field)) { // histogram on y\n        mark.y_field = y1_field + ' - ' + y2_field\n        convertToPairs(ds, y1_field, y2_field, mark.y_field)\n      }\n    }\n    return ds\n  },\n  makeNote = ({\n    x, x0, y, y0, label,\n    fill_color, fill_opacity, stroke_color, stroke_opacity, stroke_size, stroke_dash,\n    ref_stroke_color, ref_stroke_opacity, ref_stroke_dash, ref_stroke_size,\n    label_fill_color, label_fill_opacity, label_stroke_color, label_stroke_opacity, label_stroke_size,\n    label_font_size, label_font_weight, label_line_height, label_align,\n  }: Mark): AnnotationOption[] => {\n\n    // XXX pass 'start'/'end' if axis is categorical\n\n    const\n      labelStyle = makeTextStyle(\n        label_fill_color, label_fill_opacity, label_stroke_color, label_stroke_opacity, label_stroke_size,\n        label_font_size, label_font_weight, label_line_height, label_align,\n      ),\n      shapeStyle = makeShapeStyle(fill_color, fill_opacity, stroke_color, stroke_opacity, stroke_size, stroke_dash),\n      lineStyle = makeShapeStyle(undefined, undefined, ref_stroke_color, ref_stroke_opacity, ref_stroke_size, ref_stroke_dash)\n\n    if (x != null && y != null) {\n      if (x0 != null && y0 != null) {\n        const region: DataRegionOption = {\n          type: 'region',\n          start: [x0, y0] as AnnotationPosition,\n          end: [x, y] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle } : undefined,\n          style: shapeStyle,\n        }\n        return [region]\n      } else {\n        const marker: DataMarkerOption = {\n          type: 'dataMarker',\n          position: [x, y] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle } : null,\n          point: { style: shapeStyle },\n          line: { style: lineStyle }\n        }\n        return [marker]\n      }\n    } else if (x != null) {\n      if (x0 != null) {\n        const region: DataRegionOption = {\n          type: 'region',\n          start: [x0, 'min'] as AnnotationPosition,\n          end: [x, 'max'] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle } : null,\n          style: shapeStyle,\n        }\n        return [region]\n      } else {\n        const line: LineOption = {\n          type: 'line',\n          start: [x, 'min'] as AnnotationPosition,\n          end: [x, 'max'] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle, position: 'start' } : undefined,\n          style: lineStyle,\n        }\n        return [line]\n      }\n    } else { // y != null\n      if (y0 != null) {\n        const region: DataRegionOption = {\n          type: 'region',\n          start: ['min', y0] as AnnotationPosition,\n          end: ['max', y] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle } : null,\n          style: shapeStyle,\n        }\n        return [region]\n\n      } else {\n        const line: LineOption = {\n          type: 'line',\n          start: ['min', y] as AnnotationPosition,\n          end: ['max', y] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle, position: 'start' } : undefined,\n          style: lineStyle,\n        }\n        return [line]\n      }\n    }\n  },\n  makeGeom = ({\n    type, x_field, y_field,\n    color_field, color_range, color_domain, color,\n    shape_field, shape_range, shape,\n    size_field, size_range, size,\n    stack,\n    dodge, dodge_field,\n    curve,\n    fill_color, fill_opacity, stroke_color, stroke_opacity, stroke_dash, stroke_size,\n    label_field, label_format, label_offset, label_offset_x, label_offset_y, label_rotation, label_position, label_overlap,\n    label_fill_color, label_fill_opacity, label_stroke_color, label_stroke_opacity, label_stroke_size,\n    label_font_size, label_font_weight, label_line_height, label_align,\n  }: MarkExt): GeometryOption => {\n    const o: GeometryOption = {}\n    if (isS(type)) o.type = type\n\n    const adjust: AdjustOption[] = []\n    // TODO set marginRatio=1 polar coords\n    if (isS(dodge_field)) {\n      adjust.push({ type: 'dodge', marginRatio: 0, dodgeBy: dodge_field })\n    } else if (dodge === 'auto') {\n      adjust.push({ type: 'dodge', marginRatio: 0 })\n    }\n    if (stack === 'auto') adjust.push({ type: 'stack' })\n    if (adjust.length) o.adjust = adjust\n    if (isS(x_field) && isS(y_field)) o.position = { fields: [x_field, y_field] }\n    if (isS(color_field)) {\n      const colors = isS(color_range) ? split(color_range) : cat10\n      o.color = { fields: [color_field], values: colors }\n      if (color_domain && color_domain.length == colors.length) {\n        const domain_colors = color_domain.reduce((acc, value, i) => {\n          acc[value] = colors[i]\n          return acc\n        }, {} as Dict<S>)\n        o.color.callback = (x: S) => domain_colors[x]\n      }\n    } else {\n      o.color = isS(color) ? color : theme.colors.gray\n    }\n    if (isS(shape_field)) {\n      if (isS(shape_range)) {\n        o.shape = { fields: [shape_field], values: split(shape_range) }\n      } else {\n        o.shape = { fields: [shape_field] }\n      }\n    } else if (isS(shape)) {\n      o.shape = shape\n    }\n    if (isS(size_field)) {\n      if (isS(size_range)) {\n        o.size = { fields: [size_field], values: parseInts(size_range) }\n      } else {\n        o.size = { fields: [size_field] }\n      }\n    } else if (isF(size)) {\n      o.size = size\n    }\n    if (isS(label_field)) {\n      const styles = makeTextStyle(\n        label_fill_color, label_fill_opacity, label_stroke_color, label_stroke_opacity, label_stroke_size,\n        label_font_size, label_font_weight, label_line_height, label_align,\n      )\n      const c: Dict<any> = {}\n      if (styles) c.style = styles\n      switch (label_overlap) {\n        case 'hide': c.layout = { type: 'overlap' }; break\n        case 'overlap': c.layout = { type: 'fixedOverlap' }; break\n        case 'constrain': c.layout = { type: 'limitInShape' }; break\n      }\n      if (isF(label_offset)) c.offset = label_offset\n      if (isF(label_offset_x)) c.offsetX = label_offset_x\n      if (isF(label_offset_y)) c.offsetY = label_offset_y\n      if (isS(label_rotation)) {\n        const i_label_rotation = parseI(label_rotation)\n        if (isNaN(i_label_rotation)) {\n          c.autoRotate = label_rotation === 'none' ? false : true\n        } else {\n          c.rotate = i_label_rotation * Math.PI / 180\n        }\n      }\n      switch (label_position) {\n        case 'top': case 'bottom': case 'middle': case 'left': case 'right': c.position = label_position as any\n      }\n\n      if (label_format) {\n        o.label = {\n          fields: [label_field],\n          callback: (label) => ({ content: label_format(null, label) })\n        }\n      } else {\n        o.label = { fields: [label_field] }\n      }\n\n      if (Object.keys(c).length) o.label.cfg = c\n    }\n    if (isS(curve)) {\n      switch (curve) {\n        case 'smooth': o.shape = 'smooth'; break\n        case 'step-before': o.shape = 'vh'; break\n        case 'step': o.shape = 'hvh'; break\n        case 'step-after': o.shape = 'hv'; break\n      }\n    }\n    const style = makeShapeStyle(fill_color, fill_opacity, stroke_color, stroke_opacity, stroke_size, stroke_dash)\n    if (style) o.style = style\n\n    return o\n  },\n  makeShapeStyle = (fill_color?: S, fill_opacity?: F, stroke_color?: S, stroke_opacity?: F, stroke_size?: F, stroke_dash?: S): Dict<any> | undefined => {\n    const s: Dict<any> = {}\n    if (isS(fill_color)) s.fill = fill_color\n    if (isF(fill_opacity)) s.fillOpacity = fill_opacity\n    if (isS(stroke_color)) s.stroke = stroke_color\n    if (isF(stroke_opacity)) s.strokeOpacity = stroke_opacity\n    if (isF(stroke_size)) s.lineWidth = stroke_size\n    if (isS(stroke_dash)) s.lineDash = parseInts(stroke_dash)\n    return Object.keys(s).length ? s : undefined\n  },\n  makeTextStyle = (fill_color?: S, fill_opacity?: F, stroke_color?: S, stroke_opacity?: F, stroke_size?: F, font_size?: F, font_weight?: S, line_height?: F, align?: S): Dict<any> | undefined => {\n    const s: Dict<any> = {}\n    if (isS(fill_color)) s.fill = fill_color\n    if (isF(fill_opacity)) s.fillOpacity = fill_opacity\n    if (isS(stroke_color)) s.stroke = stroke_color\n    if (isF(stroke_opacity)) s.strokeOpacity = stroke_opacity\n    if (isF(stroke_size)) s.lineWidth = stroke_size\n    if (isF(font_size)) s.fontSize = font_size\n    if (isS(font_weight)) {\n      const u_font_weight = parseU(font_weight)\n      s.fontWeight = isNaN(u_font_weight) ? font_weight : u_font_weight\n    }\n    if (isF(line_height)) s.lineHeight = line_height\n    if (isS(align)) s.textAlign = align\n    return Object.keys(s).length ? s : undefined\n  },\n  makeScales = (marks: MarkExt[]): [Record<S, ScaleOption>, Record<S, AxisOption>] => {\n    const\n      scales: Record<S, ScaleOption> = {},\n      axes: Record<S, AxisOption> = {}\n\n    for (const m of marks) {\n      if (m.x_field) {\n        const [x_scale, x_axis] = makeScale(m.x_scale, m.x_format, m.x_title, m.x_min, m.x_max, m.x_nice)\n        scales[m.x_field] = x_scale\n        if (x_axis) axes[m.x_field] = x_axis\n        break\n      }\n    }\n\n    for (const m of marks) {\n      if (m.y_field) {\n        const [y_scale, y_axis] = makeScale(m.y_scale, m.y_format, m.y_title, m.y_min, m.y_max, m.y_nice)\n        scales[m.y_field] = y_scale\n        if (y_axis) axes[m.y_field] = y_axis\n        break\n      }\n    }\n\n    return [scales, axes]\n  },\n  fixScaleType = (t: S): S => {\n    switch (t) {\n      case 'time-category': return 'timeCat'\n      case 'power': return 'pow'\n    }\n    return t\n  },\n  makeScale = (typ: S | undefined, format: Fmt | undefined, title: S | undefined, min: S | F | undefined, max: S | F | undefined, nice: B | undefined): [ScaleOption, AxisOption | null] => {\n    const\n      scale: ScaleOption = {},\n      axis: AxisOption = { label: { autoHide: false } } // Bug in G2? `autoHide` should be set to false by default (it is not).\n    if (isS(typ)) scale.type = fixScaleType(typ) as any\n    if (format) scale.formatter = (v: any) => format(undefined, v)\n    if (isS(title)) {\n      scale.alias = title\n      // HACK ALERT!\n      // The scale alias is not rendered by G2 unless the axis title is non-empty.\n      axis.title = {}\n    }\n    if (isF(min)) scale.min = min\n    if (isF(max)) scale.max = max\n    scale.nice = isB(nice) ? nice : true\n    return [scale, axis]\n  },\n  getCoordType = (marks: Mark[]): S | undefined => {\n    for (const { coord } of marks) if (isS(coord)) return coord\n    return undefined\n  },\n  makeCoord = (space: SpaceT, marks: Mark[]): CoordinateOption | undefined => {\n\n    // HACK ALERT!\n    // Flip all x* and y* properties if the x-variable is continuous.\n    // This is because the underlying lib expects x-variables to be always discrete.\n    // So if the coord space is continuous-discrete, flip x/y and set a transpose transform on the coords.\n\n    const\n      type = getCoordType(marks) as any,\n      transpose = space === SpaceT.CD,\n      actions: CoordinateActions[] | undefined = transpose ? [['transpose']] : undefined\n\n    if (transpose) for (const mark of marks) transposeMark(mark)\n\n    return (\n      type\n        ? actions ? { type, actions } : { type }\n        : actions ? { actions } : undefined\n    )\n  },\n  makeMarks = (marks: Mark[]): [GeometryOption[], AnnotationOption[]] => {\n    const\n      geometries: GeometryOption[] = [],\n      annotations: AnnotationOption[] = []\n\n    for (const m of marks) {\n      const { x, y } = m\n      if (x != null || y != null) {\n        annotations.push(...makeNote(m))\n      } else {\n        geometries.push(makeGeom(m))\n      }\n    }\n\n    return [geometries, annotations]\n  },\n  makeChart = (el: HTMLElement, space: SpaceT, marks: Mark[]): ChartCfg => {\n    // WARNING: makeCoord() must be called before other functions.\n    const\n      coordinate = makeCoord(space, marks), // WARNING: this call may transpose x/y in-place.\n      [scales, axes] = makeScales(marks),\n      [geometries, annotations] = makeMarks(marks)\n\n    return {\n      container: el,\n      autoFit: true,\n      options: {\n        animate: false,\n        coordinate,\n        scales,\n        axes,\n        geometries,\n        annotations,\n        interactions: [\n          { type: 'view-zoom' },\n          { type: 'drag-move' }, // custom\n        ],\n        tooltip: {\n          showCrosshairs: true,\n          crosshairs: { type: 'xy' }\n          // XXX pass container element\n        }\n      }\n    }\n  }\n\nconst\n  css = stylesheet({\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    plot: {\n      position: 'absolute',\n      left: 0, top: 30, right: 0, bottom: 0,\n    },\n  })\n\n/** Create a visualization for display inside a form. */\nexport interface Visualization {\n  /** The plot to be rendered in this visualization. */\n  plot: Plot\n  /** Data for this visualization. */\n  data: Rec\n  /** The width of the visualization. Defaults to 100%. */\n  width?: S\n  /** The hight of the visualization. Defaults to 300px. */\n  height?: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** The events to capture on this visualization. */\n  events?: S[]\n}\n\nexport const\n  XVisualization = bond(({ model }: { model: Visualization }) => {\n    let\n      currentChart: Chart | null = null,\n      currentPlot: Plot | null = null\n    const\n      container = React.createRef<HTMLDivElement>(),\n      init = () => {\n        const el = container.current\n        if (!el) return\n        const\n          raw_data = unpack<any[]>(model.data),\n          raw_plot = unpack<Plot>(model.plot),\n          marks = raw_plot.marks.map(refactorMark),\n          plot: Plot = { marks: marks },\n          space = spaceTypeOf(raw_data, marks),\n          data = refactorData(raw_data, plot.marks),\n          chart = plot.marks ? new Chart(makeChart(el, space, plot.marks)) : null\n        currentPlot = plot\n        if (chart) {\n          currentChart = chart\n          chart.data(data)\n          if (model.events) {\n            for (const event of model.events) {\n              switch (event) {\n                case 'select_marks': {\n                  chart.interaction('element-single-selected')\n                  chart.on('element:statechange', (ev: any) => {\n                    const e = ev.gEvent.originalEvent\n                    if (e.stateStatus) {\n                      if (model.name) {\n                        qd.events[model.name] = { select_marks: [e.element?.data] }\n                        qd.sync()\n                      }\n                    }\n                  })\n                }\n              }\n            }\n          }\n          chart.render()\n        }\n      },\n      update = () => {\n        const el = container.current\n        if (!el || !currentChart || !currentPlot) return\n        const\n          raw_data = unpack(model.data) as any[],\n          data = refactorData(raw_data, currentPlot.marks)\n        currentChart.changeData(data)\n      },\n      render = () => {\n        const\n          { width, height, visible, name } = model,\n          style: React.CSSProperties = (width === 'auto' && height === 'auto')\n            ? { position: 'absolute', left: 0, top: 0, right: 0, bottom: 0 }\n            : { width: width || 'auto', height: height || '300px' }\n        return (\n          <div data-test={name} style={{ ...style, ...displayMixin(visible) }} ref={container} />\n        )\n      }\n    return { init, update, render }\n  })\n\n/** Create a card displaying a plot. */\ninterface State {\n  /** The title for this card. */\n  title: S\n  /** Data for this card. */\n  data: Rec\n  /** The plot to be displayed in this card. */\n  plot: Plot\n  /** The events to capture on this card. */\n  events?: S[]\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const { title, plot, data, events } = state\n        return (\n          <div>\n            <div className={css.title}>{title || 'Untitled'}</div>\n            <div className={css.plot}>\n              <XVisualization model={{ name, plot, data, width: 'auto', height: 'auto', events }} />\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('plot', View)\n\n","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a hyperlink.\n *\n * Hyperlinks can be internal or external.\n * Internal hyperlinks have paths that begin with a `/` and point to URLs within the Q UI.\n * All other kinds of paths are treated as external hyperlinks.\n */\nexport interface Link {\n  /** The text to be displayed. If blank, the `path` is used as the label. */\n  label?: S\n  /** The path or URL to link to. */\n  path?: S\n  /** True if the link should be disabled. */\n  disabled?: B\n  /** True if the link should be used for file download. */\n  download?: B\n  /** True if the link should be rendered as a button. */\n  button?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Where to display the link. Setting this to an empty string or `'_blank'` opens the link in a new tab or window. */\n  target?: S\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nexport const\n  XLink = bond(({ model: m }: { model: Link }) => {\n    const\n      label = m.label || m.path,\n      target = m.target === '' ? '_blank' : m.target,\n      onClick = () => target ? window.open(m.path, target) : window.open(m.path),\n      render = () => (\n        <div style={displayMixin(m.visible)}>\n          {\n            m.button\n              ? <Fluent.DefaultButton data-test={m.name} text={label} disabled={m.disabled} onClick={onClick} />\n              : <Fluent.Link\n                data-test={m.name}\n                href={m.path}\n                download={m.download}\n                disabled={m.disabled}\n                target={target}>\n                {label}\n              </Fluent.Link>\n          }\n        </div>\n      )\n    return { render }\n  })","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { S, B } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a message bar.\n *\n * A message bar is an area at the top of a primary view that displays relevant status information.\n * You can use a message bar to tell the user about a situation that does not require their immediate attention and\n * therefore does not need to block other activities.\n */\nexport interface MessageBar {\n  /** The icon and color of the message bar. */\n  type?: 'info' | 'error' | 'warning' | 'success' | 'danger' | 'blocked'\n  /** The text displayed on the message bar. */\n  text?: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\nconst\n  toMessageBarType = (t?: S): Fluent.MessageBarType => {\n    switch (t) {\n      case 'error': return Fluent.MessageBarType.error\n      case 'warning': return Fluent.MessageBarType.warning\n      case 'success': return Fluent.MessageBarType.success\n      case 'danger': return Fluent.MessageBarType.severeWarning\n      case 'blocked': return Fluent.MessageBarType.blocked\n      default: return Fluent.MessageBarType.info\n    }\n  }\n\nexport const\n  XMessageBar = ({ model: m }: { model: MessageBar }) => (\n    m.text?.length\n      ? (\n        <Fluent.MessageBar\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          messageBarType={toMessageBarType(m.type)} >{m.text}</Fluent.MessageBar>\n      )\n      : <div />\n  )","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { bond, S, U, B, qd, box } from './qd'\nimport { Choice } from './choice_group'\nimport { displayMixin } from './theme'\n\n/**\n * Create a picker.\n * Pickers are used to select one or more choices, such as tags or files, from a list.\n * Use a picker to allow the user to quickly search for or manage a few tags or files.\n*/\nexport interface Picker {\n  /** An identifying name for this component. */\n  name: S\n  /** The choices to be presented. */\n  choices: Choice[]\n  /** Text to be displayed above the component. */\n  label?: S\n  /** The names of the selected choices. */\n  values?: S[]\n  /** Maximum number of selectable choices. Defaults to no limit. */\n  max_choices?: U\n  /** Controls whether the picker should be disabled or not. */\n  disabled?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** True if the form should be submitted when the picker value changes. */\n  trigger?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst pickerSuggestionsProps: Fluent.IBasePickerSuggestionsProps = {\n  suggestionsHeaderText: 'Suggestions',\n  noResultsFoundText: 'No results found',\n}\n\nexport const XPicker = bond(({ model: m }: { model: Picker }) => {\n  const\n    tags: Fluent.ITag[] = m.choices.map(({ name, label }) => ({ key: name, name: label || name })),\n    selectedTagsB = box<Fluent.ITag[]>(\n      m.choices\n        .filter(({ name }) => m.values?.includes(name))\n        .map(({ name, label }) => ({ key: name, name: label || name }))\n    ),\n    filterSuggestedTags = (filterText: string, selectedTags?: Fluent.ITag[]) => {\n      if (!filterText) return []\n      const isAlreadySelected = (t: Fluent.ITag) => selectedTags && selectedTags.includes(t)\n      const isStringMatch = (name: string) => name.toLowerCase().includes(filterText.toLowerCase())\n      return tags.filter(t => isStringMatch(t.name) && !isAlreadySelected(t))\n    },\n    onChange = (items?: Fluent.ITag[]) => {\n      selectedTagsB(items || [])\n      qd.args[m.name] = items ? items.map(({ key }) => key) : null\n      if (m.trigger) qd.sync()\n    },\n    init = () => qd.args[m.name] = m.values || null,\n    render = () => (\n      <div style={displayMixin(m.visible)}>\n        {m.label && <Fluent.Text>{m.label}</Fluent.Text>}\n        <Fluent.TagPicker\n          inputProps={{ 'data-test': m.name } as any} // HACK: data-test does not work on root as of this version\n          removeButtonAriaLabel=\"Remove\"\n          onResolveSuggestions={filterSuggestedTags}\n          onChange={onChange}\n          pickerSuggestionsProps={pickerSuggestionsProps}\n          itemLimit={m.max_choices}\n          selectedItems={selectedTagsB()}\n          disabled={m.disabled}\n        />\n      </div>\n    )\n\n  return { init, render, selectedTagsB }\n})","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { F, S, B } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a progress bar.\n *\n * Progress bars are used to show the completion status of an operation lasting more than 2 seconds.\n * If the state of progress cannot be determined, do not set a value.\n * Progress bars feature a bar showing total units to completion, and total units finished.\n * The label appears above the bar, and the caption appears below.\n * The label should tell someone exactly what the operation is doing.\n *\n * Examples of formatting include:\n * [Object] is being [operation name], or\n * [Object] is being [operation name] to [destination name] or\n * [Object] is being [operation name] from [source name] to [destination name]\n *\n * Status text is generally in units elapsed and total units.\n * Real-world examples include copying files to a storage location, saving edits to a file, and more.\n * Use units that are informative and relevant to give the best idea to users of how long the operation will take to complete.\n * Avoid time units as they are rarely accurate enough to be trustworthy.\n * Also, combine steps of a complex operation into one total bar to avoid “rewinding” the bar.\n * Instead change the label to reflect the change if necessary. Bars moving backwards reduce confidence in the service.\n*/\nexport interface Progress {\n  /** The text displayed above the bar. */\n  label: S\n  /** The text displayed below the bar. */\n  caption?: S\n  /** The progress, between 0.0 and 1.0, or -1 (default) if indeterminate. */\n  value?: F\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nexport const\n  XProgress = ({ model }: { model: Progress }) => {\n    const\n      { label, caption = 'Please wait...', value, visible, name } = model\n    return (\n      <div data-test={name} style={displayMixin(visible)}>\n        <Fluent.ProgressIndicator\n          label={label}\n          description={caption}\n          percentComplete={value}\n        />\n      </div>\n    )\n  }","import React from 'react'\nimport * as Fluent from '@fluentui/react'\nimport { bond, box, S, qd, B, U, F } from './qd'\nimport InputRange, { Range } from 'react-input-range'\nimport 'react-input-range/lib/css/index.css'\nimport { stylesheet } from 'typestyle'\nimport { palette, padding, displayMixin } from './theme'\n\nconst\n  css = stylesheet({\n    wrapper: {\n      marginTop: '-10px !important'\n    },\n    container: {\n      padding: padding(0, 8),\n      $nest: {\n        '.input-range': {\n          marginTop: 15,\n          marginBottom: 35,\n          $nest: {\n            '&__slider': {\n              borderWidth: 2,\n              borderRadius: 10,\n              borderColor: palette.neutralPrimary,\n              background: palette.white,\n              width: 16,\n              height: 16,\n              boxSizing: 'border-box',\n              cursor: 'initial',\n              $nest: {\n                '&:active': {\n                  transform: 'none'\n                }\n              }\n            },\n            '&__label': {\n              fontFamily: 'inherit',\n              fontSize: 14,\n              fontWeight: 600\n            },\n            '&__label-container': {\n              color: palette.neutralPrimary\n            },\n            '&__track': {\n              height: 4,\n              borderRadius: 4,\n              background: palette.neutralTertiaryAlt,\n              cursor: 'initial',\n              $nest: {\n                '&--active': {\n                  background: palette.neutralSecondary,\n                },\n              }\n            }\n          }\n        },\n      }\n    },\n    disabled: {\n      opacity: 0.5\n    }\n  })\n\n/**\n * Create a range slider.\n *\n * A range slider is an element used to select a value range. It provides a visual indication of adjustable content, as well as the\n * current setting in the total range of content. It is displayed as a horizontal track with options on either side.\n * Knobs or levers are dragged to one end or the other to make the choice, indicating the current max and min value.\n * \n*/\nexport interface RangeSlider {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** The minimum value of the slider. Defaults to 0. */\n  min?: F\n  /** The maximum value of the slider. Defaults to 100. */\n  max?: F\n  /** The difference between two adjacent values of the slider. */\n  step?: F\n  /** The lower bound of the selected range. */\n  min_value?: F\n  /** The upper bound of the selected range. */\n  max_value?: F\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the slider value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const XRangeSlider = bond(({ model: m }: { model: RangeSlider }) => {\n  const\n    { min = 0, max = 100, step = 1 } = m,\n    value = {\n      min: (m.min_value && m.min_value > min && m.min_value <= max) ? m.min_value : min,\n      max: (m.max_value && m.max_value > min && m.max_value <= max) ? m.max_value : max\n    }\n\n  qd.args[m.name] = Object.values(value as Range)\n\n  const\n    valueB = box<Range>(value),\n    onChange = (val: Range | U) => {\n      valueB(val as Range)\n      qd.args[m.name] = Object.values(val as Range)\n      if (m.trigger) qd.sync()\n    },\n    render = () => (\n      <div data-test={m.name} className={css.wrapper} style={displayMixin(m.visible)}>\n        {m.label && <Fluent.Label disabled={m.disabled}>{m.label}</Fluent.Label>}\n        <div className={`${css.container} ${m.disabled ? css.disabled : ''}`}>\n          <InputRange maxValue={max} minValue={min} step={step} disabled={m.disabled} allowSameValues value={valueB()} onChange={onChange} />\n        </div>\n      </div>\n    )\n  return { render, valueB }\n})","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { S, B } from './qd'\nimport { displayMixin } from './theme'\n\nconst\n  css = stylesheet({\n    separator: {\n      boxSizing: 'border-box',\n    },\n  })\n\n/**\n * Create a separator.\n *\n * A separator visually separates content into groups.\n */\nexport interface Separator {\n  /** The text displayed on the separator. */\n  label?: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\nexport const\n  XSeparator = ({ model: m }: { model: Separator }) => (\n    <div data-test={m.name} className={css.separator} style={displayMixin(m.visible)}>\n      <Fluent.Separator>{m.label}</Fluent.Separator>\n    </div>\n  )","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, F, S, qd } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a slider.\n *\n * A slider is an element used to set a value. It provides a visual indication of adjustable content, as well as the\n * current setting in the total range of content. It is displayed as a horizontal track with options on either side.\n * A knob or lever is dragged to one end or the other to make the choice, indicating the current value.\n * Marks on the slider bar can show values and users can choose where they want to drag the knob or lever to\n * set the value.\n *\n * A slider is a good choice when you know that users think of the value as a relative quantity, not a numeric value.\n * For example, users think about setting their audio volume to low or medium — not about setting the\n * value to two or five.\n *\n * The default value of the slider will be zero or be constrained to the min and max values. The min will be returned\n * if the value is set under the min and the max will be returned if set higher than the max value.\n*/\nexport interface Slider {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** The minimum value of the slider. */\n  min?: F\n  /** The maximum value of the slider. */\n  max?: F\n  /** The difference between two adjacent values of the slider. */\n  step?: F\n  /** The current value of the slider. */\n  value?: F\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the slider value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XSlider = bond(({ model: m }: { model: Slider }) => {\n    const\n      { min = 0, max = 100, step = 1, value = 0 } = m,\n      defaultValue = (value < min) ? min : ((value > max) ? max : value)\n    qd.args[m.name] = defaultValue\n    const\n      onChange = (v: number) => qd.args[m.name] = v,\n      onChanged = (_event: MouseEvent | KeyboardEvent | TouchEvent, _value: number) => { if (m.trigger) qd.sync() },\n      render = () => (\n        <Fluent.Slider\n          data-test={m.name}\n          styles={{ root: displayMixin(m.visible) as Fluent.IStyle }}\n          buttonProps={{ 'data-test': m.name } as any} // HACK: data-test does not work on root as of this version\n          label={m.label}\n          min={min}\n          max={max}\n          step={step}\n          defaultValue={defaultValue}\n          showValue={true}\n          originFromZero={min < 0 && max >= 0}\n          onChange={onChange}\n          onChanged={onChanged}\n          disabled={m.disabled}\n        />\n      )\n\n    return { render }\n  })","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, F, S, qd } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a spinbox.\n *\n * A spinbox allows the user to incrementally adjust a value in small steps.\n * It is mainly used for numeric values, but other values are supported too.\n */\nexport interface Spinbox {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** The minimum value of the spinbox. */\n  min?: F\n  /** The maximum value of the spinbox. */\n  max?: F\n  /** The difference between two adjacent values of the spinbox. */\n  step?: F\n  /** The current value of the spinbox. */\n  value?: F\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XSpinbox = bond(({ model: m }: { model: Spinbox }) => {\n    const\n      { min = 0, max = 100, step = 1, value = 0 } = m,\n      defaultValue = (value < min) ? min : ((value > max) ? max : value)\n\n    qd.args[m.name] = defaultValue\n\n    const\n      parseValue = (v: string) => {\n        const x = parseFloat(v)\n        return (!isNaN(x) && isFinite(x)) ? x : value\n      },\n      onBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n        qd.args[m.name] = parseValue(e.target.value)\n      },\n      onIncrement = (v: string) => {\n        const\n          value = parseValue(v),\n          newValue = (value + step > max) ? max : value + step\n        qd.args[m.name] = newValue\n        return String(newValue)\n      },\n      onDecrement = (v: string) => {\n        const\n          value = parseValue(v),\n          newValue = (value - step < min) ? min : value - step\n        qd.args[m.name] = newValue\n        return String(newValue)\n      },\n      render = () => (\n        <Fluent.SpinButton\n          styles={{ root: displayMixin(m.visible) as Fluent.IStyle }}\n          inputProps={{ 'data-test': m.name } as any} // HACK: data-test does not work on root as of this version\n          label={m.label}\n          min={min}\n          max={max}\n          step={step}\n          defaultValue={`${value}`}\n          onBlur={onBlur}\n          onIncrement={onIncrement}\n          onDecrement={onDecrement}\n          disabled={m.disabled}\n        />\n      )\n    return { render }\n  })","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { bond, S, B, U } from './qd'\nimport { stylesheet } from 'typestyle'\nimport { getTheme, rem, displayMixin } from './theme'\n\n/**\n * Create a step for a stepper.\n */\ninterface Step {\n  /** Text displayed below icon. */\n  label: S\n  /** Icon to be displayed. */\n  icon?: S\n  /** Indicates whether this step has already been completed. */\n  done?: B\n}\n\n/**\n  Create a component that displays a sequence of steps in a process.\n  The steps keep users informed about where they are in the process and how much is left to complete.\n*/\nexport interface Stepper {\n  /** An identifying name for this component. */\n  name: S\n  /** The sequence of steps to be displayed. */\n  items: Step[]\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst\n  { colors } = getTheme(),\n  css = stylesheet({\n    stepNumber: {\n      background: colors.text,\n      color: colors.card,\n      alignItems: 'center',\n      borderRadius: '50%',\n      display: 'inline-flex',\n      justifyContent: 'center',\n      fontSize: rem(0.8),\n      height: 24,\n      minWidth: 24,\n      width: 24,\n    },\n    disabled: {\n      opacity: 0.5\n    }\n  }),\n  iconStyles: Fluent.IIconStyles = { root: { fontSize: 24 } }\n\nexport const\n  XStepper = bond(({ model: m }: { model: Stepper }) => {\n    const\n      steps = m.items,\n      disabledStyles = (stepIdx: U) => stepIdx > 0 && !steps[stepIdx - 1].done ? css.disabled : '',\n      createStep = (step: Step, i: U) => (\n        <React.Fragment key={i}>\n          <Fluent.Stack horizontal horizontalAlign='space-between' verticalAlign='center' grow={1}>\n            <Fluent.Stack\n              className={!step.done ? disabledStyles(i) : ''}\n              horizontalAlign='center'\n              styles={{ root: { paddingRight: 10, paddingLeft: 10 } }}\n            >\n              {\n                step.done\n                  ? <Fluent.Icon styles={iconStyles} iconName='CompletedSolid' />\n                  : step.icon\n                    ? <Fluent.Icon styles={iconStyles} iconName={step.icon} />\n                    : <span className={css.stepNumber}>{i + 1}</span>\n              }\n              <Fluent.Text block nowrap styles={{ root: { padding: 10 } }}>{step.label}</Fluent.Text>\n            </Fluent.Stack>\n          </Fluent.Stack>\n          {(steps.length - 1) !== i && <Fluent.Separator styles={{ root: { width: '100%' } }} />}\n        </React.Fragment>\n      ),\n      render = () => (\n        <Fluent.Stack\n          style={displayMixin(m.visible)}\n          data-test={m.name}\n          horizontal\n          horizontalAlign='space-between'\n          verticalAlign='center'\n        >\n          {steps.map(createStep)}\n        </Fluent.Stack>\n      )\n\n    return { render }\n  })","import * as d3 from 'd3'\nimport React from 'react'\nimport { F, S, U } from '../qd'\n\ninterface Props {\n  size: U\n  thickness: U\n  color: S\n  value: F\n}\n\nexport const ProgressArc = ({ size, thickness, color, value }: Props) => {\n  const\n    outerRadius = size / 2,\n    innerRadius = size / 2 - thickness,\n    slot = d3.arc()({\n      outerRadius,\n      innerRadius,\n      startAngle: 0,\n      endAngle: 2 * Math.PI,\n    }) as any,\n    bar = d3.arc()({\n      outerRadius,\n      innerRadius,\n      startAngle: 0,\n      endAngle: 2 * Math.PI * value,\n    }) as any\n  return (\n    <svg width={size} height={size}>\n      <path d={slot} fill={color} fillOpacity={0.15} transform={`translate(${outerRadius},${outerRadius})`} />\n      <path d={bar} fill={color} transform={`translate(${outerRadius},${outerRadius})`} />\n    </svg>\n  )\n}","\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { grid } from './layout'\nimport { ProgressArc } from './parts/progress_arc'\nimport { F, S } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    container: {\n      display: 'flex'\n    },\n    percentContainer: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      flexDirection: 'column',\n      position: 'absolute',\n      left: 12,\n      top: 10,\n      width: grid.unitInnerHeight,\n      height: grid.unitInnerHeight,\n    },\n    percent: {\n      ...theme.font.s12,\n      opacity: 0.5,\n    },\n  })\n\n/**\n * Create a cell type that renders a column's cells as progress bars instead of plain text.\n * If set on a column, the cell value must be between 0.0 and 1.0.\n*/\nexport interface ProgressTableCellType {\n  /** Color of the progress arc. */\n  color?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nexport const XProgressTableCellType = ({ model: m, progress }: { model: ProgressTableCellType, progress: F }) => (\n  <div data-test={m.name} className={css.container}>\n    <ProgressArc size={grid.unitInnerHeight} thickness={2} color={theme.color(m.color || 'red')} value={progress} />\n    <div className={css.percentContainer}>\n      <div className={css.percent}>{`${Math.round(progress * 100)}%`}</div>\n    </div>\n  </div>\n)\n","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { S } from './qd'\n\n/**\n * Create a cell type that renders a column's cells as icons instead of plain text.\n * If set on a column, the cell value is interpreted as the name of the icon to be displayed.\n*/\nexport interface IconTableCellType {\n  /** Icon color. */\n  color?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nexport const XIconTableCellType = ({ model: m, icon }: { model: IconTableCellType, icon: S }) => (\n  <Fluent.Icon data-test={m.name} iconName={icon} styles={{ root: { fontSize: '1.2rem', color: m.color || 'inherit' } }} />\n)\n","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, S, qd, box, Dict, U } from './qd'\nimport { stylesheet } from 'typestyle'\nimport { rem, displayMixin } from './theme'\nimport { ProgressTableCellType, XProgressTableCellType } from \"./progress_table_cell_type\"\nimport { IconTableCellType, XIconTableCellType } from \"./icon_table_cell_type\"\n\n/** Defines cell content to be rendered instead of a simple text. */\ninterface TableCellType {\n  progress?: ProgressTableCellType\n  icon?: IconTableCellType\n}\n\n/** Create a table column. */\ninterface TableColumn {\n  /** An identifying name for this column. */\n  name: S\n  /** The text displayed on the column header. */\n  label: S\n  /** The minimum width of this column, e.g. '50px'. Only `px` units are supported at this time. */\n  min_width?: S\n  /** The maximum width of this column, e.g. '100px'. Only `px` units are supported at this time. */\n  max_width?: S\n  /** Indicates whether the column is sortable. */\n  sortable?: B\n  /** Indicates whether the contents of this column can be searched through. Enables a search box for the table if true. */\n  searchable?: B\n  /** Indicates whether the contents of this column are displayed as filters in a dropdown. */\n  filterable?: B\n  /** Indicates whether each cell in this column should be displayed as a clickable link. */\n  link?: B\n  /** Defines the data type of this column. Defaults to `string`. */\n  data_type?: 'string' | 'number' | 'time'\n  /** Defines how to render each cell in this column. Defaults to plain text. */\n  cell_type?: TableCellType\n}\n\n/** Create a table row. */\ninterface TableRow {\n  /** An identifying name for this row. */\n  name: S\n  /** The cells in this row (displayed left to right). */\n  cells: S[]\n}\n\n\n/**\n * Create an interactive table.\n *\n * This table differs from a markdown table in that it supports clicking or selecting rows. If you simply want to\n * display a non-interactive table of information, use a markdown table.\n *\n * If `multiple` is set to False (default), each row in the table is clickable. When a row is clicked, the form is\n * submitted automatically, and `q.args.table_name` is set to `[row_name]`, where `table_name` is the `name` of\n * the table, and `row_name` is the `name` of the row that was clicked on.\n *\n * If `multiple` is set to True, each row in the table is selectable. A row can be selected by clicking on it.\n * Multiple rows can be selected either by shift+clicking or using marquee selection. When the form is submitted,\n * `q.args.table_name` is set to `[row1_name, row2_name, ...]` where `table_name` is the `name` of the table,\n * and `row1_name`, `row2_name` are the `name` of the rows that were selected. Note that if `multiple` is\n * set to True, the form is not submitted automatically, and one or more buttons are required in the form to trigger\n * submission.\n */\nexport interface Table {\n  /** An identifying name for this component. */\n  name: S\n  /** The columns in this table. */\n  columns: TableColumn[]\n  /** The rows in this table. */\n  rows: TableRow[]\n  /** True to allow multiple rows to be selected. */\n  multiple?: B\n  /** True to allow group by feature. */\n  groupable?: B\n  /** Indicates whether the contents of this table can be downloaded and saved as a CSV file. Defaults to False. */\n  downloadable?: B\n  /** Indicates whether a Reset button should be displayed to reset search / filter / group-by values to their defaults. Defaults to False. */\n  resettable?: B\n  /** The height of the table, e.g. '400px', '50%', etc. */\n  height?: S\n  /** The names of the selected rows. If this parameter is set, multiple selections will be allowed (`multiple` is assumed to be `True`). */\n  values?: S[]\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\ntype QColumn = Fluent.IColumn & {\n  dataType?: S\n  cellType?: TableCellType\n  isSortable?: B\n}\n\nconst\n  css = stylesheet({\n    // HACK: Put sorting icon on right (same as filter).\n    sortableHeader: {\n      $nest: {\n        '.ms-DetailsHeader-cellName': {\n          position: 'relative',\n          paddingRight: 15\n        }\n      }\n    },\n    sortingIcon: {\n      marginLeft: 10,\n      fontSize: rem(1.1),\n      position: 'absolute',\n      top: -2,\n      right: -5\n    },\n    // HACK: incorrect width recalculated after changing to \"group by mode\" - collapse icon in header\n    // causes horizontal overflow for whole table.\n    hideCellGroupCollapse: {\n      $nest: {\n        'div[class*=\"cellIsGroupExpander\"]': {\n          display: 'none'\n        }\n      }\n    }\n  }),\n  groupByF = function <T extends Dict<any>>(arr: T[], key: S): Dict<any> {\n    return arr.reduce((rv, x: T) => {\n      (rv[x[key]] = rv[x[key]] || []).push(x)\n      return rv\n    }, {} as Dict<any>)\n  },\n  sortingF = (column: QColumn, sortAsc: B) => (rowA: any, rowB: any) => {\n    let a = rowA[column.key], b = rowB[column.key]\n\n    switch (column.dataType) {\n      case 'number':\n        a = +a\n        b = +b\n        return sortAsc ? a - b : b - a\n      case 'time':\n        a = Date.parse(a)\n        b = Date.parse(b)\n        break\n      default:\n        a = a.toLowerCase()\n        b = b.toLowerCase()\n        break\n    }\n\n    return sortAsc\n      ? b > a ? -1 : 1\n      : b > a ? 1 : -1\n  },\n  formatNum = (num: U) => num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\"),\n  toCSV = (data: unknown[][]): S => data.map(row => {\n    const line = JSON.stringify(row)\n    return line.substr(1, line.length - 2)\n  }).join('\\n')\n\n\nexport const\n  XTable = bond(({ model: m }: { model: Table }) => {\n    qd.args[m.name] = []\n    const\n      items = m.rows.map(r => {\n        const item: Fluent.IObjectWithKey & Dict<any> = { key: r.name }\n        for (let i = 0, n = r.cells.length; i < n; i++) {\n          const col = m.columns[i]\n          item[col.name] = r.cells[i]\n        }\n        return item\n      }),\n      isMultiple = m.values?.length || m.multiple,\n      filteredItemsB = box(items),\n      searchableKeys = m.columns.filter(({ searchable }) => searchable).map(({ name }) => name),\n      searchStrB = box(''),\n      selectedFiltersB = box<Dict<S[]> | null>(null),\n      colContextMenuListB = box<Fluent.IContextualMenuProps | null>(null),\n      groupsB = box<Fluent.IGroup[] | undefined>(undefined),\n      groupByKeyB = box('*'),\n      groupByOptions: Fluent.IDropdownOption[] = m.groupable ? [{ key: '*', text: '(No Grouping)' }, ...m.columns.map(col => ({ key: col.name, text: col.label }))] : [],\n      onSearchChange = (_e: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>, searchStr?: S) => {\n        searchStrB(searchStr || '')\n\n        if (!searchStr && !selectedFiltersB()) {\n          filteredItemsB(items)\n          if (groupsB()) initGroups()\n          return\n        }\n\n        filter()\n        search()\n        if (groupsB()) initGroups()\n      },\n      search = () => {\n        const searchStr = searchStrB().toLowerCase()\n        if (!searchStr || !searchableKeys.length) return\n\n        filteredItemsB(filteredItemsB().filter(i => searchableKeys.some(key => (i[key] as S).toLowerCase().includes(searchStr))))\n      },\n      onFilterChange = (filterKey: S, filterVal: S) => (_e?: React.FormEvent<HTMLInputElement | HTMLElement>, checked?: B) => {\n        const filters = selectedFiltersB() || {}\n\n        if (checked) {\n          if (filters[filterKey]) filters[filterKey].push(filterVal)\n          else filters[filterKey] = [filterVal]\n        }\n        else filters[filterKey] = filters[filterKey].filter(f => f !== filterVal)\n        selectedFiltersB(Object.values(filters).every(v => !v.length) ? null : { ...filters })\n\n        filter()\n        search()\n        if (groupsB()) initGroups()\n      },\n      // TODO: Make filter options in dropdowns dynamic.\n      filter = () => {\n        const selectedFilters = selectedFiltersB()\n\n        // If we have filters, check if any of the data-item's props (filter's keys) equals to any of its filter values.\n        const filteredItems = selectedFilters\n          ? items.filter(i => Object.keys(selectedFilters)\n            .every(filterKey => !selectedFilters[filterKey].length || selectedFilters[filterKey]\n              .some(filterVal => i[filterKey] === filterVal)\n            )\n          )\n          : items\n\n        filteredItemsB(filteredItems)\n      },\n      reset = () => {\n        selectedFiltersB(null)\n        searchStrB('')\n\n        groupsB(undefined)\n        groupByKeyB('*')\n\n        filter()\n        search()\n      },\n      sort = (column: QColumn) => {\n        const sortAsc = column.iconName === 'SortDown'\n        column.iconName = sortAsc ? 'SortUp' : 'SortDown'\n\n        if (groupsB()) {\n          filteredItemsB(groupsB()?.reduce((acc, group) =>\n            [...acc, ...filteredItemsB().slice(group.startIndex, acc.length + group.count).sort(sortingF(column, sortAsc))],\n            [] as any[]) || [])\n        }\n        else filteredItemsB([...filteredItemsB()].sort(sortingF(column, sortAsc)))\n\n        columnsB(columnsB().map((col) => column.key === col.key ? column : col))\n      },\n      download = () => {\n        // TODO: Prompt a dialog for name, encoding, etc.\n        const\n          data = toCSV([m.columns.map(({ label, name }) => label || name), ...m.rows.map(({ cells }) => cells)]),\n          a = document.createElement('a'),\n          blob = new Blob([data], { type: \"octet/stream\" }),\n          url = window.URL.createObjectURL(blob)\n\n        a.href = url\n        a.download = 'exported_data.csv'\n        a.click()\n\n        window.URL.revokeObjectURL(url)\n      },\n      onRenderMenuList = (props?: Fluent.IContextualMenuListProps) => {\n        if (!props) return null\n\n        return (\n          <div style={{ padding: 10 }}>\n            <Fluent.Text variant='mediumPlus' styles={{ root: { paddingTop: 10, paddingBottom: 10, fontWeight: 'bold' } }} block>Show only</Fluent.Text>\n            {\n              props.items.map(({ key, name, data }) => {\n                const selectedFilters = selectedFiltersB()\n                const checked = !!name && !!selectedFilters && selectedFilters[data] && selectedFilters[data].includes(name)\n                return (\n                  <Fluent.Checkbox\n                    key={key}\n                    label={name}\n                    defaultChecked={checked}\n                    onChange={onFilterChange(data || '', name || '')}\n                    styles={{ root: { marginBottom: 5 } }}\n                  />\n                )\n              })\n            }\n          </div>\n        )\n      },\n      onDismissContextMenu = () => colContextMenuListB(null),\n      onColumnContextMenu = (col: Fluent.IColumn, e: React.MouseEvent<HTMLElement>) => {\n        colContextMenuListB({\n          items: Array.from(new Set(items.map(i => i[col.fieldName || col.key])))\n            .map(option => ({ key: option, name: option, data: col.fieldName || col.key })),\n          target: e.target as HTMLElement,\n          directionalHint: Fluent.DirectionalHint.bottomLeftEdge,\n          gapSpace: 10,\n          isBeakVisible: true,\n          onRenderMenuList,\n          onDismiss: onDismissContextMenu,\n        })\n      },\n      makeGroups = () => {\n        let prevSum = 0\n        const groupedBy = groupByF(filteredItemsB(), groupByKeyB())\n        const groupedByKeys = Object.keys(groupedBy)\n        const groups: Fluent.IGroup[] = groupedByKeys.map((key, i) => {\n          if (i !== 0) {\n            const prevKey = groupedByKeys[i - 1]\n            prevSum += groupedBy[prevKey].length\n          }\n          return { key, name: key, startIndex: prevSum, count: groupedBy[key].length, isCollapsed: true }\n        })\n\n        return { groupedBy, groups }\n      },\n      initGroups = () => {\n        const { groupedBy, groups } = makeGroups()\n        filteredItemsB(Object.values(groupedBy).flatMap(arr => arr))\n        groupsB(groups)\n      },\n      onGroupByChange = (_e: React.FormEvent<HTMLDivElement>, option?: Fluent.IDropdownOption) => {\n        if (!option) return\n        if (option.key === '*') {\n          reset()\n          return\n        }\n\n        reset()\n        groupByKeyB(option.key as S)\n        initGroups()\n      },\n      onRenderDetailsHeader = (props?: Fluent.IDetailsHeaderProps) => {\n        if (!props) return <span />\n\n        return (\n          <Fluent.Sticky stickyPosition={Fluent.StickyPositionType.Header} isScrollSynced>\n            <Fluent.DetailsHeader {...props} onColumnContextMenu={onColumnContextMenu} className={groupsB() ? css.hideCellGroupCollapse : ''} />\n          </Fluent.Sticky>\n        )\n      },\n\n      onRenderDetailsFooter = (props?: Fluent.IDetailsFooterProps) => {\n        const searchOrFilter = searchableKeys.length || m.columns.some(c => c.filterable)\n        if (!props || (!m.downloadable && !m.resettable && !searchOrFilter)) return null\n\n        const footerItems: Fluent.ICommandBarItemProps[] = []\n        if (m.downloadable) footerItems.push({ key: 'download', text: 'Download data', iconProps: { iconName: 'Download' }, onClick: download })\n        if (m.resettable) footerItems.push({ key: 'reset', text: 'Reset table', iconProps: { iconName: 'Refresh' }, onClick: reset })\n\n        return (\n          <Fluent.Sticky stickyPosition={Fluent.StickyPositionType.Footer} isScrollSynced>\n            <Fluent.Stack horizontal horizontalAlign={searchOrFilter ? 'space-between' : 'end'} verticalAlign='center'>\n              {\n                searchOrFilter && (\n                  <Fluent.Text variant='smallPlus' block >Rows:\n                    <b style={{ paddingLeft: 5 }}>{formatNum(filteredItemsB().length)} of {formatNum(items.length)}</b>\n                  </Fluent.Text>\n                )\n              }\n              <Fluent.CommandBar items={footerItems} />\n            </Fluent.Stack>\n          </Fluent.Sticky>\n        )\n      },\n      onRenderRow = (props?: Fluent.IDetailsRowProps) => {\n        if (!props) return <span />\n\n        return <Fluent.DetailsRow {...props} styles={{ cell: { alignSelf: 'center' }, root: { width: '100%' } }} />\n      },\n      onColumnClick = (e: React.MouseEvent<HTMLElement>, column: QColumn) => {\n        const isMenuClicked = (e.target as HTMLElement).getAttribute('data-icon-name') === 'ChevronDown'\n\n        if (isMenuClicked) onColumnContextMenu(column, e)\n        else if (column.isSortable) sort(column)\n      },\n      columnsB = box(m.columns.map((c): QColumn => {\n        const\n          minWidth = c.min_width\n            ? c.min_width.endsWith('px')\n              ? +c.min_width.substring(0, c.min_width.length - 2)\n              : +c.min_width\n            : 150,\n          maxWidth = c.max_width\n            ? c.max_width.endsWith('px')\n              ? +c.max_width.substring(0, c.max_width.length - 2)\n              : +c.max_width\n            : undefined\n        return {\n          key: c.name,\n          name: c.label,\n          fieldName: c.name,\n          minWidth,\n          maxWidth,\n          headerClassName: c.sortable ? css.sortableHeader : undefined,\n          iconClassName: c.sortable ? css.sortingIcon : undefined,\n          iconName: c.sortable ? 'SortDown' : undefined,\n          onColumnClick,\n          columnActionsMode: c.filterable ? Fluent.ColumnActionsMode.hasDropdown : Fluent.ColumnActionsMode.clickable,\n          cellType: c.cell_type,\n          dataType: c.data_type,\n          isSortable: c.sortable,\n          isResizable: true,\n        }\n      })),\n      primaryColumnKey = m.columns.find(c => c.link)?.name || (m.columns[0].link === false ? undefined : m.columns[0].name),\n      selection = new Fluent.Selection({\n        onSelectionChanged: () => {\n          qd.args[m.name] = selection.getSelection().map(item => item.key as S)\n        }\n      }),\n      init = () => {\n        if (isMultiple && m.values) {\n          m.values.forEach(v => selection.setKeySelected(v, true, false))\n          qd.args[m.name] = m.values\n        }\n      },\n      onItemInvoked = (item: Fluent.IObjectWithKey & Dict<any>) => {\n        qd.args[m.name] = [item.key as S]\n        qd.sync()\n      },\n      onRenderItemColumn = (item?: Fluent.IObjectWithKey & Dict<any>, _index?: number, col?: QColumn) => {\n        if (!item || !col) return <span />\n\n        const v = item[col.fieldName as S]\n        if (col.key === primaryColumnKey && !isMultiple) {\n          const onClick = () => {\n            qd.args[m.name] = [item.key as S]\n            qd.sync()\n          }\n          return <Fluent.Link onClick={onClick}>{v}</Fluent.Link>\n        }\n\n        if (col.cellType?.progress) return <XProgressTableCellType model={col.cellType.progress} progress={item[col.key]} />\n        if (col.cellType?.icon) return <XIconTableCellType model={col.cellType.icon} icon={item[col.key]} />\n        if (col.dataType === 'time') return <span>{new Date(v).toLocaleString()}</span>\n\n        return <span>{v}</span>\n      },\n      computeHeight = () => {\n        if (m.height) return m.height\n        if (items.length > 10) return 500\n\n        const\n          topToolbarHeight = searchableKeys.length || m.groupable ? 60 : 0,\n          headerHeight = 60,\n          rowHeight = m.columns.some(c => c.cell_type)\n            ? m.columns.some(c => c.cell_type?.progress) ? 68 : 50\n            : 43,\n          footerHeight = m.downloadable || m.resettable || searchableKeys.length ? 44 : 0\n\n        return topToolbarHeight + headerHeight + (items.length * rowHeight) + footerHeight\n      },\n      DataTable = () => (\n        <>\n          <Fluent.DetailsList\n            items={filteredItemsB()}\n            columns={columnsB()}\n            constrainMode={Fluent.ConstrainMode.unconstrained}\n            layoutMode={Fluent.DetailsListLayoutMode.fixedColumns}\n            groups={groupsB()}\n            selection={selection}\n            selectionMode={isMultiple ? Fluent.SelectionMode.multiple : Fluent.SelectionMode.none}\n            selectionPreservedOnEmptyClick\n            onItemInvoked={isMultiple ? undefined : onItemInvoked}\n            onRenderRow={onRenderRow}\n            onRenderItemColumn={onRenderItemColumn}\n            onRenderDetailsHeader={onRenderDetailsHeader}\n            onRenderDetailsFooter={onRenderDetailsFooter}\n          />\n          {colContextMenuListB() && <Fluent.ContextualMenu {...(colContextMenuListB() as Fluent.IContextualMenuProps)} />}\n        </>\n      ),\n      render = () => (\n        <div data-test={m.name} style={{ position: 'relative', height: computeHeight(), ...displayMixin(m.visible) }}>\n          <Fluent.Stack horizontal horizontalAlign='space-between' >\n            {m.groupable && <Fluent.Dropdown data-test='groupby' label='Group by' selectedKey={groupByKeyB()} onChange={onGroupByChange} options={groupByOptions} styles={{ root: { width: 300 } }} />}\n            {!!searchableKeys.length && <Fluent.TextField data-test='search' label='Search' onChange={onSearchChange} value={searchStrB()} styles={{ root: { width: '50%' } }} />}\n          </Fluent.Stack>\n          <Fluent.ScrollablePane scrollbarVisibility={Fluent.ScrollbarVisibility.auto} styles={{ root: { top: m.groupable || searchableKeys.length ? 60 : 0 } }}>\n            {\n              isMultiple\n                ? <Fluent.MarqueeSelection selection={selection}><DataTable /></Fluent.MarqueeSelection>\n                : <DataTable />\n            }\n          </Fluent.ScrollablePane>\n        </div>\n      )\n    return { init, render, columnsB, filteredItemsB, selectedFiltersB, searchStrB, colContextMenuListB, groupsB, groupByKeyB }\n  })","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { bond, S, qd, B } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a tab.\n */\nexport interface Tab {\n  /** An identifying name for this component. */\n  name: S\n  /** The text displayed on the tab. */\n  label?: S\n  /** The icon displayed on the tab. */\n  icon?: S\n}\n\n/**\n * Create a tab bar.\n */\nexport interface Tabs {\n  /** An identifying name for this component. */\n  name: S\n  /** The name of the tab to select. */\n  value?: S\n  /** The tabs in this tab bar. */\n  items?: Tab[]\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\nexport const\n  XTabs = bond(({ model: m }: { model: Tabs }) => {\n    const\n      onLinkClick = (item?: Fluent.PivotItem) => {\n        if (!item) return\n        if (item.props.itemKey !== qd.args[m.name]) {\n          qd.args[m.name] = item.props.itemKey || null\n          qd.sync()\n        }\n      },\n      render = () => {\n        const tabs = m.items?.map(t => <Fluent.PivotItem key={t.name} itemIcon={t.icon} itemKey={t.name} headerText={t.label} />)\n        return <Fluent.Pivot data-test={m.name} style={displayMixin(m.visible)} selectedKey={m.value ?? null} onLinkClick={onLinkClick}>{tabs}</Fluent.Pivot>\n      }\n    return { render }\n  })","import Handlebars from 'handlebars'\nimport React from 'react'\nimport { cards, substitute } from './layout'\nimport { MarkupCard, XMarkup } from './markup'\nimport { bond, Card, Rec, S, unpack, B } from './qd'\n\n/** Render dynamic content using an HTML template.*/\nexport interface Template {\n  /** The Handlebars template. https://handlebarsjs.com/guide/ */\n  content: S\n  /** Data for the Handlebars template */\n  data?: Rec\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\n/** Render dynamic content using an HTML template.*/\ninterface State {\n  /** The title for this card.*/\n  title: S\n  /** The Handlebars template. https://handlebarsjs.com/guide/ */\n  content: S\n  /** Data for the Handlebars template. */\n  data?: Rec\n}\n\nexport const\n  XTemplate = bond(({ model: m }: { model: Template }) => {\n    const\n      template = Handlebars.compile(m.content || ''),\n      render = () => {\n        const data = unpack(m.data)\n        return <div data-test={m.name}><XMarkup model={{ content: template(data || {}), visible: m.visible }} /></div>\n      }\n    return { render }\n  }),\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      template = Handlebars.compile(state.content || ''),\n      render = () => {\n        const data = unpack(state.data)\n        return <MarkupCard name={name} title={substitute(state.title, data)} content={template(data || {})} />\n      }\n    return { render, changed }\n  })\n\ncards.register('template', View)\n","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardMenu } from './card_menu'\nimport { Markdown } from './markdown'\nimport { Dict, S, B } from './qd'\nimport { border, getTheme, padding, palette, pc, displayMixin } from './theme'\nimport { Command } from './toolbar'\n\n/** Create text content. */\nexport interface Text {\n  /** The text content. */\n  content: S\n  /** The font size of the text content. */\n  size?: 'xl' | 'l' | 'm' | 's' | 'xs'\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\n/** Create extra-large sized text content. */\nexport interface TextXl {\n  /** The text content. */\n  content: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** Contextual menu commands for this component. */\n  commands?: Command[]\n  /** An identifying name for this component. */\n  name?: S\n}\n\n/** Create large sized text content. */\nexport interface TextL {\n  /** The text content. */\n  content: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** Contextual menu commands for this component. */\n  commands?: Command[]\n  /** An identifying name for this component. */\n  name?: S\n}\n\n/** Create medium sized text content. */\nexport interface TextM {\n  /** The text content. */\n  content: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\n/** Create small sized text content. */\nexport interface TextS {\n  /** The text content. */\n  content: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\n/** Create extra-small sized text content. */\nexport interface TextXs {\n  /** The text content. */\n  content: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    text: {\n      position: 'relative',\n    },\n    markdown: {\n      $nest: {\n        a: {\n          color: palette.themePrimary,\n          $nest: {\n            '&:hover': {\n              textDecoration: 'none',\n            },\n          },\n        },\n        table: {\n          width: pc(100),\n          borderCollapse: 'collapse',\n        },\n        tr: {\n          borderBottom: border(1, theme.colors.text5),\n        },\n        th: {\n          padding: padding(11, 6),\n          textAlign: 'left',\n        },\n        td: {\n          padding: padding(11, 6),\n        }\n      }\n    },\n  }),\n  textVariants: Dict<keyof Fluent.IFontStyles> = {\n    xl: 'xLarge',\n    l: 'large',\n    m: 'medium',\n    s: 'small',\n    xs: 'xSmall',\n  },\n  toTextVariant = (s: S) => textVariants[s] || 'mediumPlus'\n\nexport const\n  XText = ({ content, name, size, commands, visibility = true }: { content: S, name?: S, size?: S, commands?: Command[], visibility?: B }) => {\n    const menuName = name ? `${name}-menu` : name\n    return (\n      <div className={css.text} style={displayMixin(visibility)}>\n        <Fluent.Text data-test={name} variant={toTextVariant(size || 'm')} block>\n          <div className={css.markdown}><Markdown source={content} /></div>\n        </Fluent.Text>\n        {!!commands?.length && <CardMenu name={menuName} commands={commands} />}\n      </div>\n    )\n  }","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, S, qd } from './qd'\nimport { debounce } from 'vega'\nimport { displayMixin } from './theme'\n\n/**\n * Create a text box.\n *\n * The text box component enables a user to type text into an app.\n * It's typically used to capture a single line of text, but can be configured to capture multiple lines of text.\n * The text displays on the screen in a simple, uniform format.\n*/\nexport interface Textbox {\n  /** An identifying name for this component. */\n  name: S\n  /** The text displayed above the field. */\n  label?: S\n  /** A string that provides a brief hint to the user as to what kind of information is expected in the field. It should be a word or short phrase that demonstrates the expected type of data, rather than an explanatory message. */\n  placeholder?: S\n  /** Text to be displayed inside the text box. */\n  value?: S\n  /** The masking string that defines the mask's behavior. A backslash will escape any character. Special format characters are: '9': [0-9] 'a': [a-zA-Z] '*': [a-zA-Z0-9].*/\n  mask?: S\n  /** Icon displayed in the far right end of the text field. */\n  icon?: S\n  /** Text to be displayed before the text box contents. */\n  prefix?: S\n  /** Text to be displayed after the text box contents. */\n  suffix?: S\n  /** Text to be displayed as an error below the text box. */\n  error?: S\n  /** True if the text box is a required field. */\n  required?: B\n  /** True if the text box is disabled. */\n  disabled?: B\n  /** True if the text box is a read-only field. */\n  readonly?: B\n  /** True if the text box should allow multi-line text entry. */\n  multiline?: B\n  /** True if the text box should hide text content. */\n  password?: B\n  /** True if the form should be submitted when the text value changes. */\n  trigger?: B\n  /** The height of the text box, e.g. '100px'. Applicable only if `multiline` is true. */\n  height?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst DEBOUNCE_TIMEOUT = 500\nexport const\n  XTextbox = bond(({ model: m }: { model: Textbox }) => {\n    qd.args[m.name] = m.value || ''\n    const\n      onChange = ({ target }: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>, v?: string) => {\n        v = v || (target as HTMLInputElement).value\n\n        qd.args[m.name] = v ?? (m.value || '')\n        if (m.trigger) qd.sync()\n      },\n      render = () => m.mask\n        ? (\n          <Fluent.MaskedTextField\n            data-test={m.name}\n            style={displayMixin(m.visible)}\n            label={m.label}\n            defaultValue={m.value}\n            mask={m.mask}\n            errorMessage={m.error}\n            required={m.required}\n            disabled={m.disabled}\n            readOnly={m.readonly}\n            onChange={m.trigger ? debounce(DEBOUNCE_TIMEOUT, onChange) : onChange}\n          />\n        )\n        : (\n          <Fluent.TextField\n            data-test={m.name}\n            style={displayMixin(m.visible)}\n            styles={m.multiline && m.height ? { fieldGroup: { height: m.height } } : undefined}\n            label={m.label}\n            placeholder={m.placeholder}\n            iconProps={{ iconName: m.icon }}\n            prefix={m.prefix}\n            suffix={m.suffix}\n            defaultValue={m.value}\n            errorMessage={m.error}\n            required={m.required}\n            disabled={m.disabled}\n            readOnly={m.readonly}\n            multiline={m.multiline}\n            type={m.password ? 'password' : undefined}\n            onChange={m.trigger ? debounce(DEBOUNCE_TIMEOUT, onChange) : onChange}\n          />\n        )\n\n    return { render }\n  })","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, S, qd } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a toggle.\n * Toggles represent a physical switch that allows users to turn things on or off.\n * Use toggles to present users with two mutually exclusive options (like on/off), where choosing an option results\n * in an immediate action.\n *\n * Use a toggle for binary operations that take effect right after the user flips the Toggle.\n * For example, use a Toggle to turn services or hardware components on or off.\n * In other words, if a physical switch would work for the action, a Toggle is probably the best component to use.\n */\nexport interface Toggle {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** True if selected, False if unselected. */\n  value?: B\n  /** True if the checkbox is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the toggle value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XToggle = bond(({ model: m }: { model: Toggle }) => {\n    qd.args[m.name] = !!m.value\n    const\n      onChange = (_e?: React.FormEvent<HTMLElement>, checked?: boolean) => {\n        qd.args[m.name] = !!checked\n        if (m.trigger) qd.sync()\n      },\n      render = () => (\n        <Fluent.Toggle\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          label={m.label}\n          defaultChecked={m.value}\n          onChange={onChange}\n          disabled={m.disabled}\n          onText=\"On\"\n          offText=\"Off\"\n          inlineLabel\n        />\n      )\n\n    return { render }\n  })","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport vegaEmbed from 'vega-embed'\nimport { cards, grid } from './layout'\nimport { bond, Card, Rec, S, unpack, xid, B } from './qd'\nimport { getTheme, displayMixin, px } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      height: `calc(100% - ${px(2 * grid.gap)} )`,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    plot: {\n      position: 'relative',\n      height: 'calc(100% - 20px)',\n      width: 'calc(100% - 10px)'\n    },\n  })\n\n/** Create a Vega-lite plot for display inside a form. */\nexport interface VegaVisualization {\n  /** The Vega-lite specification. */\n  specification: S\n  /** Data for the plot, if any. */\n  data?: Rec\n  /** The width of the visualization. Defaults to 100%. */\n  width?: S\n  /** The height of the visualization. Defaults to 300px. */\n  height?: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\nexport const\n  XVegaVisualization = bond(({ model: state }: { model: VegaVisualization }) => {\n    const\n      ref = React.createRef<HTMLDivElement>(),\n      init = async () => {\n        if (!ref.current) {\n          window.setTimeout(init, 500)\n          return\n        }\n\n        const\n          spec = JSON.parse(state.specification),\n          data = unpack<any[]>(state.data)\n\n        if (data) spec.data = { values: data }\n        try {\n          await vegaEmbed(ref.current, spec, {\n            mode: 'vega-lite',\n            defaultStyle: false,\n            renderer: 'canvas',\n            actions: false,\n            config: {\n              autosize: {\n                type: 'fit',\n                resize: true\n              },\n              view: {\n                discreteWidth: ref.current.clientWidth || undefined,\n                discreteHeight: ref.current.clientHeight || undefined,\n                continuousWidth: ref.current.clientWidth || 200,\n                continuousHeight: ref.current.clientHeight || 200,\n              }\n            }\n          })\n        } catch (e) {\n          console.error(e)\n        }\n      },\n      render = () => {\n        const\n          { name, width, height, visible } = state,\n          style: React.CSSProperties = (width === 'auto' && height === 'auto')\n            ? { position: 'absolute', left: 0, top: 0, right: 0, bottom: 0 }\n            : { width: width || 'auto', height: height || 'auto' }\n        return <div data-test={name} style={{ ...style, ...displayMixin(visible) }} ref={ref} />\n      }\n\n    return { init, render }\n  })\n\n/** Create a card containing a Vega-lite plot. */\ninterface State {\n  /** The title of this card. */\n  title: S\n  /** The Vega-lite specification. */\n  specification: S\n  /** Data for the plot, if any. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.title}>{state.title}</div>\n            <div className={css.plot}>\n              <XVegaVisualization key={xid()} model={{ specification: state.specification, data: state.data, width: 'auto', height: 'auto' }} />\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('vega', View)\n\n","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Button, Buttons, XButtons, XStandAloneButton } from './button'\nimport { Checkbox, XCheckbox } from './checkbox'\nimport { Checklist, XChecklist } from './checklist'\nimport { ChoiceGroup, XChoiceGroup } from './choice_group'\nimport { ColorPicker, XColorPicker } from './color_picker'\nimport { Combobox, XCombobox } from './combobox'\nimport { DatePicker, XDatePicker } from './date_picker'\nimport { Dropdown, XDropdown } from './dropdown'\nimport { Expander, XExpander } from './expander'\nimport { FileUpload, XFileUpload } from './file_upload'\nimport { Frame, XFrame } from './frame'\nimport { Label, XLabel } from './label'\nimport { cards } from './layout'\nimport { Link, XLink } from './link'\nimport { Markup, XMarkup } from './markup'\nimport { MessageBar, XMessageBar } from './message_bar'\nimport { Picker, XPicker } from './picker'\nimport { Visualization, XVisualization } from './plot'\nimport { Progress, XProgress } from './progress'\nimport { bond, Card, Packed, unpack, xid } from './qd'\nimport { RangeSlider, XRangeSlider } from './range_slider'\nimport { Separator, XSeparator } from './separator'\nimport { Slider, XSlider } from './slider'\nimport { Spinbox, XSpinbox } from './spinbox'\nimport { Stepper, XStepper } from './stepper'\nimport { Table, XTable } from './table'\nimport { Tabs, XTabs } from './tabs'\nimport { Template, XTemplate } from './template'\nimport { Text, TextL, TextM, TextS, TextXl, TextXs, XText } from './text'\nimport { Textbox, XTextbox } from './textbox'\nimport { getTheme, margin } from './theme'\nimport { Toggle, XToggle } from './toggle'\nimport { XToolTip } from './tooltip'\nimport { VegaVisualization, XVegaVisualization } from './vega'\n\n/** Create a component. */\nexport interface Component {\n  /** Text block. */\n  text?: Text;\n  /** Extra-large sized text block. */\n  text_xl?: TextXl;\n  /** Large sized text block. */\n  text_l?: TextL;\n  /** Medium sized text block. */\n  text_m?: TextM;\n  /** Small sized text block. */\n  text_s?: TextS;\n  /** Extra-small sized text block. */\n  text_xs?: TextXs;\n  /** Label. */\n  label?: Label;\n  /** Separator. */\n  separator?: Separator;\n  /** Progress bar. */\n  progress?: Progress;\n  /** Message bar. */\n  message_bar?: MessageBar;\n  /** Textbox. */\n  textbox?: Textbox;\n  /** Checkbox. */\n  checkbox?: Checkbox;\n  /** Toggle. */\n  toggle?: Toggle;\n  /** Choice group. */\n  choice_group?: ChoiceGroup;\n  /** Checklist. */\n  checklist?: Checklist;\n  /** Dropdown. */\n  dropdown?: Dropdown;\n  /** Combobox. */\n  combobox?: Combobox;\n  /** Slider. */\n  slider?: Slider;\n  /** Spinbox. */\n  spinbox?: Spinbox;\n  /** Date picker. */\n  date_picker?: DatePicker;\n  /** Color picker. */\n  color_picker?: ColorPicker;\n  /** Button. */\n  button?: Button;\n  /** Button set. */\n  buttons?: Buttons;\n  /** File upload. */\n  file_upload?: FileUpload;\n  /** Table. */\n  table?: Table;\n  /** Link. */\n  link?: Link;\n  /** Tabs. */\n  tabs?: Tabs;\n  /** Expander. */\n  expander?: Expander;\n  /** Frame. */\n  frame?: Frame;\n  /** Markup */\n  markup?: Markup\n  /** Template */\n  template?: Template\n  /** Picker.*/\n  picker?: Picker;\n  /** Range Slider. */\n  range_slider?: RangeSlider;\n  /** Stepper. */\n  stepper?: Stepper;\n  /** Visualization. */\n  visualization?: Visualization;\n  /** Vega-lite Visualization. */\n  vega_visualization?: VegaVisualization;\n}\n\n/** Create a form. */\ninterface State {\n  /** The components in this form. */\n  items: Packed<Component[]>;\n}\n\n\nconst\n  theme = getTheme(),\n  defaults: Partial<State> = { items: [] },\n  css = stylesheet({\n    form: {\n      $nest: {\n        '> *': {\n          margin: margin(10, 0)\n        }\n      }\n    }\n  })\n\n\nexport const\n  XComponents = ({ items }: { items: Component[] }) => {\n    const components = items.map(m => <XComponent key={xid()} model={m} />)\n    return <>{components}</>\n  }\n\nconst\n  XComponent = ({ model: m }: { model: Component }) => {\n    if (m.text) return <XToolTip content={m.text.tooltip} expand={false}><XText name={m.text.name} content={m.text.content} size={m.text.size} visibility={m.text.visible} /></XToolTip>\n    if (m.text_xl) return <XToolTip content={m.text_xl.tooltip} expand={false}><XText name={m.text_xl.name} content={m.text_xl.content} size='xl' commands={m.text_xl.commands} visibility={m.text_xl.visible} /></XToolTip>\n    if (m.text_l) return <XToolTip content={m.text_l.tooltip} expand={false}><XText name={m.text_l.name} content={m.text_l.content} size='l' commands={m.text_l.commands} visibility={m.text_l.visible} /></XToolTip>\n    if (m.text_m) return <XToolTip content={m.text_m.tooltip} expand={false}><XText name={m.text_m.name} content={m.text_m.content} visibility={m.text_m.visible} /></XToolTip>\n    if (m.text_s) return <XToolTip content={m.text_s.tooltip} expand={false}><XText name={m.text_s.name} content={m.text_s.content} size='s' visibility={m.text_s.visible} /></XToolTip>\n    if (m.text_xs) return <XToolTip content={m.text_xs.tooltip} expand={false}><XText name={m.text_xs.name} content={m.text_xs.content} size='xs' visibility={m.text_xs.visible} /></XToolTip>\n    if (m.label) return <XToolTip content={m.label.tooltip} expand={false}><XLabel model={m.label} /></XToolTip>\n    if (m.link) return <XToolTip content={m.link.tooltip} expand={false}><XLink model={m.link} /></XToolTip>\n    if (m.separator) return <XSeparator model={m.separator} />\n    if (m.progress) return <XToolTip content={m.progress.tooltip}><XProgress model={m.progress} /></XToolTip>\n    if (m.message_bar) return <XMessageBar model={m.message_bar} />\n    if (m.textbox) return <XToolTip content={m.textbox.tooltip}><XTextbox model={m.textbox} /></XToolTip>\n    if (m.checkbox) return <XToolTip content={m.checkbox.tooltip} expand={false}><XCheckbox model={m.checkbox} /></XToolTip>\n    if (m.toggle) return <XToolTip content={m.toggle.tooltip} expand={false}><XToggle model={m.toggle} /></XToolTip>\n    if (m.choice_group) return <XToolTip content={m.choice_group.tooltip}><XChoiceGroup model={m.choice_group} /></XToolTip>\n    if (m.dropdown) return <XToolTip content={m.dropdown.tooltip}><XDropdown model={m.dropdown} /></XToolTip>\n    if (m.checklist) return <XToolTip content={m.checklist.tooltip}><XChecklist model={m.checklist} /></XToolTip>\n    if (m.combobox) return <XToolTip content={m.combobox.tooltip}><XCombobox model={m.combobox} /></XToolTip>\n    if (m.slider) return <XToolTip content={m.slider.tooltip}><XSlider model={m.slider} /></XToolTip>\n    if (m.spinbox) return <XToolTip content={m.spinbox.tooltip} expand={false}><XSpinbox model={m.spinbox} /></XToolTip>\n    if (m.date_picker) return <XToolTip content={m.date_picker.tooltip}><XDatePicker model={m.date_picker} /></XToolTip>\n    if (m.color_picker) return <XToolTip content={m.color_picker.tooltip}><XColorPicker model={m.color_picker} /></XToolTip>\n    if (m.file_upload) return <XToolTip content={m.file_upload.tooltip}><XFileUpload model={m.file_upload} /></XToolTip>\n    if (m.table) return <XToolTip content={m.table.tooltip}><XTable model={m.table} /></XToolTip>\n    if (m.buttons) return <XButtons model={m.buttons} />\n    if (m.tabs) return <XTabs model={m.tabs} />\n    if (m.button) return <XToolTip content={m.button.tooltip} showIcon={false} expand={false}><XStandAloneButton model={m.button} /></XToolTip>\n    if (m.expander) return <XExpander model={m.expander} />\n    if (m.frame) return <XFrame model={m.frame} />\n    if (m.markup) return <XMarkup model={m.markup} />\n    if (m.template) return <XTemplate model={m.template} />\n    if (m.picker) return <XToolTip content={m.picker.tooltip}><XPicker model={m.picker} /></XToolTip>\n    if (m.range_slider) return <XToolTip content={m.range_slider.tooltip}><XRangeSlider model={m.range_slider} /></XToolTip>\n    if (m.stepper) return <XToolTip content={m.stepper.tooltip}><XStepper model={m.stepper} /></XToolTip>\n    if (m.visualization) return <XVisualization model={m.visualization} />\n    if (m.vega_visualization) return <XVegaVisualization model={m.vega_visualization} />\n    return <Fluent.MessageBar messageBarType={Fluent.MessageBarType.severeWarning}>This component could not be rendered.</Fluent.MessageBar>\n  }\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          s = theme.merge(defaults, state),\n          items = unpack<Component[]>(s.items) // XXX ugly\n\n        return (\n          <div data-test={name} className={css.form}>\n            <XComponents items={items} />\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('form', View)\n\n","import * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { XButtons } from './button'\nimport { Component, XComponents } from './form'\nimport { B, bond, qd, S } from './qd'\n\n/**\n * A dialog box (Dialog) is a temporary pop-up that takes focus from the page or app\n * and requires people to interact with it. It’s primarily used for confirming actions,\n * such as deleting a file, or asking people to make a choice.\n */\nexport interface Dialog {\n  /** The dialog's title. */\n  title: S\n  /** The components displayed in this dialog. */\n  items: Component[]\n  /** The width of the dialog, e.g. '400px', defaults to '600px'. */\n  width?: S\n  /** True if the dialog should have a closing 'X' button at the top right corner. */\n  closable?: B\n  /** True to disable all actions and commands behind the dialog. Blocking dialogs should be used very sparingly, only when it is critical that the user makes a choice or provides information before they can proceed. Blocking dialogs are generally used for irreversible or potentially destructive tasks. Defaults to false. */\n  blocking?: B\n  /** Dialog with large header banner, mutually exclusive with `closable` prop. Defaults to false. */\n  primary?: B\n}\n\nexport default bond(() => {\n  const\n    { dialogB } = qd,\n    render = () => {\n      const\n        { title, width = '600px', items = [], closable, primary, blocking } = dialogB() || {},\n        dialogContentProps: Fluent.IDialogContentProps = {\n          title,\n          type: closable\n            ? Fluent.DialogType.close\n            : primary\n              ? Fluent.DialogType.largeHeader\n              : Fluent.DialogType.normal\n        },\n        lastComponent = items.pop()\n\n      return (\n        <Fluent.Dialog hidden={!dialogB()} dialogContentProps={dialogContentProps} modalProps={{ isBlocking: blocking }} minWidth={width} maxWidth={width}>\n          <XComponents items={items} />\n          {lastComponent?.buttons && <Fluent.DialogFooter><XButtons model={lastComponent.buttons} /></Fluent.DialogFooter>}\n        </Fluent.Dialog>\n      )\n    }\n  return { render, dialogB }\n})","import { Spinner, SpinnerSize } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { PageLayout } from './page'\nimport { bond, box, connect, on, Page, qd, S, SockEvent, SockEventType, SockMessageType } from './qd'\nimport { clas, getTheme, pc } from './theme'\nimport Dialog from './dialog'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    app: {\n      position: 'absolute',\n      left: 0, top: 0, right: 0, bottom: 0,\n      backgroundColor: theme.colors.page,\n      color: theme.colors.text,\n      display: 'flex',\n      justifyContent: 'center',\n      overflow: 'auto'\n    },\n    centerFullHeight: {\n      height: pc(100),\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      backgroundColor: theme.colors.page,\n      color: theme.colors.text,\n    },\n    freeOverlay: {\n      display: 'none',\n      position: 'fixed',\n      left: 0, top: 0, right: 0, bottom: 0,\n    },\n    busyOverlay: {\n      display: 'block',\n    },\n  })\n\n\nconst\n  BusyOverlay = bond(() => {\n    let\n      spinTimeout = 0\n    const\n      spinDelay = 500, // ms\n      busyB = qd.busyB,\n      spinB = box(false),\n      render = () => (\n        <div className={busyB() ? clas(css.freeOverlay, css.busyOverlay) : css.freeOverlay}>\n          <Spinner className={css.centerFullHeight} style={{ opacity: spinB() ? 0.8 : 0 }} label='Loading...' size={SpinnerSize.large} />\n        </div>\n      )\n    on(busyB, busy => {\n      window.clearTimeout(spinTimeout)\n      if (busy) {\n        spinTimeout = window.setTimeout(() => spinB(true), spinDelay)\n      } else {\n        spinB(false)\n      }\n    })\n    return { render, busyB, spinB }\n  }),\n  App = bond(() => {\n    const\n      contentB = box<{ page?: Page, error?: S }>({}),\n      onSocket = (e: SockEvent) => {\n        switch (e.t) {\n          case SockEventType.Data:\n            contentB({ page: e.page })\n            break\n          case SockEventType.Message:\n            if (e.type === SockMessageType.Err) contentB({ error: e.message })\n            break\n          case SockEventType.Reset:\n            window.location.reload()\n            break\n        }\n      },\n      onHashChanged = () => {\n        const h = window.location.hash\n        if (h?.length > 1) {\n          qd.args['#'] = h.substr(1)\n        }\n        qd.sync()\n      },\n      init = () => {\n        connect('/_s', onSocket)\n        window.addEventListener('hashchange', onHashChanged)\n      },\n      render = () => {\n        const { page, error } = contentB()\n        // TODO prettier error section\n        if (error) {\n          const errorMessage = error === 'not_found'\n            ? <Spinner label='Waiting for content...' size={SpinnerSize.large} />\n            : error\n          return <div className={clas(css.centerFullHeight, css.app)}>{errorMessage}</div>\n        }\n        if (!page) return <Spinner className={css.centerFullHeight} size={SpinnerSize.large} label='Loading ...' />\n\n        return (\n          <div className={css.app}>\n            <PageLayout key={page.key} page={page} />\n            <BusyOverlay />\n            <Dialog />\n          </div>\n        )\n      },\n      dispose = () => {\n        window.removeEventListener('hashchange', onHashChanged)\n      }\n\n    return { init, render, dispose, contentB }\n  })\n\nexport default App\n","import React from 'react'\nimport Login from './login'\nimport App from './app'\nimport { Switch, Route, BrowserRouter } from 'react-router-dom'\n\nconst\n  Router = () => {\n    const\n      routes = [\n        {\n          path: '/_login',\n          exact: true,\n          render: () => <Login />,\n        },\n        {\n          path: '/',\n          exact: false,\n          render: () => <App />\n        },\n      ]\n    return (\n      <BrowserRouter>\n        <Switch>\n          {routes.map((r, i) => <Route key={i} path={r.path} exact={r.exact} render={r.render} />)}\n        </Switch>\n      </BrowserRouter>\n    )\n  }\n\nexport default Router\n","import { Breadcrumb } from '@fluentui/react'\nimport React from 'react'\nimport { cards } from './layout'\nimport { bond, Card, S, qd } from './qd'\n\n/** Create a breadcrumb for a `h2o_wave.types.BreadcrumbsCard()`. */\ninterface Breadcrumb {\n  /** The name of this item. Prefix the name with a '#' to trigger hash-change navigation. */\n  name: S\n  /** The label to display. */\n  label: S\n}\n/**\n * Create a card containing breadcrumbs.\n * Breadcrumbs should be used as a navigational aid in your app or site.\n * They indicate the current page’s location within a hierarchy and help\n * the user understand where they are in relation to the rest of that hierarchy.\n * They also afford one-click access to higher levels of that hierarchy.\n * Breadcrumbs are typically placed, in horizontal form, under the masthead\n * or navigation of an experience, above the primary content area.\n */\ninterface State {\n  /** A list of `h2o_wave.types.Breadcrumb` instances to display. See `h2o_wave.ui.breadcrumb()` */\n  items: Breadcrumb[]\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      items = state.items.map(({ name, label }) => ({\n        key: name,\n        text: label,\n        onClick: () => {\n          if (name.startsWith('#')) {\n            window.location.hash = name.substr(1)\n            return\n          }\n          qd.args[name] = true\n          qd.sync()\n        }\n      }\n      )),\n      render = () => <Breadcrumb data-test={name} items={items} />\n\n    return { render, changed }\n  })\n\ncards.register('breadcrumbs', View)\n","import React from 'react'\nimport { cards, Repeat } from './layout'\nimport { bond, Card, Dict, Rec, S, Data } from './qd'\n\n/**\n * EXPERIMENTAL. DO NOT USE.\n * Create a card containing other cards laid out using a one-dimensional model with flexible alignemnt and wrapping capabilities.\n **/\ninterface State {\n  /** The child card type. */\n  item_view: S\n  /** The child card properties. */\n  item_props: Rec\n  /** Data for this card. */\n  data: Data\n  /** Layout direction. */\n  direction?: 'horizontal' | 'vertical'\n  /** Layout strategy for main axis. */\n  justify?: 'start' | 'end' | 'center' | 'between' | 'around'\n  /** Layout strategy for cross axis. */\n  align?: 'start' | 'end' | 'center' | 'baseline' | 'stretch'\n  /** Wrapping strategy. */\n  wrap?: 'start' | 'end' | 'center' | 'between' | 'around' | 'stretch'\n}\n\nconst\n  directions: Dict<S> = {\n    horizontal: 'row',\n    vertical: 'column',\n  },\n  justifications: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n  },\n  alignments: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    baseline: 'baseline',\n    stretch: 'stretch',\n  },\n  wrappings: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n    stretch: 'stretch',\n  },\n  toFlexStyle = (state: State): React.CSSProperties => {\n    const\n      css: React.CSSProperties = { display: 'flex' },\n      direction = directions[state.direction || ''],\n      justify = justifications[state.justify || ''],\n      align = alignments[state.align || ''],\n      wrap = wrappings[state.wrap || '']\n\n    if (direction) css.flexDirection = direction as any\n    if (justify) css.justifyContent = justify\n    if (align) css.alignItems = align\n    if (wrap) {\n      css.flexWrap = 'wrap'\n      css.alignContent = wrap\n    }\n    return css\n  }\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        // FIXME theme.merge()\n        return (\n          <div data-test={name} style={toFlexStyle(state)} >\n            <Repeat view={state.item_view} props={state.item_props} data={state.data} />\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('flex', View)\n","import * as d3 from 'd3'\nimport React from 'react'\nimport { cards } from './layout'\nimport { bond, Card, Data, Dict, F, Rec, Recs, S, U, unpack } from './qd'\n\n\n/** Create a card for displaying vector graphics. */\ninterface State {\n  /**\n   * The position and dimension of the SVG viewport, in user space.\n   * A space-separated list of four numbers: min-x, min-y, width and height.\n   * For example, '0 0 400 300'.\n   * See: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox\n   */\n  view_box: S\n  /** Background layer for rendering static SVG elements. Must be packed to conserve memory. */\n  stage?: Recs\n  /** Foreground layer for rendering dynamic SVG elements. */\n  scene?: Data\n  /**\n   * The displayed width of the rectangular viewport.\n   * (Not the width of its coordinate system.)\n   */\n  width?: S\n  /**\n   * The displayed height of the rectangular viewport.\n   * (Not the height of its coordinate system.)\n   */\n  height?: S\n}\n\nconst\n  toAttributes = (d: any): [S, any] => {\n    const\n      t = d['_t'] || 'u',  // default to '<use/>'\n      a: any = {}\n    delete d['_t']\n\n    for (const k in d) a[k.replace(/_/g, '-')] = d[k] // xml_attr to xml-attr\n    return [t, a]\n  },\n  extract = (d: any, extra: S[]): any[] => {\n    const e: any[] = []\n    for (const k of extra) e.push(d[k])\n    for (const k of extra) delete d[k]\n    return e\n  },\n  nums = (s: S): F[] => s.split(/\\s/g).map(x => +x),\n  zip = <T1, T2, T3>(a: T1[], b: T2[], f: (a: T1, b: T2) => T3): T3[] => {\n    const\n      n = a.length,\n      c: T3[] = new Array(n)\n    for (let i = 0; i < n; i++) c[i] = f(a[i], b[i])\n    return c\n  },\n  zip3 = <T1, T2, T3, T4>(a: T1[], b: T2[], c: T3[], f: (a: T1, b: T2, c: T3) => T4): T4[] => {\n    const\n      n = a.length,\n      d: T4[] = new Array(n)\n    for (let i = 0; i < n; i++) d[i] = f(a[i], b[i], c[i])\n    return d\n  },\n  curves: Dict<d3.CurveFactory> = {\n    basis: d3.curveBasis,\n    'basis-closed': d3.curveBasisClosed,\n    'basis-open': d3.curveBasisOpen,\n    cardinal: d3.curveCardinal,\n    'cardinal-closed': d3.curveCardinalClosed,\n    'cardinal-open': d3.curveCardinalOpen,\n    smooth: d3.curveCatmullRom,\n    'smooth-closed': d3.curveCatmullRomClosed,\n    'smooth-open': d3.curveCatmullRomOpen,\n    linear: d3.curveLinear,\n    'linear-closed': d3.curveLinearClosed,\n    'monotone-x': d3.curveMonotoneX,\n    'monotone-y': d3.curveMonotoneY,\n    natural: d3.curveNatural,\n    step: d3.curveStep,\n    'step-after': d3.curveStepAfter,\n    'step-before': d3.curveStepBefore,\n  },\n  ret0 = () => 0,\n  get0 = (d: any) => d[0],\n  get1 = (d: any) => d[1],\n  get2 = (d: any) => d[2]\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    type El = { d: S, o: S }\n\n    const\n      renderEl = (o: Rec, i: U) => {\n        const\n          [t, a] = toAttributes(o)\n        switch (t) {\n          case 'a': {\n            const\n              [r1, r2, a1, a2] = extract(a, ['r1', 'r2', 'a1', 'a2']),\n              d = d3.arc()({\n                innerRadius: r1,\n                outerRadius: r2,\n                startAngle: a1 * Math.PI / 180.0,\n                endAngle: a2 * Math.PI / 180.0,\n              })\n            return <path key={i} {...a} d={d} />\n          }\n          case 'c': return <circle key={i} {...a} />\n          case 'e': return <ellipse key={i} {...a} />\n          case 'i': return <image key={i} {...a} />\n          case 'l': return <line key={i} {...a} />\n          case 'p': return <path key={i} {...a} />\n          case 'pg': return <polygon key={i} {...a} />\n          case 'pl': return <polyline key={i} {...a} />\n          case 'r': return <rect key={i} {...a} />\n          case 's': {\n            const\n              [x, y, x0, y0, curve, radial] = extract(a, ['x', 'y', 'x0', 'y0', 'curve', 'radial']),\n              c = curves[curve] || d3.curveLinear,\n              d = radial\n                ? y0 === ''\n                  ? d3.radialArea().angle(get0).outerRadius(get1).innerRadius(ret0).curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]) as any)\n                  : y0\n                    ? d3.radialArea().angle(get0).outerRadius(get2).innerRadius(get1).curve(c)(zip3(nums(x), nums(y0), nums(y), (x, y0, y) => [x, y0, y]) as any)\n                    : x0 === ''\n                      ? d3.radialArea().endAngle(get0).startAngle(ret0).radius(get1).curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]) as any)\n                      : x0\n                        ? d3.radialArea().endAngle(get1).startAngle(get0).radius(get2).curve(c)(zip3(nums(x0), nums(x), nums(y), (x0, x, y) => [x0, x, y]) as any)\n                        : d3.radialLine().curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]))\n                : y0 === ''\n                  ? d3.area().x(get0).y1(get1).y0(ret0).curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]) as any)\n                  : y0\n                    ? d3.area().x(get0).y1(get2).y0(get1).curve(c)(zip3(nums(x), nums(y0), nums(y), (x, y0, y) => [x, y0, y]) as any)\n                    : x0 === ''\n                      ? d3.area().x1(get0).x0(ret0).y(get1).curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]) as any)\n                      : x0\n                        ? d3.area().x1(get1).x0(get0).y(get2).curve(c)(zip3(nums(x0), nums(x), nums(y), (x0, x, y) => [x0, x, y]) as any)\n                        : d3.line().curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]))\n            return <path key={i} {...a} d={d} />\n          }\n          case 't': {\n            const [text] = extract(a, ['text'])\n            return <text key={i} {...a} >{text}</text>\n          }\n          default: return <use key={i} {...a} />\n        }\n      },\n      render = () => {\n        const\n          { view_box, width, height, stage, scene } = state,\n          stageEls = stage ? unpack<Recs>(stage).map(renderEl) : [],\n          sceneEls = scene ? unpack<El[]>(scene).map(({ d, o }, i) => renderEl({\n            ...(d ? JSON.parse(d) : {}),\n            ...(o ? JSON.parse(o) : {}),\n          }, i)) : []\n        return (\n          <div data-test={name}>\n            <svg viewBox={view_box} width={width} height={height}>\n              <g>{stageEls}</g>\n              <g>{sceneEls}</g>\n            </svg>\n          </div>\n        )\n\n      }\n    return { render, changed }\n  })\n\ncards.register('graphics', View)\n\n\n","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { B, Card, unpack, Rec, S, Data, xid, box, bond } from './qd'\nimport { cards, CardView, Format } from './layout'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    body: {\n      flexGrow: 1,\n      overflow: 'auto',\n      $nest: {\n        '>*': {\n          borderBottom: '1px solid ' + theme.colors.text1,\n          padding: '5px 0',\n        },\n      },\n    },\n    table: {\n      width: '100%',\n    }\n  })\n\n/** EXPERIMENTAL. DO NOT USE. */\ninterface State {\n  /** EXPERIMENTAL. DO NOT USE. */\n  title: S\n  /** EXPERIMENTAL. DO NOT USE. */\n  cells: Data\n  /** EXPERIMENTAL. DO NOT USE. */\n  data: Data\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => {\n        let cells = unpack<any[]>(s.cells)\n\n        if (!Array.isArray(cells)) cells = [{ title: 'Data' }]\n\n        const\n          ths = cells.map((cell, i) => (<th key={i}>{cell.title}</th>)),\n          columns = cells.map(({ view, props, value }) => ({ view, props: unpack<Rec>(props), value })),\n          trs = unpack<Rec[]>(s.data).map((data, i) => {\n            const tds = columns.map(({ view, props, value }, j) => {\n              if (value != null) {\n                return <td><Format data={data} format={value} /></td>\n              } else {\n                const card: Card<any> = {\n                  name: xid(),\n                  state: { ...props, view, data },\n                  changed: box<B>(),\n                }\n                return <td><CardView key={j} card={card} /></td>\n              }\n            })\n            return (<tr key={i}>{tds}</tr>)\n          })\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.title}>{s.title || 'Untitled'}</div>\n            <div className={css.body}>\n              <table className={css.table}>\n                <thead>\n                  <tr>{ths}</tr>\n                </thead>\n                <tbody>\n                  {trs}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('grid', View)\n\n","import { INavLink, INavLinkGroup, Nav } from '@fluentui/react'\nimport React from 'react'\nimport { CardEffect, cards } from './layout'\nimport { bond, Card, S, qd, B } from './qd'\n\n/** Create a navigation item. */\nexport interface NavItem {\n  /** The name of this item. Prefix the name with a '#' to trigger hash-change navigation. */\n  name: S\n  /** The label to display. */\n  label: S\n  /** An optional icon to display next to the label. */\n  icon?: S\n}\n\n/** Create a group of navigation items. */\nexport interface NavGroup {\n  /** The label to display for this group. */\n  label: S\n  /** The navigation items contained in this group. */\n  items: NavItem[]\n  /** Indicates whether nav groups should be rendered as collapsed initially */\n  collapsed?: B\n}\n\n/** Create a card containing a navigation pane. */\nexport interface State {\n  /** The navigation groups contained in this pane. */\n  items: NavGroup[]\n  /** The name of the active (highlighted) navigation item. */\n  value?: S\n}\n\nexport const\n  XNav = ({ items, value }: State) => {\n    const groups = items.map((g): INavLinkGroup => ({\n      name: g.label,\n      collapseByDefault: g.collapsed,\n      links: g.items.map(({ name, label, icon }): INavLink => ({\n        key: name,\n        name: label,\n        icon,\n        url: '',\n        onClick: () => {\n          if (name.startsWith('#')) {\n            window.location.hash = name.substr(1)\n            return\n          }\n          qd.args[name] = true\n          qd.sync()\n        }\n      }))\n    }))\n    return <Nav groups={groups} selectedKey={value} />\n  },\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const render = () => <div data-test={name}><XNav {...state} /></div>\n    return { render, changed }\n  })\n\ncards.register('nav', View, CardEffect.Flat)","import { FontIcon, Panel, PanelType } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardEffect, cards } from './layout'\nimport { bond, Box, box, Card, S } from './qd'\nimport { clas, getTheme } from './theme'\nimport { NavGroup, XNav } from './nav'\n\nconst\n  theme = getTheme(),\n  iconSize = 24,\n  css = stylesheet({\n    card: {\n      position: 'absolute', left: 0, top: 0, right: 0, bottom: 0,\n      display: 'flex',\n      alignItems: 'center',\n    },\n    lhs: {\n      width: iconSize + 15,\n      height: iconSize + 15,\n      display: 'flex',\n      alignItems: 'center',\n      cursor: 'default',\n    },\n    burger: {\n      $nest: {\n        '&:hover': {\n          color: theme.colors.page, // TODO improve\n          cursor: 'pointer',\n        },\n      },\n    },\n    icon: {\n      fontSize: iconSize,\n      height: iconSize,\n      width: iconSize,\n    },\n    rhs: {\n      flexGrow: 1\n    },\n    title: {\n      ...theme.font.s24,\n      ...theme.font.w3,\n    },\n    subtitle: {\n      position: 'relative',\n      top: -5, // nudge up slightly to account for padding\n      ...theme.font.s12,\n    },\n  })\n\n\n/**\n * Render a card containing a HTML page inside an inline frame (iframe).\n *\n * Either a path or content can be provided as arguments.\n */\ninterface State {\n  /** The title. */\n  title: S\n  /** The subtitle, displayed below the title. */\n  subtitle: S\n  /** The icon type, displayed to the left. */\n  icon?: S\n  /** The icon's color. */\n  icon_color?: S\n  /** The navigation menu to display when the header's icon is clicked. */\n  nav?: NavGroup[]\n}\n\nconst\n  Navigation = bond(({ items, isOpenB }: { items: NavGroup[], isOpenB: Box<boolean> }) => {\n    const\n      hideNav = () => isOpenB(false),\n      render = () => (\n        <Panel\n          isLightDismiss\n          type={PanelType.smallFixedNear}\n          isOpen={isOpenB()}\n          onDismiss={hideNav}\n          hasCloseButton={false}\n        >\n          <XNav items={items} />\n        </Panel>\n      )\n    return { render, isOpenB }\n  })\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      navB = box(false),\n      showNav = () => navB(true),\n      render = () => {\n        const\n          { title, subtitle, icon, icon_color, nav } = state,\n          burger = nav\n            ? (\n              <div className={clas(css.lhs, css.burger)} onClick={showNav}>\n                <FontIcon className={css.icon} iconName='GlobalNavButton' />\n              </div>\n            ) : (\n              <div className={css.lhs}>\n                <FontIcon className={css.icon} iconName={icon ?? 'WebComponents'} style={{ color: theme.color(icon_color) }} />\n              </div>\n            )\n\n        return (\n          <div data-test={name} className={css.card}>\n            {burger}\n            <div className={css.rhs}>\n              <div className={css.title}>{title}</div>\n              <div className={css.subtitle}>{subtitle}</div>\n            </div>\n            {nav && <Navigation items={nav} isOpenB={navB} />}\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('header', View, CardEffect.Raised)\n\n\n","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format } from './layout'\nimport { bond, Card, Rec, S } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    img: {\n      flexGrow: 1,\n      objectFit: 'contain',\n      maxHeight: 'calc(100% - 20px)'\n    }\n  })\n\n/** Create a card that displays a base64-encoded image. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The image MIME subtype. One of `apng`, `bmp`, `gif`, `x-icon`, `jpeg`, `png`, `webp`. */\n  type: S\n  /** Image data, base64-encoded. */\n  image: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => (\n      <div data-test={name} className={css.card}>\n        <div className={css.title}>\n          <Format data={s.data} format={s.title} />\n        </div>\n        <img className={css.img} alt={s.title} src={`data:image/${s.type};base64,${s.image}`} />\n      </div>\n    )\n\n    return { render, changed }\n  })\n\ncards.register('image', View)\n\n","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { F, S, U } from '../qd'\n\nconst css = stylesheet({\n  body: {\n    position: 'relative',\n  },\n  rail: {\n    position: 'absolute',\n    width: '100%',\n    opacity: 0.15,\n  },\n  bar: {\n    position: 'absolute',\n  }\n})\n\ninterface Props {\n  thickness: U\n  color: S\n  value: F\n}\n\nexport const ProgressBar = ({ thickness, color, value }: Props) => {\n  return (\n    <div className={css.body} style={{ height: thickness }}>\n      <div className={css.rail} style={{ height: thickness, backgroundColor: color }} />\n      <div className={css.bar} style={{ width: `${Math.round(value * 100)}%`, height: thickness, backgroundColor: color }} />\n    </div>\n  )\n}\n","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format } from './layout'\nimport { bond, Card, unpack, F, Rec, S } from './qd'\nimport { getTheme } from './theme'\nimport { ProgressBar } from './parts/progress_bar'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'space-between',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    values: {\n      display: 'flex',\n      alignItems: 'baseline',\n      justifyContent: 'space-between',\n      ...theme.font.s18,\n      ...theme.font.w3,\n    },\n    value: {\n    },\n    aux_value: {\n      color: theme.colors.text7,\n    },\n    caption: {\n      ...theme.font.s13,\n      color: theme.colors.text5,\n    },\n    captions: {\n      display: 'flex',\n      alignItems: 'baseline',\n      justifyContent: 'space-between',\n      ...theme.font.s12,\n      color: theme.colors.text7,\n    },\n    value_caption: {\n    },\n    aux_value_caption: {\n    },\n  })\n\n/** Create a large captioned card displaying a primary value, an auxiliary value and a progress bar, with captions for each value. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The card's caption. */\n  caption: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value, typically a target value. */\n  aux_value: S\n  /** The caption displayed below the primary value. */\n  value_caption: S\n  /** The caption displayed below the auxiliary value. */\n  aux_value_caption: S\n  /** The value of the progress bar, between 0 and 1. */\n  progress: F\n  /** The color of the progress bar. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          data = unpack(s.data)\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.title}>\n              <Format data={data} format={s.title} />\n            </div>\n            <div className={css.caption}>\n              <Format data={data} format={s.caption} />\n            </div>\n            <div>\n              <div className={css.values}>\n                <div className={css.value}>\n                  <Format data={data} format={s.value} />\n                </div>\n                <div className={css.aux_value}>\n                  <Format data={data} format={s.aux_value} />\n                </div>\n              </div>\n              <ProgressBar thickness={2} color={theme.color(s.plot_color)} value={s.progress} />\n              <div className={css.captions}>\n                <div className={css.value_caption}>\n                  <Format data={data} format={s.value_caption} />\n                </div>\n                <div className={css.aux_value_caption}>\n                  <Format data={data} format={s.aux_value_caption} />\n                </div>\n              </div>\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('large_bar_stat', View)\n\n","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format } from './layout'\nimport { bond, Card, Rec, S } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    values: {\n      display: 'flex',\n      alignItems: 'baseline',\n    },\n    value: {\n      ...theme.font.s40,\n      ...theme.font.w2,\n    },\n    aux_value: {\n      marginLeft: 5,\n      color: theme.colors.text6,\n    },\n    caption: {\n      ...theme.font.s13,\n      color: theme.colors.text5,\n    }\n  })\n\n/** Create a stat card displaying a primary value, an auxiliary value and a caption. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed next to the primary value. */\n  aux_value: S\n  /** The caption displayed below the primary value. */\n  caption: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => {\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.title}>\n              <Format data={s.data} format={s.title} />\n            </div>\n            <div className={css.values}>\n              <div className={css.value}>\n                <Format data={s.data} defaultValue={s.value} format={s.value} />\n              </div>\n              <div className={css.aux_value}>\n                <Format data={s.data} format={s.aux_value} />\n              </div>\n            </div>\n            <div className={css.caption}>\n              <Format data={s.data} format={s.caption} />\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('large_stat', View)\n","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Repeat } from './layout'\nimport { bond, Card, Rec, S, Data } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    body: {\n      flexGrow: 1,\n      overflow: 'auto',\n      $nest: {\n        '>*': {\n          borderBottom: '1px solid ' + theme.colors.text1,\n          padding: '5px 0',\n        },\n      },\n    }\n  })\n\n/**\n * EXPERIMENTAL. DO NOT USE.\n * Create a card containing other cards laid out in the form of a list (vertically, top-to-bottom).\n **/\ninterface State {\n  /** The title for this card. */\n  title: S\n  /** The child card type. */\n  item_view: S\n  /** The child card properties. */\n  item_props: Rec\n  /** Data for this card. */\n  data: Data\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => {\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.title}>{s.title}</div>\n            <div className={css.body}>\n              <Repeat view={s.item_view} props={s.item_props} data={s.data} />\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('list', View)\n","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format } from './layout'\nimport { bond, Card, unpack, Rec, S } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    item: {\n      display: 'flex',\n      justifyContent: 'space-between',\n    },\n    left: {\n      flexDirection: 'column',\n    },\n    right: {\n      flexDirection: 'column',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    caption: {\n      ...theme.font.s13,\n      color: theme.colors.text5,\n    },\n    value: {\n      ...theme.font.s12,\n    },\n    aux_value: {\n      ...theme.font.s13,\n      color: theme.colors.text5,\n    },\n  })\n\n/** EXPERIMENTAL. DO NOT USE. */\ninterface State {\n  /** EXPERIMENTAL. DO NOT USE. */\n  title: S\n  /** EXPERIMENTAL. DO NOT USE. */\n  caption: S\n  /** EXPERIMENTAL. DO NOT USE. */\n  value: S\n  /** EXPERIMENTAL. DO NOT USE. */\n  aux_value: S\n  /** EXPERIMENTAL. DO NOT USE. */\n  data: Rec\n}\n\nconst defaults: Partial<State> = {\n  title: 'Untitled',\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          s = theme.merge(defaults, state),\n          data = unpack(s.data)\n\n        return (\n          <div data-test={name} className={css.item}>\n            <div className={css.left}>\n              <div className={css.title}>\n                <Format data={data} format={s.title} />\n              </div>\n              <div className={css.caption}>\n                <Format data={data} format={s.caption} />\n              </div>\n            </div>\n            <div className={css.right}>\n              <div className={css.value}>\n                <Format data={data} format={s.value} />\n              </div>\n              <div className={css.aux_value}>\n                <Format data={data} format={s.aux_value} />\n              </div>\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('list_item1', View)\n\n\n","import React from 'react'\nimport { bond, Card, S } from './qd'\nimport { cards } from './layout'\n\nexport const\n  View = bond(({ name, state, changed }: Card<Record<S, unknown>>) => {\n    const\n      render = () => (\n        <div data-test={name}>\n          <pre>{JSON.stringify(state, null, 2)}</pre>\n        </div>\n      )\n    return { render, changed }\n  })\n\ncards.register('', View)","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards } from './layout'\nimport { bond, Card, unpack, Rec, S, qd, U } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  pixelSize = 20,\n  canvasSize = pixelSize * 16,\n  palette = '#ffffff #bfbfbf #808080 #404040 #000000 #6699ff #3366cc #003399 #99cc33 #00cc00 #669900 #ffcc00 #ff9900 #ff6600 #cc0000'.split(/\\s+/g)\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    canvas: {\n      display: 'flex', flexWrap: 'wrap',\n      width: canvasSize, height: canvasSize,\n    },\n    swatches: {\n      paddingTop: 10,\n      marginTop: 15,\n      borderTop: '1px solid #ccc',\n    },\n    pixel: {\n      display: 'inline-block',\n      width: pixelSize, height: pixelSize,\n    }\n  }),\n  defaultColorAt = (i: U): S => {\n    const\n      row = Math.floor(i / 16),\n      col = i % 16,\n      odd = col % 2 === 1\n    return row % 2 === 0\n      ? odd ? '#fff' : '#ddd'\n      : odd ? '#ddd' : '#fff'\n\n  }\n\n/** Create a card displaying a collaborative Pixel art tool, just for kicks. */\ninterface State {\n  /** The title for this card.*/\n  title: S\n  /** The data for this card.*/\n  data: Rec\n}\n\n/** A pixel. */\ninterface Pixel {\n  /** The pixel's color. */\n  color: S\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    let brush = '#000'\n    const\n      paint = (i: U) => {\n        const page = qd.page()\n        page.set(`${name} data ${i}`, brush === 'none' ? null : [brush])\n        page.sync()\n      },\n      render = () => {\n        const\n          data = unpack<(Pixel | null)[]>(s.data),\n          swatches = palette.map((c, i) => (\n            <div\n              key={i}\n              className={css.pixel}\n              style={{ backgroundColor: c }}\n              onClick={() => brush = c}\n            />\n          )),\n          pixels = data.map((p, i) => {\n            const color = p ? p.color : defaultColorAt(i)\n            return (\n              <div\n                key={i}\n                className={css.pixel}\n                style={{ backgroundColor: color }}\n                onClick={() => paint(i)}\n              />\n            )\n          })\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.title}>{s.title}</div>\n            <div className={css.canvas}>{pixels}</div>\n            <div className={css.swatches}>\n              <div className={css.pixel}>\n                <svg onClick={() => brush = 'none'} viewBox=\"0 0 433.25 433.25\" width={pixelSize} height={pixelSize}>\n                  <path d=\"M418.4,192.331c19.8-19.8,19.8-51.9,0-71.7l-0.1-0.1l-78.6-78.3c-19.8-19.8-51.9-19.7-71.8,0l-169.5,169.6l-54.2,54.1 c-19.8,19.7-19.8,51.8-0.1,71.6l48.3,48.3H10c-5.5,0-10,4.5-10,10s4.5,10,10,10h297.4c5.5,0,10-4.5,10-10s-4.5-10-10-10H225 l23.9-23.7L418.4,192.331z M196.7,385.831h-76.1l-62.3-62.4c-12-12-11.9-31.4,0-43.4l47.1-47l122.2,122L196.7,385.831z M119.6,218.931l162.5-162.5c12-12,31.5-12,43.5,0l78.6,78.4c12,12,12,31.4,0,43.5l-162.4,162.8L119.6,218.931z\" />\n                </svg>\n              </div>\n              {swatches}\n            </div>\n          </div>)\n\n      }\n    return { render, changed }\n  })\n\ncards.register('pixel_art', View)\n\n","import React from 'react'\nimport { cards, Repeat } from './layout'\nimport { bond, Card, Rec, S, Data } from './qd'\n\n/**\n * EXPERIMENTAL. DO NOT USE.\n * Create a card containing other cards.\n **/\ninterface State {\n  /** EXPERIMENTAL. DO NOT USE. */\n  item_view: S\n  /** The child card properties. */\n  item_props: Rec\n  /** Data for this card. */\n  data: Data\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => (\n        <div data-test={name}>\n          <Repeat view={s.item_view} props={s.item_props} data={s.data} />\n        </div>\n      )\n    return { render, changed }\n  })\n\ncards.register('repeat', View)\n","import * as d3 from 'd3'\nimport React from 'react'\nimport { F, S, U } from '../qd'\n\ninterface Props {\n  width: U\n  height: U\n  data: any[]\n  zeroValue?: F\n  category?: S\n  value: S\n  color: S\n}\n\nexport class MicroBars extends React.Component<Props> {\n  ref = React.createRef<SVGSVGElement>()\n  render() {\n    const\n      { width, height, value, category: _category, color, data, zeroValue } = this.props,\n      category = _category ? _category : 'x'\n\n\n    let [minY, maxY] = d3.extent<any, any>(data, d => d[value])\n\n    if (zeroValue != null) {\n      if (minY > zeroValue) {\n        minY = zeroValue\n      } else if (maxY < zeroValue) {\n        maxY = zeroValue\n      }\n    }\n\n    const\n      maxWidth = data.length * 8,\n      scaleX = d3.scaleBand().domain(data.map(d => d[category])).range([0, Math.min(width, maxWidth)]).paddingInner(0.1),\n      scaleY = d3.scaleLinear().domain([minY, maxY]).range([height, 0]),\n      rects = data.map((d, i) => {\n        const x = scaleX(d[category]), y = scaleY(d[value])\n        return <rect key={i} fill={color} x={x} y={y} width={2} height={height - y} />\n      })\n    return (\n      <svg ref={this.ref} width={width} height={height}>\n        {rects}\n      </svg>\n    )\n  }\n}\n","import * as d3 from 'd3'\nimport React from 'react'\nimport { F, S, U } from '../qd'\n\ninterface Props {\n  width: U\n  height: U\n  data: any[]\n  zeroValue?: F\n  value: S\n  color: S\n  curve: 'linear' | 'smooth' | 'step' | 'step-after' | 'step-before'\n}\n\nconst\n  curves: any = {\n    linear: d3.curveLinear,\n    smooth: d3.curveCatmullRom,\n    step: d3.curveStep,\n    'step-after': d3.curveStepAfter,\n    'step-before': d3.curveStepBefore,\n  }\n\nexport class MicroArea extends React.Component<Props> {\n  ref = React.createRef<SVGSVGElement>()\n  render() {\n    const { width, height, value, color, data, zeroValue, curve } = this.props\n\n    let [minY, maxY] = d3.extent<any, any>(data, d => d[value])\n\n    if (zeroValue != null) {\n      if (minY > zeroValue) {\n        minY = zeroValue\n      } else if (maxY < zeroValue) {\n        maxY = zeroValue\n      }\n    }\n\n    const\n      scaleX = d3.scaleLinear().domain([0, data.length - 1]).range([0, width]),\n      scaleY = d3.scaleLinear().domain([minY, maxY]).range([height, 2]), // 2px less so that stroke doesn't clip at edges\n      fcurve = curves[curve] || d3.curveLinear,\n      ln = d3.line<any>()\n        // .curve(d3.curveBasis) // XXX add support for this\n        .defined(d => d && d[value] != null)\n        .x((_, i) => scaleX(i))\n        .y(d => scaleY(d[value]))\n        .curve(fcurve),\n      ar = d3.area<any>()\n        // .curve(d3.curveBasis) // XXX add support for this\n        .defined(d => d && d[value] != null)\n        .x((_, i) => scaleX(i))\n        .y0(_ => scaleY(zeroValue == null ? minY : zeroValue))\n        .y1(d => scaleY(d[value]))\n        .curve(fcurve)\n\n    return (\n      <svg ref={this.ref} width={width} height={height}>\n        <path d={ar(data) as S} fill={color} fillOpacity='0.1' strokeLinejoin='round' strokeLinecap='round'></path>\n        <path d={ln(data) as S} fill='none' stroke={color} strokeWidth='1.5' strokeLinejoin='round' strokeLinecap='round'></path>\n      </svg>\n    )\n  }\n}\n","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { bond, Card, unpack, F, Rec, S, Data } from './qd'\nimport { getTheme } from './theme'\nimport { MicroBars } from './parts/microbars'\nimport { MicroArea } from './parts/microline'\n\nconst\n  theme = getTheme(),\n  plotHeight = grid.unitInnerHeight - 10,\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    titleBar: {\n      display: 'flex',\n      justifyContent: 'space-between',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    value: {\n      ...theme.font.s12,\n    },\n    plot: {\n      position: 'absolute',\n      left: -grid.gap,\n      bottom: -grid.gap,\n      height: plotHeight,\n    },\n  })\n\n/** Create a small stat card displaying a primary value and a series plot. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The plot's data. */\n  plot_data: Data\n  /** The data field to use for y-axis values. */\n  plot_value: S\n  /** The base value to use for each y-axis mark. Set this to `0` if you want to pin the x-axis at `y=0`. If not provided, the minimum value from the data is used. */\n  plot_zero_value?: F\n  /** The data field to use for x-axis values (ignored if `plot_type` is `area`; must be provided if `plot_type` is `interval`). Defaults to 'x'. */\n  plot_category?: S\n  /** The type of plot. Defaults to `area`. */\n  plot_type?: 'area' | 'interval'\n  /** The plot's curve style. Defaults to `linear`. */\n  plot_curve?: 'linear' | 'smooth' | 'step' | 'step-after' | 'step-before'\n  /** The plot's color. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          plotWidth = grid.unitWidth,\n          data = unpack(s.data),\n          plot = s.plot_type === 'interval'\n            ? (\n              <MicroBars\n                width={plotWidth}\n                height={plotHeight}\n                data={unpack(s.plot_data)}\n                category={s.plot_category}\n                value={s.plot_value}\n                color={theme.color(s.plot_color)}\n                zeroValue={s.plot_zero_value}\n              />\n            ) : (\n              <MicroArea\n                width={plotWidth}\n                height={plotHeight}\n                data={unpack(s.plot_data)}\n                value={s.plot_value}\n                color={theme.color(s.plot_color)}\n                zeroValue={s.plot_zero_value}\n                curve={s.plot_curve || 'linear'}\n              />\n            )\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.titleBar}>\n              <div className={css.title || 'Untitled'}>\n                <Format data={data} format={s.title} />\n              </div>\n              <div className={css.value}>\n                <Format data={data} format={s.value} />\n              </div>\n            </div>\n            <div className={css.plot}>{plot}</div>\n          </div>)\n      }\n    return { render, changed }\n  })\n\ncards.register('small_series_stat', View)\n","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format } from './layout'\nimport { bond, Card, Rec, S, unpack } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    value: {\n      ...theme.font.s24,\n      ...theme.font.w3,\n    }\n  })\n\n/** Create a stat card displaying a single value. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          data = unpack(s.data)\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.title}>\n              <Format data={data} format={s.title} />\n            </div>\n            <div className={css.value}>\n              <Format data={data} format={s.value} />\n            </div>\n          </div>)\n      }\n    return { render, changed }\n  })\n\n\ncards.register('small_stat', View)\n","import { Pivot, PivotItem, PivotLinkFormat } from '@fluentui/react'\nimport React from 'react'\nimport { CardEffect, cards } from './layout'\nimport { Tab } from './tabs'\nimport { bond, Card, qd, B, S } from './qd'\n\n/** Create a card containing tabs for navigation. */\ninterface State {\n  /** Items to render. */\n  items: Tab[]\n  /** The name of the tab to select. */\n  value?: S\n  /** True if tabs should be rendered as links and not a standard tab. */\n  link?: B\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      onLinkClick = (item?: PivotItem) => {\n        const name = item?.props.itemKey\n        if (!name) return\n        if (name.startsWith('#')) {\n          window.location.hash = name.substr(1)\n          return\n        }\n        qd.args[name] = true\n        qd.sync()\n      },\n      render = () => {\n        const\n          linkFormat = state.link ? PivotLinkFormat.links : PivotLinkFormat.tabs,\n          items = state.items.map(({ name, label, icon }) => (\n            <PivotItem key={name} itemKey={name} headerText={label} itemIcon={icon} />\n          ))\n        return <Pivot data-test={name} linkFormat={linkFormat} onLinkClick={onLinkClick} defaultSelectedKey={state.value}>{items}</Pivot>\n\n      }\n    return { render, changed }\n  })\n\ncards.register('tab', View, CardEffect.Flat)\n","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { bond, Card, unpack, F, Rec, S } from './qd'\nimport { getTheme } from './theme'\nimport { ProgressArc } from './parts/progress_arc'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'space-between',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    body: {\n      position: 'relative',\n      width: grid.unitInnerWidth, height: grid.unitInnerWidth,\n    },\n    value_overlay: {\n      position: 'absolute',\n      left: 0, top: 0,\n      width: grid.unitInnerWidth, height: grid.unitInnerWidth,\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n      alignItems: 'center',\n    },\n    value: {\n      ...theme.font.s24,\n      ...theme.font.w3,\n    },\n    aux_value: {\n      ...theme.font.s12,\n      color: theme.colors.text7,\n    },\n  })\n\n/** Create a tall stat card displaying a primary value, an auxiliary value and a progress gauge. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed next to the primary value. */\n  aux_value: S\n  /** The value of the progress gauge, between 0 and 1. */\n  progress: F\n  /** The color of the progress gauge. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => {\n        const data = unpack(s.data)\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.title}>\n              <Format data={data} format={s.title} />\n            </div>\n            <div className={css.body}>\n              <ProgressArc size={grid.unitInnerWidth} thickness={2} color={theme.color(s.plot_color)} value={s.progress} />\n              <div className={css.value_overlay}>\n                <div className={css.value}>\n                  <Format data={data} format={s.value} />\n                </div>\n                <div className={css.aux_value}>\n                  <Format data={data} format={s.aux_value} />\n                </div>\n              </div>\n            </div>\n          </div>)\n      }\n    return { render, changed }\n  })\n\ncards.register('tall_gauge_stat', View)\n\n","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { bond, Card, unpack, F, Rec, S, Data } from './qd'\nimport { getTheme } from './theme'\nimport { MicroBars } from './parts/microbars'\nimport { MicroArea } from './parts/microline'\n\nconst\n  theme = getTheme(),\n  plotHeight = grid.unitHeight,\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    value: {\n      ...theme.font.s24,\n      ...theme.font.w3,\n    },\n    aux_value: {\n      ...theme.font.s12,\n      color: theme.colors.text7,\n    },\n    plot: {\n      position: 'absolute',\n      left: -grid.gap,\n      bottom: -grid.gap,\n      height: plotHeight,\n    }\n  })\n\n/** Create a tall stat card displaying a primary value, an auxiliary value and a series plot. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed below the primary value. */\n  aux_value: S\n  /** The plot's data. */\n  plot_data: Data\n  /** The data field to use for y-axis values. */\n  plot_value: S\n  /** The base value to use for each y-axis mark. Set this to `0` if you want to pin the x-axis at `y=0`. If not provided, the minimum value from the data is used. */\n  plot_zero_value?: F\n  /** The data field to use for x-axis values (ignored if `plot_type` is `area`; must be provided if `plot_type` is `interval`). Defaults to 'x'. */\n  plot_category?: S\n  /** The type of plot. Defaults to `area`. */\n  plot_type?: 'area' | 'interval'\n  /** The plot's curve style. Defaults to `linear`. */\n  plot_curve?: 'linear' | 'smooth' | 'step' | 'step-after' | 'step-before'\n  /** The plot's color. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          plotWidth = grid.unitWidth,\n          data = unpack(s.data),\n          plot = s.plot_type === 'interval'\n            ? (\n              <MicroBars\n                width={plotWidth}\n                height={plotHeight}\n                data={unpack(s.plot_data)}\n                category={s.plot_category}\n                value={s.plot_value}\n                color={theme.color(s.plot_color)}\n                zeroValue={s.plot_zero_value}\n              />\n            ) : (\n              <MicroArea\n                width={plotWidth}\n                height={plotHeight}\n                data={unpack(s.plot_data)}\n                value={s.plot_value}\n                color={theme.color(s.plot_color)}\n                zeroValue={s.plot_zero_value}\n                curve={s.plot_curve || 'linear'}\n              />\n            )\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.title}>\n              <Format data={data} format={s.title || 'Untitled'} />\n            </div>\n            <div className={css.value}>\n              <Format data={data} format={s.value} />\n            </div>\n            <div className={css.aux_value}>\n              <Format data={data} format={s.aux_value} />\n            </div>\n            <div className={css.plot}>{plot}</div>\n          </div>)\n      }\n    return { render, changed }\n  })\n\ncards.register('tall_series_stat', View)\n\n\n","import { CommandBar, IButtonProps, ICommandBarItemProps } from '@fluentui/react'\nimport React from 'react'\nimport { CardEffect, cards } from './layout'\nimport { bond, Card, qd, S } from './qd'\n\n/**\n * Create a command.\n *\n * Commands are typically displayed as context menu items or toolbar button.\n */\nexport interface Command {\n  /** An identifying name for this component. If the name is prefixed with a '#', the command sets the location hash to the name when executed. */\n  name: S\n  /** The text displayed for this command. */\n  label?: S\n  /** The caption for this command (typically a tooltip). */\n  caption?: S\n  /** The icon to be displayed for this command. */\n  icon?: S\n  /** Sub-commands, if any */\n  items?: Command[]\n  /** Data associated with this command, if any. */\n  value?: S\n  /** DEPRECATED. Use `value` instead. Data associated with this command, if any. */\n  data?: S\n}\n\n\n/** Create a card containing a toolbar. */\ninterface State {\n  /** Items to render. */\n  items: Command[]\n  /** Items to render on the right side (or left, in RTL). */\n  secondary_items?: Command[]\n  /** Items to render in an overflow menu. */\n  overflow_items?: Command[]\n}\n\nconst\n  overflowProps: IButtonProps = { ariaLabel: 'More' },\n  toCommands = (commands: Command[]) => commands.map(toCommand),\n  toCommand = ({ name, label, caption, icon, items }: Command): ICommandBarItemProps => {\n    qd.args[name] = false\n    const onClick = () => {\n      if (name[0] === '#') {\n        window.location.hash = name.substr(1)\n        return\n      }\n      qd.args[name] = true\n      qd.sync()\n    }\n    return {\n      key: name,\n      text: label,\n      ariaLabel: caption || label,\n      title: caption,\n      iconOnly: !label,\n      iconProps: icon ? { iconName: icon } : undefined,\n      subMenuProps: items ? { items: toCommands(items) } : undefined,\n      onClick,\n    }\n  }\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          { items, overflow_items, secondary_items } = state,\n          commands = toCommands(items),\n          overflowCommands = overflow_items ? toCommands(overflow_items) : undefined,\n          farCommands = secondary_items ? toCommands(secondary_items) : undefined\n        return (\n          <div>\n            <CommandBar\n              data-test={name}\n              items={commands}\n              overflowItems={overflowCommands}\n              overflowButtonProps={overflowProps}\n              farItems={farCommands}\n              ariaLabel='Use left and right arrow keys to navigate between commands.'\n            />\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('toolbar', View, CardEffect.Flat)\n\n\n","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format } from './layout'\nimport { ProgressBar } from './parts/progress_bar'\nimport { bond, Card, F, Rec, S, unpack } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'space-between',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    values: {\n      display: 'flex',\n      alignItems: 'baseline',\n    },\n    value: {\n      ...theme.font.s18,\n      ...theme.font.w3,\n    },\n    aux_value: {\n      ...theme.font.s13,\n      color: theme.colors.text7,\n      flexGrow: 1,\n      marginLeft: 5,\n    }\n  })\n\n/** Create a wide stat card displaying a primary value, an auxiliary value and a progress bar. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed next to the primary value. */\n  aux_value: S\n  /** The value of the progress bar, between 0 and 1. */\n  progress: F\n  /** The color of the progress bar. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => {\n        const data = unpack(s.data)\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.title}>\n              <Format data={data} format={s.title} />\n            </div>\n            <div className={css.values}>\n              <div className={css.value}>\n                <Format data={data} format={s.value} />\n              </div>\n              <div className={css.aux_value}>\n                <Format data={data} format={s.aux_value} />\n              </div>\n            </div>\n            <ProgressBar thickness={2} color={theme.color(s.plot_color)} value={s.progress} />\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('wide_bar_stat', View)\n","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { bond, Card, unpack, F, Rec, S } from './qd'\nimport { getTheme } from './theme'\nimport { ProgressArc } from './parts/progress_arc'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n    },\n    left: {\n      width: grid.unitInnerHeight,\n      height: grid.unitInnerHeight,\n      marginRight: grid.gap,\n    },\n    percentContainer: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      flexDirection: 'column',\n      position: 'absolute',\n      left: 0,\n      top: 0,\n      width: grid.unitInnerHeight,\n      height: grid.unitInnerHeight,\n    },\n    percent: {\n      ...theme.font.s12,\n      opacity: 0.5,\n    },\n    right: {\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      // justifyContent: 'space-between',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n      overflow: 'visible'\n    },\n    values: {\n      display: 'flex',\n      alignItems: 'baseline',\n    },\n    value: {\n      ...theme.font.s24,\n      ...theme.font.w3,\n    },\n    aux_value: {\n      ...theme.font.s13,\n      color: theme.colors.text7,\n      flexGrow: 1,\n      marginLeft: 5,\n    }\n  })\n\n/** Create a wide stat card displaying a primary value, an auxiliary value and a progress gauge. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed next to the primary value. */\n  aux_value: S\n  /** The value of the progress gauge, between 0 and 1. */\n  progress: F\n  /** The color of the progress gauge. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => {\n        const data = unpack(s.data)\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.left}>\n              <ProgressArc size={grid.unitInnerHeight} thickness={2} color={theme.color(s.plot_color)} value={s.progress} />\n              <div className={css.percentContainer}>\n                <div className={css.percent}>{`${Math.round(s.progress * 100)}%`}</div>\n              </div>\n            </div>\n            <div className={css.right}>\n              <div className={css.title}>\n                <Format data={data} format={s.title} />\n              </div>\n              <div className={css.values}>\n                <div className={css.value}>\n                  <Format data={data} format={s.value} />\n                </div>\n                <div className={css.aux_value}>\n                  <Format data={data} format={s.aux_value} />\n                </div>\n              </div>\n            </div>\n          </div>)\n      }\n    return { render, changed }\n  })\n\ncards.register('wide_gauge_stat', View)\n","import React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { bond, Card, unpack, F, Rec, S, Data } from './qd'\nimport { getTheme } from './theme'\nimport { MicroBars } from './parts/microbars'\nimport { MicroArea } from './parts/microline'\n\nconst\n  theme = getTheme(),\n  plotWidth = grid.unitWidth - grid.gap,\n  plotHeight = grid.unitInnerHeight,\n  css = stylesheet({\n    card: {\n      display: 'flex',\n    },\n    left: {\n      width: plotWidth,\n      height: grid.unitInnerHeight,\n      marginRight: grid.gap,\n    },\n    right: {\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      // justifyContent: 'space-between',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    values: {\n      display: 'flex',\n      alignItems: 'baseline',\n    },\n    value: {\n      ...theme.font.s24,\n      ...theme.font.w3,\n    },\n    aux_value: {\n      flexGrow: 1,\n      ...theme.font.s13,\n      color: theme.colors.text7,\n      marginLeft: 5,\n      marginBottom: 3,\n    }\n  })\n\n/** Create a wide stat card displaying a primary value, an auxiliary value and a series plot. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed below the primary value. */\n  aux_value: S\n  /** The plot's data. */\n  plot_data: Data\n  /** The data field to use for y-axis values. */\n  plot_value: S\n  /** The base value to use for each y-axis mark. Set this to `0` if you want to pin the x-axis at `y=0`. If not provided, the minimum value from the data is used. */\n  plot_zero_value?: F\n  /** The data field to use for x-axis values (ignored if `plot_type` is `area`; must be provided if `plot_type` is `interval`). Defaults to 'x'. */\n  plot_category?: S\n  /** The type of plot. Defaults to `area`. */\n  plot_type?: 'area' | 'interval'\n  /** The plot's curve style. Defaults to `linear`. */\n  plot_curve?: 'linear' | 'smooth' | 'step' | 'step-after' | 'step-before'\n  /** The plot's color. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          data = unpack(s.data),\n          plot = s.plot_type === 'interval'\n            ? (\n              <MicroBars\n                width={plotWidth}\n                height={plotHeight}\n                data={unpack(s.plot_data)}\n                category={s.plot_category}\n                value={s.plot_value}\n                color={theme.color(s.plot_color)}\n                zeroValue={s.plot_zero_value}\n              />\n            ) : (\n              <MicroArea\n                width={plotWidth}\n                height={plotHeight}\n                data={unpack(s.plot_data)}\n                value={s.plot_value}\n                color={theme.color(s.plot_color)}\n                zeroValue={s.plot_zero_value}\n                curve={s.plot_curve || 'linear'}\n              />\n            )\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.left}>{plot}</div>\n            <div className={css.right}>\n              <div className={css.title}>\n                <Format data={data} format={s.title} />\n              </div>\n              <div className={css.values}>\n                <div className={css.value}>\n                  <Format data={data} format={s.value} />\n                </div>\n                <div className={css.aux_value}>\n                  <Format data={data} format={s.aux_value} />\n                </div>\n              </div>\n            </div>\n          </div>)\n      }\n    return { render, changed }\n  })\n\ncards.register('wide_series_stat', View)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    )\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister()\n      })\n      .catch(error => {\n        console.error(error.message)\n      })\n  }\n}\n","import { initializeIcons, loadTheme } from '@fluentui/react'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport Router from './router'\nimport './cards'\nimport './index.css'\nimport * as serviceWorker from './serviceWorker'\nimport { defaultFontStyle, palette } from \"./theme\"\n\nloadTheme({ defaultFontStyle, palette })\n\n// Initialize Fluent icons\ninitializeIcons()\n\nReactDOM.render(<Router />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}